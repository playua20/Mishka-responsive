!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],w=C.document,n=Object.getPrototypeOf,a=t.slice,g=t.concat,l=t.push,r=t.indexOf,i={},o=i.toString,m=i.hasOwnProperty,s=m.toString,u=s.call(Object),y={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,noModule:!0};function b(e,t,i){var n,r=(t=t||w).createElement("script");if(r.text=e,i)for(n in c)i[n]&&(r[n]=i[n]);t.head.appendChild(r).parentNode.removeChild(r)}function T(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[o.call(e)]||"object":typeof e}var k=function(e,t){return new k.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function h(e){var t=!!e&&"length"in e&&e.length,i=T(e);return!v(e)&&!_(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:"3.3.1",constructor:k,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(i){return this.pushStack(k.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=s[t],s!==(n=e[t])&&(u&&n&&(k.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&k.isPlainObject(i)?i:{},s[t]=k.extend(u,o,n)):void 0!==n&&(s[t]=n));return s},k.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==o.call(e)||(t=n(e))&&("function"!=typeof(i=m.call(t,"constructor")&&t.constructor)||s.call(i)!==u))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){b(e)},each:function(e,t){var i,n=0;if(h(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(d,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(h(Object(e))?k.merge(i,"string"==typeof e?[e]:e):l.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,s=!i;r<o;r++)!t(e[r],r)!==s&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,s=[];if(h(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&s.push(r);return g.apply([],s)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});var p=function(i){var e,p,b,o,r,f,d,g,T,l,u,S,C,s,w,m,a,c,y,k="sizzle"+1*new Date,v=i.document,E=0,n=0,h=se(),_=se(),x=se(),A=function(e,t){return e===t&&(u=!0),0},L={}.hasOwnProperty,t=[],P=t.pop,I=t.push,O=t.push,D=t.slice,M=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+N+"*("+j+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+N+"*\\]",U=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),H=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),q=new RegExp("^"+N+"*,"+N+"*"),z=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),V=new RegExp(U),G=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){S()},re=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{O.apply(t=D.call(v.childNodes),v.childNodes),t[v.childNodes.length].nodeType}catch(i){O={apply:t.length?function(e,t){I.apply(e,D.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,i,n){var r,o,s,a,l,u,c,d=t&&t.ownerDocument,h=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return i;if(!n&&((t?t.ownerDocument||t:v)!==C&&S(t),t=t||C,w)){if(11!==h&&(l=Q.exec(e)))if(r=l[1]){if(9===h){if(!(s=t.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(d&&(s=d.getElementById(r))&&y(t,s)&&s.id===r)return i.push(s),i}else{if(l[2])return O.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&p.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(r)),i}if(p.qsa&&!x[e+" "]&&(!m||!m.test(e))){if(1!==h)d=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(te,ie):t.setAttribute("id",a=k),o=(u=f(e)).length;o--;)u[o]="#"+a+" "+ye(u[o]);c=u.join(","),d=J.test(e)&&ge(t.parentNode)||t}if(c)try{return O.apply(i,d.querySelectorAll(c)),i}catch(e){}finally{a===k&&t.removeAttribute("id")}}}return g(e.replace(H,"$1"),t,i,n)}function se(){var n=[];return function e(t,i){return n.push(t+" ")>b.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function ae(e){return e[k]=!0,e}function le(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var i=e.split("|"),n=i.length;n--;)b.attrHandle[i[n]]=t}function ce(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function pe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function fe(s){return ae(function(o){return o=+o,ae(function(e,t){for(var i,n=s([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=oe.support={},r=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},S=oe.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:v;return n!==C&&9===n.nodeType&&n.documentElement&&(s=(C=n).documentElement,w=!r(C),v!==C&&(i=C.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ne,!1):i.attachEvent&&i.attachEvent("onunload",ne)),p.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=le(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=K.test(C.getElementsByClassName),p.getById=le(function(e){return s.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),p.getById?(b.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var i=t.getElementById(e);return i?[i]:[]}}):(b.filter.ID=function(e){var i=e.replace(Z,ee);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),b.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},b.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&w)return t.getElementsByClassName(e)},a=[],m=[],(p.qsa=K.test(C.querySelectorAll))&&(le(function(e){s.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+N+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),s.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(p.matchesSelector=K.test(c=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&le(function(e){p.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),a.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),a=a.length&&new RegExp(a.join("|")),t=K.test(s.compareDocumentPosition),y=t||K.test(s.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===i?e===C||e.ownerDocument===v&&y(v,e)?-1:t===C||t.ownerDocument===v&&y(v,t)?1:l?M(l,e)-M(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e===C?-1:t===C?1:r?-1:o?1:l?M(l,e)-M(l,t):0;if(r===o)return ce(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?ce(s[n],a[n]):s[n]===v?-1:a[n]===v?1:0}),C},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&S(e),t=t.replace(W,"='$1']"),p.matchesSelector&&w&&!x[t+" "]&&(!a||!a.test(t))&&(!m||!m.test(t)))try{var i=c.call(e,t);if(i||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<oe(t,C,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==C&&S(e),y(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==C&&S(e);var i=b.attrHandle[t.toLowerCase()],n=i&&L.call(b.attrHandle,t.toLowerCase())?i(e,t,!w):void 0;return void 0!==n?n:p.attributes||!w?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},oe.escape=function(e){return(e+"").replace(te,ie)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],n=0,r=0;if(u=!p.detectDuplicates,l=!p.sortStable&&e.slice(0),e.sort(A),u){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return l=null,e},o=oe.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(b=oe.selectors={cacheLength:50,createPseudo:ae,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&V.test(i)&&(t=f(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=h[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&h(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=oe.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(F," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,e,t,g,m){var y="nth"!==f.slice(0,3),v="last"!==f.slice(-4),_="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,s,a,l,u=y!==v?"nextSibling":"previousSibling",c=e.parentNode,d=_&&e.nodeName.toLowerCase(),h=!i&&!_,p=!1;if(c){if(y){for(;u;){for(s=e;s=s[u];)if(_?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;l=u="only"===f&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&h){for(p=(a=(n=(r=(o=(s=c)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[f]||[])[0]===E&&n[1])&&n[2],s=a&&c.childNodes[a];s=++a&&s&&s[u]||(p=a=0)||l.pop();)if(1===s.nodeType&&++p&&s===e){r[f]=[E,a,p];break}}else if(h&&(p=a=(n=(r=(o=(s=e)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[f]||[])[0]===E&&n[1]),!1===p)for(;(s=++a&&s&&s[u]||(p=a=0)||l.pop())&&((_?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++p||(h&&((r=(o=s[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[f]=[E,p]),s!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,o){var t,s=b.pseudos[e]||b.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return s[k]?s(o):1<s.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,t){for(var i,n=s(e,o),r=n.length;r--;)e[i=M(e,n[r])]=!(t[i]=n[r])}):function(e){return s(e,0,t)}):s}},pseudos:{not:ae(function(e){var n=[],r=[],a=d(e.replace(H,"$1"));return a[k]?ae(function(e,t,i,n){for(var r,o=a(e,null,n,[]),s=e.length;s--;)(r=o[s])&&(e[s]=!(t[s]=r))}):function(e,t,i){return n[0]=e,a(n,null,i,r),n[0]=null,!r.pop()}}),has:ae(function(t){return function(e){return 0<oe(t,e).length}}),contains:ae(function(t){return t=t.replace(Z,ee),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:ae(function(i){return G.test(i||"")||oe.error("unsupported lang: "+i),i=i.replace(Z,ee).toLowerCase(),function(e){var t;do{if(t=w?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[i<0?i+t:i]}),even:fe(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:fe(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:fe(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:fe(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function ye(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ve(a,e,t){var l=e.dir,u=e.next,c=u||l,d=t&&"parentNode"===c,h=n++;return e.first?function(e,t,i){for(;e=e[l];)if(1===e.nodeType||d)return a(e,t,i);return!1}:function(e,t,i){var n,r,o,s=[E,h];if(i){for(;e=e[l];)if((1===e.nodeType||d)&&a(e,t,i))return!0}else for(;e=e[l];)if(1===e.nodeType||d)if(r=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),u&&u===e.nodeName.toLowerCase())e=e[l]||e;else{if((n=r[c])&&n[0]===E&&n[1]===h)return s[2]=n[2];if((r[c]=s)[2]=a(e,t,i))return!0}return!1}}function _e(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function be(e,t,i,n,r){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(i&&!i(o,n,r)||(s.push(o),u&&t.push(a)));return s}function Te(p,f,g,m,y,e){return m&&!m[k]&&(m=Te(m)),y&&!y[k]&&(y=Te(y,e)),ae(function(e,t,i,n){var r,o,s,a=[],l=[],u=t.length,c=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)oe(e,t[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),d=!p||!e&&f?c:be(c,a,p,i,n),h=g?y||(e?p:u||m)?[]:t:d;if(g&&g(d,h,i,n),m)for(r=be(h,l),m(r,[],i,n),o=r.length;o--;)(s=r[o])&&(h[l[o]]=!(d[l[o]]=s));if(e){if(y||p){if(y){for(r=[],o=h.length;o--;)(s=h[o])&&r.push(d[o]=s);y(null,h=[],r,n)}for(o=h.length;o--;)(s=h[o])&&-1<(r=y?M(e,s):a[o])&&(e[r]=!(t[r]=s))}}else h=be(h===t?h.splice(u,h.length):h),y?y(null,t,h,n):O.apply(t,h)})}function Se(e){for(var r,t,i,n=e.length,o=b.relative[e[0].type],s=o||b.relative[" "],a=o?1:0,l=ve(function(e){return e===r},s,!0),u=ve(function(e){return-1<M(r,e)},s,!0),c=[function(e,t,i){var n=!o&&(i||t!==T)||((r=t).nodeType?l(e,t,i):u(e,t,i));return r=null,n}];a<n;a++)if(t=b.relative[e[a].type])c=[ve(_e(c),t)];else{if((t=b.filter[e[a].type].apply(null,e[a].matches))[k]){for(i=++a;i<n&&!b.relative[e[i].type];i++);return Te(1<a&&_e(c),1<a&&ye(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(H,"$1"),t,a<i&&Se(e.slice(a,i)),i<n&&Se(e=e.slice(i)),i<n&&ye(e))}c.push(t)}return _e(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,f=oe.tokenize=function(e,t){var i,n,r,o,s,a,l,u=_[e+" "];if(u)return t?0:u.slice(0);for(s=e,a=[],l=b.preFilter;s;){for(o in i&&!(n=q.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(r=[])),i=!1,(n=z.exec(s))&&(i=n.shift(),r.push({value:i,type:n[0].replace(H," ")}),s=s.slice(i.length)),b.filter)!(n=X[o].exec(s))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),s=s.slice(i.length));if(!i)break}return t?s.length:s?oe.error(e):_(e,a).slice(0)},d=oe.compile=function(e,t){var i,m,y,v,_,n,r=[],o=[],s=x[e+" "];if(!s){for(t||(t=f(e)),i=t.length;i--;)(s=Se(t[i]))[k]?r.push(s):o.push(s);(s=x(e,(m=o,y=r,v=0<y.length,_=0<m.length,n=function(e,t,i,n,r){var o,s,a,l=0,u="0",c=e&&[],d=[],h=T,p=e||_&&b.find.TAG("*",r),f=E+=null==h?1:Math.random()||.1,g=p.length;for(r&&(T=t===C||t||r);u!==g&&null!=(o=p[u]);u++){if(_&&o){for(s=0,t||o.ownerDocument===C||(S(o),i=!w);a=m[s++];)if(a(o,t||C,i)){n.push(o);break}r&&(E=f)}v&&((o=!a&&o)&&l--,e&&c.push(o))}if(l+=u,v&&u!==l){for(s=0;a=y[s++];)a(c,d,t,i);if(e){if(0<l)for(;u--;)c[u]||d[u]||(d[u]=P.call(n));d=be(d)}O.apply(n,d),r&&!e&&0<d.length&&1<l+y.length&&oe.uniqueSort(n)}return r&&(E=f,T=h),c},v?ae(n):n))).selector=e}return s},g=oe.select=function(e,t,i,n){var r,o,s,a,l,u="function"==typeof e&&e,c=!n&&f(e=u.selector||e);if(i=i||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===t.nodeType&&w&&b.relative[o[1].type]){if(!(t=(b.find.ID(s.matches[0].replace(Z,ee),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=X.needsContext.test(e)?0:o.length;r--&&(s=o[r],!b.relative[a=s.type]);)if((l=b.find[a])&&(n=l(s.matches[0].replace(Z,ee),J.test(o[0].type)&&ge(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&ye(o)))return O.apply(i,n),i;break}}return(u||d(e,c))(n,t,!w,i,!t||J.test(e)&&ge(t.parentNode)||t),i},p.sortStable=k.split("").sort(A).join("")===k,p.detectDuplicates=!!u,S(),p.sortDetached=le(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(R,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),oe}(C);k.find=p,k.expr=p.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=p.uniqueSort,k.text=p.getText,k.isXMLDoc=p.isXML,k.contains=p.contains,k.escapeSelector=p.escape;var f=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&k(e).is(i))break;n.push(e)}return n},S=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},E=k.expr.match.needsContext;function x(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(e,i,n){return v(i)?k.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?k.grep(e,function(e){return e===i!==n}):"string"!=typeof i?k.grep(e,function(e){return-1<r.call(i,e)!==n}):k.filter(i,e,n)}k.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?k.find.matchesSelector(n,e)?[n]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<n;t++)if(k.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)k.find(e,r[t],i);return 1<n?k.uniqueSort(i):i},filter:function(e){return this.pushStack(L(this,e||[],!1))},not:function(e){return this.pushStack(L(this,e||[],!0))},is:function(e){return!!L(this,"string"==typeof e&&E.test(e)?k(e):e||[],!1).length}});var P,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:I.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),A.test(n[1])&&k.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=w.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==i.ready?i.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,P=k(w);var O=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],s="string"!=typeof e&&k(e);if(!E.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&k.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(k(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return f(e,"parentNode")},parentsUntil:function(e,t,i){return f(e,"parentNode",i)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return f(e,"nextSibling")},prevAll:function(e){return f(e,"previousSibling")},nextUntil:function(e,t,i){return f(e,"nextSibling",i)},prevUntil:function(e,t,i){return f(e,"previousSibling",i)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return x(e,"iframe")?e.contentDocument:(x(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(n,r){k.fn[n]=function(e,t){var i=k.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=k.filter(t,i)),1<this.length&&(D[n]||k.uniqueSort(i),O.test(n)&&i.reverse()),this.pushStack(i)}});var R=/[^\x20\t\r\n\f]+/g;function N(e){return e}function j(e){throw e}function B(e,t,i,n){var r;try{e&&v(r=e.promise)?r.call(e).done(t).fail(i):e&&v(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}k.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},k.each(e.match(R)||[],function(e,t){i[t]=!0}),i):k.extend({},n);var r,t,o,s,a=[],l=[],u=-1,c=function(){for(s=s||n.once,o=r=!0;l.length;u=-1)for(t=l.shift();++u<a.length;)!1===a[u].apply(t[0],t[1])&&n.stopOnFalse&&(u=a.length,t=!1);n.memory||(t=!1),r=!1,s&&(a=t?[]:"")},d={add:function(){return a&&(t&&!r&&(u=a.length-1,l.push(t)),function i(e){k.each(e,function(e,t){v(t)?n.unique&&d.has(t)||a.push(t):t&&t.length&&"string"!==T(t)&&i(t)})}(arguments),t&&!r&&c()),this},remove:function(){return k.each(arguments,function(e,t){for(var i;-1<(i=k.inArray(t,a,i));)a.splice(i,1),i<=u&&u--}),this},has:function(e){return e?-1<k.inArray(e,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return s=l=[],a=t="",this},disabled:function(){return!a},lock:function(){return s=l=[],t||r||(a=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),r||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var r=arguments;return k.Deferred(function(n){k.each(o,function(e,t){var i=v(r[t[4]])&&r[t[4]];a[t[1]](function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var l=0;function u(r,o,s,a){return function(){var i=this,n=arguments,e=function(){var e,t;if(!(r<l)){if((e=s.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?a?t.call(e,u(l,o,N,a),u(l,o,j,a)):(l++,t.call(e,u(l,o,N,a),u(l,o,j,a),u(l,o,N,o.notifyWith))):(s!==N&&(i=void 0,n=[e]),(a||o.resolveWith)(i,n))}},t=a?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(s!==j&&(i=void 0,n=[e]),o.rejectWith(i,n))}};r?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(u(0,e,v(n)?n:N,e.notifyWith)),o[1][3].add(u(0,e,v(t)?t:N)),o[2][3].add(u(0,e,v(i)?i:j))}).promise()},promise:function(e){return null!=e?k.extend(e,s):s}},a={};return k.each(o,function(e,t){var i=t[2],n=t[5];s[t[1]]=i.add,n&&i.add(function(){r=n},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),i.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=i.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){var i=arguments.length,t=i,n=Array(t),r=a.call(arguments),o=k.Deferred(),s=function(t){return function(e){n[t]=this,r[t]=1<arguments.length?a.call(arguments):e,--i||o.resolveWith(n,r)}};if(i<=1&&(B(e,o.done(s(t)).resolve,o.reject,!i),"pending"===o.state()||v(r[t]&&r[t].then)))return o.then();for(;t--;)B(r[t],s(t),o.reject);return o.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&U.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function H(){w.removeEventListener("DOMContentLoaded",H),C.removeEventListener("load",H),k.ready()}k.fn.ready=function(e){return F.then(e).catch(function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||((k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(w,[k]))}}),k.ready.then=F.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?C.setTimeout(k.ready):(w.addEventListener("DOMContentLoaded",H),C.addEventListener("load",H));var q=function(e,t,i,n,r,o,s){var a=0,l=e.length,u=null==i;if("object"===T(i))for(a in r=!0,i)q(e,t,a,i[a],!0,o,s);else if(void 0!==n&&(r=!0,v(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(k(e),i)})),t))for(;a<l;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return r?e:u?t.call(e):l?t(e[0],i):o},z=/^-ms-/,W=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(z,"ms-").replace(W,V)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[G(t)]=i;else for(n in t)r[G(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(G):(t=G(t))in n?[t]:t.match(R)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||k.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var $=new Y,K=new Y,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:Q.test(r)?JSON.parse(r):r)}catch(e){}K.set(e,t,i)}else i=void 0;return i}k.extend({hasData:function(e){return K.hasData(e)||$.hasData(e)},data:function(e,t,i){return K.access(e,t,i)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,i){return $.access(e,t,i)},_removeData:function(e,t){$.remove(e,t)}}),k.fn.extend({data:function(i,e){var t,n,r,o=this[0],s=o&&o.attributes;if(void 0===i){if(this.length&&(r=K.get(o),1===o.nodeType&&!$.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&0===(n=s[t].name).indexOf("data-")&&(n=G(n.slice(5)),Z(o,n,r[n]));$.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof i?this.each(function(){K.set(this,i)}):q(this,function(e){var t;if(o&&void 0===e){if(void 0!==(t=K.get(o,i)))return t;if(void 0!==(t=Z(o,i)))return t}else this.each(function(){K.set(this,i,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),k.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=$.get(e,t),i&&(!n||Array.isArray(i)?n=$.access(e,t,k.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=k.queue(e,t),n=i.length,r=i.shift(),o=k._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,function(){k.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return $.get(e,i)||$.access(e,i,{empty:k.Callbacks("once memory").add(function(){$.remove(e,[t+"queue",i])})})}}),k.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===i?this:this.each(function(){var e=k.queue(this,t,i);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=k.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=$.get(o[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ne=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&k.contains(e.ownerDocument,e)&&"none"===k.css(e,"display")},re=function(e,t,i,n){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in r=i.apply(e,n||[]),t)e.style[o]=s[o];return r};function oe(e,t,i,n){var r,o,s=20,a=n?function(){return n.cur()}:function(){return k.css(e,t,"")},l=a(),u=i&&i[3]||(k.cssNumber[t]?"":"px"),c=(k.cssNumber[t]||"px"!==u&&+l)&&te.exec(k.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)k.style(e,t,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,k.style(e,t,c+u),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=u,n.start=c,n.end=r)),r}var se={};function ae(e,t){for(var i,n,r=[],o=0,s=e.length;o<s;o++)(n=e[o]).style&&(i=n.style.display,t?("none"===i&&(r[o]=$.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&ne(n)&&(r[o]=(d=u=l=void 0,u=(a=n).ownerDocument,c=a.nodeName,(d=se[c])||(l=u.body.appendChild(u.createElement(c)),d=k.css(l,"display"),l.parentNode.removeChild(l),"none"===d&&(d="block"),se[c]=d)))):"none"!==i&&(r[o]="none",$.set(n,"display",i)));var a,l,u,c,d;for(o=0;o<s;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}k.fn.extend({show:function(){return ae(this,!0)},hide:function(){return ae(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ne(this)?k(this).show():k(this).hide()})}});var le=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ce=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&x(e,t)?k.merge([e],i):i}function pe(e,t){for(var i=0,n=e.length;i<n;i++)$.set(e[i],"globalEval",!t||$.get(t[i],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var fe,ge,me=/<|&#?\w+;/;function ye(e,t,i,n,r){for(var o,s,a,l,u,c,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===T(o))k.merge(h,o.nodeType?[o]:o);else if(me.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(ue.exec(o)||["",""])[1].toLowerCase(),l=de[a]||de._default,s.innerHTML=l[1]+k.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;k.merge(h,s.childNodes),(s=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(n&&-1<k.inArray(o,n))r&&r.push(o);else if(u=k.contains(o.ownerDocument,o),s=he(d.appendChild(o),"script"),u&&pe(s),i)for(c=0;o=s[c++];)ce.test(o.type||"")&&i.push(o);return d}fe=w.createDocumentFragment().appendChild(w.createElement("div")),(ge=w.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),fe.appendChild(ge),y.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue;var ve=w.documentElement,_e=/^key/,be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Ce(){return!1}function we(){try{return w.activeElement}catch(e){}}function ke(e,t,i,n,r,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)ke(e,a,i,n,t[a],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Ce;else if(!r)return e;return 1===o&&(s=r,(r=function(e){return k().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=k.guid++)),e.each(function(){k.event.add(this,t,r,n,i)})}k.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,u,c,d,h,p,f,g,m=$.get(t);if(m)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&k.find.matchesSelector(ve,r),i.guid||(i.guid=k.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(R)||[""]).length;u--;)p=g=(a=Te.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=k.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=k.event.special[p]||{},c=k.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&k.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(p,s)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),k.event.global[p]=!0)},remove:function(e,t,i,n,r){var o,s,a,l,u,c,d,h,p,f,g,m=$.hasData(e)&&$.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(R)||[""]).length;u--;)if(p=g=(a=Te.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=k.event.special[p]||{},h=l[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)c=h[o],!r&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||k.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)k.event.remove(e,p+t[u],i,n,!0);k.isEmptyObject(l)&&$.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,s,a=k.event.fix(e),l=new Array(arguments.length),u=($.get(this,"events")||{})[a.type]||[],c=k.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=k.event.handlers.call(this,a,u),t=0;(r=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(n=((k.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,r,o,s,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},i=0;i<l;i++)void 0===s[r=(n=t[i]).selector+" "]&&(s[r]=n.needsContext?-1<k(r,this).index(u):k.find(r,this,null,[u]).length),s[r]&&o.push(n);o.length&&a.push({elem:u,handlers:o})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==we()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===we()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&x(this,"input"))return this.click(),!1},_default:function(e){return x(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){k.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||k.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),k.fn.extend({on:function(e,t,i,n){return ke(this,e,t,i,n)},one:function(e,t,i,n){return ke(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,k(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Ce),this.each(function(){k.event.remove(this,e,i,t)})}});var Ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,xe=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return x(e,"table")&&x(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function De(e,t){var i,n,r,o,s,a,l,u;if(1===t.nodeType){if($.hasData(e)&&(o=$.access(e),s=$.set(t,o),u=o.events))for(r in delete s.handle,s.events={},u)for(i=0,n=u[r].length;i<n;i++)k.event.add(t,r,u[r][i]);K.hasData(e)&&(a=K.access(e),l=k.extend({},a),K.set(t,l))}}function Me(i,n,r,o){n=g.apply([],n);var e,t,s,a,l,u,c=0,d=i.length,h=d-1,p=n[0],f=v(p);if(f||1<d&&"string"==typeof p&&!y.checkClone&&Ae.test(p))return i.each(function(e){var t=i.eq(e);f&&(n[0]=p.call(this,e,t.html())),Me(t,n,r,o)});if(d&&(t=(e=ye(n,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=k.map(he(e,"script"),Ie)).length;c<d;c++)l=e,c!==h&&(l=k.clone(l,!0,!0),a&&k.merge(s,he(l,"script"))),r.call(i[c],l,c);if(a)for(u=s[s.length-1].ownerDocument,k.map(s,Oe),c=0;c<a;c++)l=s[c],ce.test(l.type||"")&&!$.access(l,"globalEval")&&k.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?k._evalUrl&&k._evalUrl(l.src):b(l.textContent.replace(Le,""),u,l))}return i}function Re(e,t,i){for(var n,r=t?k.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||k.cleanData(he(n)),n.parentNode&&(i&&k.contains(n.ownerDocument,n)&&pe(he(n,"script")),n.parentNode.removeChild(n));return e}k.extend({htmlPrefilter:function(e){return e.replace(Ee,"<$1></$2>")},clone:function(e,t,i){var n,r,o,s,a,l,u,c=e.cloneNode(!0),d=k.contains(e.ownerDocument,e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(s=he(c),n=0,r=(o=he(e)).length;n<r;n++)a=o[n],l=s[n],void 0,"input"===(u=l.nodeName.toLowerCase())&&le.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(t)if(i)for(o=o||he(e),s=s||he(c),n=0,r=o.length;n<r;n++)De(o[n],s[n]);else De(e,c);return 0<(s=he(c,"script")).length&&pe(s,!d&&he(e,"script")),c},cleanData:function(e){for(var t,i,n,r=k.event.special,o=0;void 0!==(i=e[o]);o++)if(X(i)){if(t=i[$.expando]){if(t.events)for(n in t.events)r[n]?k.event.remove(i,n):k.removeEvent(i,n,t.handle);i[$.expando]=void 0}i[K.expando]&&(i[K.expando]=void 0)}}}),k.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return q(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Me(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return Me(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Me(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Me(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(he(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return q(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!xe.test(e)&&!de[(ue.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(k.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Me(this,arguments,function(e){var t=this.parentNode;k.inArray(this,i)<0&&(k.cleanData(he(this)),t&&t.replaceChild(e,this))},i)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){k.fn[e]=function(e){for(var t,i=[],n=k(e),r=n.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),k(n[o])[s](t),l.apply(i,t.get());return this.pushStack(i)}});var Ne=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(ie.join("|"),"i");function Ue(e,t,i){var n,r,o,s,a=e.style;return(i=i||je(e))&&(""!==(s=i.getPropertyValue(t)||i[t])||k.contains(e.ownerDocument,e)||(s=k.style(e,t)),!y.pixelBoxStyles()&&Ne.test(s)&&Be.test(t)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){a.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ve.appendChild(a).appendChild(l);var e=C.getComputedStyle(l);i="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),n=36===t(e.width),l.style.position="absolute",r=36===l.offsetWidth||"absolute",ve.removeChild(a),l=null}}function t(e){return Math.round(parseFloat(e))}var i,n,r,o,s,a=w.createElement("div"),l=w.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),r}}))}();var He=/^(none|table(?!-c[ea]).+)/,qe=/^--/,ze={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","Moz","ms"],Ge=w.createElement("div").style;function Xe(e){var t=k.cssProps[e];return t||(t=k.cssProps[e]=function(e){if(e in Ge)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Ve.length;i--;)if((e=Ve[i]+t)in Ge)return e}(e)||e),t}function Ye(e,t,i){var n=te.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function $e(e,t,i,n,r,o){var s="width"===t?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=k.css(e,i+ie[s],!0,r)),n?("content"===i&&(l-=k.css(e,"padding"+ie[s],!0,r)),"margin"!==i&&(l-=k.css(e,"border"+ie[s]+"Width",!0,r))):(l+=k.css(e,"padding"+ie[s],!0,r),"padding"!==i?l+=k.css(e,"border"+ie[s]+"Width",!0,r):a+=k.css(e,"border"+ie[s]+"Width",!0,r));return!n&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))),l}function Ke(e,t,i){var n=je(e),r=Ue(e,t,n),o="border-box"===k.css(e,"boxSizing",!1,n),s=o;if(Ne.test(r)){if(!i)return r;r="auto"}return s=s&&(y.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===k.css(e,"display",!1,n))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(r=parseFloat(r)||0)+$e(e,t,i||(o?"border":"content"),s,n,r)+"px"}function Qe(e,t,i,n,r){return new Qe.prototype.init(e,t,i,n,r)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ue(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=G(t),l=qe.test(t),u=e.style;if(l||(t=Xe(a)),s=k.cssHooks[t]||k.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:u[t];"string"==(o=typeof i)&&(r=te.exec(i))&&r[1]&&(i=oe(e,t,r),o="number"),null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(k.cssNumber[a]?"":"px")),y.clearCloneStyle||""!==i||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?u.setProperty(t,i):u[t]=i))}},css:function(e,t,i,n){var r,o,s,a=G(t);return qe.test(t)||(t=Xe(a)),(s=k.cssHooks[t]||k.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=Ue(e,t,n)),"normal"===r&&t in We&&(r=We[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),k.each(["height","width"],function(e,a){k.cssHooks[a]={get:function(e,t,i){if(t)return!He.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ke(e,a,i):re(e,ze,function(){return Ke(e,a,i)})},set:function(e,t,i){var n,r=je(e),o="border-box"===k.css(e,"boxSizing",!1,r),s=i&&$e(e,a,i,o,r);return o&&y.scrollboxSize()===r.position&&(s-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(r[a])-$e(e,a,"border",!1,r)-.5)),s&&(n=te.exec(t))&&"px"!==(n[3]||"px")&&(e.style[a]=t,t=k.css(e,a)),Ye(0,t,s)}}}),k.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-re(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(r,o){k.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+ie[t]+o]=n[t]||n[t-2]||n[0];return i}},"margin"!==r&&(k.cssHooks[r+o].set=Ye)}),k.fn.extend({css:function(e,t){return q(this,function(e,t,i){var n,r,o={},s=0;if(Array.isArray(t)){for(n=je(e),r=t.length;s<r;s++)o[t[s]]=k.css(e,t[s],!1,n);return o}return void 0!==i?k.style(e,t,i):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=Qe).prototype={constructor:Qe,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(k.cssNumber[i]?"":"px")},cur:function(){var e=Qe.propHooks[this.prop];return e&&e.get?e.get(this):Qe.propHooks._default.get(this)},run:function(e){var t,i=Qe.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Qe.propHooks._default.set(this),this}}).init.prototype=Qe.prototype,(Qe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[k.cssProps[e.prop]]&&!k.cssHooks[e.prop]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Qe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=Qe.prototype.init,k.fx.step={};var Je,Ze,et,tt,it=/^(?:toggle|show|hide)$/,nt=/queueHooks$/;function rt(){Ze&&(!1===w.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(rt):C.setTimeout(rt,k.fx.interval),k.fx.tick())}function ot(){return C.setTimeout(function(){Je=void 0}),Je=Date.now()}function st(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=ie[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function at(e,t,i){for(var n,r=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,t,e))return n}function lt(o,e,t){var i,s,n=0,r=lt.prefilters.length,a=k.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=Je||ot(),t=Math.max(0,u.startTime+u.duration-e),i=1-(t/u.duration||0),n=0,r=u.tweens.length;n<r;n++)u.tweens[n].run(i);return a.notifyWith(o,[u,i,t]),i<1&&r?t:(r||a.notifyWith(o,[u,1,0]),a.resolveWith(o,[u]),!1)},u=a.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:Je||ot(),duration:t.duration,tweens:[],createTween:function(e,t){var i=k.Tween(o,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var t=0,i=e?u.tweens.length:0;if(s)return this;for(s=!0;t<i;t++)u.tweens[t].run(1);return e?(a.notifyWith(o,[u,1,0]),a.resolveWith(o,[u,e])):a.rejectWith(o,[u,e]),this}}),c=u.props;for(function(e,t){var i,n,r,o,s;for(i in e)if(r=t[n=G(i)],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(s=k.cssHooks[n])&&"expand"in s)for(i in o=s.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}(c,u.opts.specialEasing);n<r;n++)if(i=lt.prefilters[n].call(u,o,c,u.opts))return v(i.stop)&&(k._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return k.map(c,at,u),v(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),k.fx.timer(k.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u}k.Animation=k.extend(lt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return oe(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(R);for(var i,n=0,r=e.length;n<r;n++)i=e[n],lt.tweeners[i]=lt.tweeners[i]||[],lt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,o,s,a,l,u,c,d="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&ne(e),m=$.get(e,"fxshow");for(n in i.queue||(null==(s=k._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,k.queue(e,"fx").length||s.empty.fire()})})),t)if(r=t[n],it.test(r)){if(delete t[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||k.style(e,n)}if((l=!k.isEmptyObject(t))||!k.isEmptyObject(p))for(n in d&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=m&&m.display)&&(u=$.get(e,"display")),"none"===(c=k.css(e,"display"))&&(u?c=u:(ae([e],!0),u=e.style.display||u,c=k.css(e,"display"),ae([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===k.css(e,"float")&&(l||(h.done(function(){f.display=u}),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=$.access(e,"fxshow",{display:u}),o&&(m.hidden=!g),g&&ae([e],!0),h.done(function(){for(n in g||ae([e]),$.remove(e,"fxshow"),p)k.style(e,n,p[n])})),l=at(g?m[n]:0,n,h),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),k.speed=function(e,t,i){var n=e&&"object"==typeof e?k.extend({},e):{complete:i||!i&&t||v(e)&&e,duration:e,easing:i&&t||t&&!v(t)&&t};return k.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in k.fx.speeds?n.duration=k.fx.speeds[n.duration]:n.duration=k.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&k.dequeue(this,n.queue)},n},k.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ne).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=k.isEmptyObject(t),o=k.speed(e,i,n),s=function(){var e=lt(this,k.extend({},t),o);(r||$.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(r,e,o){var s=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=k.timers,n=$.get(this);if(t)n[t]&&n[t].stop&&s(n[t]);else for(t in n)n[t]&&n[t].stop&&nt.test(t)&&s(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||k.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=$.get(this),i=t[s+"queue"],n=t[s+"queueHooks"],r=k.timers,o=i?i.length:0;for(t.finish=!0,k.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===s&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,n){var r=k.fn[n];k.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(st(n,!0),e,t,i)}}),k.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){k.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),k.timers=[],k.fx.tick=function(){var e,t=0,i=k.timers;for(Je=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||k.fx.stop(),Je=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){Ze||(Ze=!0,rt())},k.fx.stop=function(){Ze=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(n,e){return n=k.fx&&k.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=C.setTimeout(e,n);t.stop=function(){C.clearTimeout(i)}})},et=w.createElement("input"),tt=w.createElement("select").appendChild(w.createElement("option")),et.type="checkbox",y.checkOn=""!==et.value,y.optSelected=tt.selected,(et=w.createElement("input")).value="t",et.type="radio",y.radioValue="t"===et.value;var ut,ct=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return q(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?k.prop(e,t,i):(1===o&&k.isXMLDoc(e)||(r=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ut:void 0)),void 0!==i?null===i?void k.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=k.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&x(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(R);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),ut={set:function(e,t,i){return!1===t?k.removeAttr(e,i):e.setAttribute(i,i),i}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var s=ct[t]||k.find.attr;ct[t]=function(e,t,i){var n,r,o=t.toLowerCase();return i||(r=ct[o],ct[o]=n,n=null!=s(e,t,i)?o:null,ct[o]=r),n}});var dt=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;function pt(e){return(e.match(R)||[]).join(" ")}function ft(e){return e.getAttribute&&e.getAttribute("class")||""}function gt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return q(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,r=k.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,i,n,r,o,s,a,l=0;if(v(t))return this.each(function(e){k(this).addClass(t.call(this,e,ft(this)))});if((e=gt(t)).length)for(;i=this[l++];)if(r=ft(i),n=1===i.nodeType&&" "+pt(r)+" "){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(a=pt(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,s,a,l=0;if(v(t))return this.each(function(e){k(this).removeClass(t.call(this,e,ft(this)))});if(!arguments.length)return this.attr("class","");if((e=gt(t)).length)for(;i=this[l++];)if(r=ft(i),n=1===i.nodeType&&" "+pt(r)+" "){for(s=0;o=e[s++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(a=pt(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,t){var o=typeof r,s="string"===o||Array.isArray(r);return"boolean"==typeof t&&s?t?this.addClass(r):this.removeClass(r):v(r)?this.each(function(e){k(this).toggleClass(r.call(this,e,ft(this),t),t)}):this.each(function(){var e,t,i,n;if(s)for(t=0,i=k(this),n=gt(r);e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!==o||((e=ft(this))&&$.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":$.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+pt(ft(i))+" ").indexOf(t))return!0;return!1}});var mt=/\r/g;k.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=v(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,k(this).val()):i)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(n=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):t?(n=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(mt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:pt(k.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:r.length;for(n=o<0?l:s?o:0;n<l;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!x(i.parentNode,"optgroup"))){if(t=k(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,o=k.makeArray(t),s=r.length;s--;)((n=r[s]).selected=-1<k.inArray(k.valHooks.option.get(n),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var yt=/^(?:focusinfocus|focusoutblur)$/,vt=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,i,n){var r,o,s,a,l,u,c,d,h=[i||w],p=m.call(e,"type")?e.type:e,f=m.call(e,"namespace")?e.namespace.split("."):[];if(o=d=s=i=i||w,3!==i.nodeType&&8!==i.nodeType&&!yt.test(p+k.event.triggered)&&(-1<p.indexOf(".")&&(p=(f=p.split(".")).shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,(e=e[k.expando]?e:new k.Event(p,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[p]||{},n||!c.trigger||!1!==c.trigger.apply(i,t))){if(!n&&!c.noBubble&&!_(i)){for(a=c.delegateType||p,yt.test(a+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),s=o;s===(i.ownerDocument||w)&&h.push(s.defaultView||s.parentWindow||C)}for(r=0;(o=h[r++])&&!e.isPropagationStopped();)d=o,e.type=1<r?a:c.bindType||p,(u=($.get(o,"events")||{})[e.type]&&$.get(o,"handle"))&&u.apply(o,t),(u=l&&o[l])&&u.apply&&X(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=p,n||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(h.pop(),t)||!X(i)||l&&v(i[p])&&!_(i)&&((s=i[l])&&(i[l]=null),k.event.triggered=p,e.isPropagationStopped()&&d.addEventListener(p,vt),i[p](),e.isPropagationStopped()&&d.removeEventListener(p,vt),k.event.triggered=void 0,s&&(i[l]=s)),e.result}},simulate:function(e,t,i){var n=k.extend(new k.Event,i,{type:e,isSimulated:!0});k.event.trigger(n,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return k.event.trigger(e,t,i,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(e){k.event.simulate(n,e.target,k.event.fix(e))};k.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=$.access(e,n);t||e.addEventListener(i,r,!0),$.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=$.access(e,n)-1;t?$.access(e,n,t):(e.removeEventListener(i,r,!0),$.remove(e,n))}}});var _t=C.location,bt=Date.now(),Tt=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var St=/\[\]$/,Ct=/\r?\n/g,wt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Et(i,e,n,r){var t;if(Array.isArray(e))k.each(e,function(e,t){n||St.test(i)?r(i,t):Et(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==T(e))r(i,e);else for(t in e)Et(i+"["+t+"]",e[t],n,r)}k.param=function(e,t){var i,n=[],r=function(e,t){var i=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){r(this.name,this.value)});else for(i in e)Et(i,e[i],t,r);return n.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&kt.test(this.nodeName)&&!wt.test(e)&&(this.checked||!le.test(e))}).map(function(e,t){var i=k(this).val();return null==i?null:Array.isArray(i)?k.map(i,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:i.replace(Ct,"\r\n")}}).get()}});var xt=/%20/g,At=/#.*$/,Lt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,Ot=/^\/\//,Dt={},Mt={},Rt="*/".concat("*"),Nt=w.createElement("a");function jt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(R)||[];if(v(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function Bt(t,r,o,s){var a={},l=t===Mt;function u(e){var n;return a[e]=!0,k.each(t[e]||[],function(e,t){var i=t(r,o,s);return"string"!=typeof i||l||a[i]?l?!(n=i):void 0:(r.dataTypes.unshift(i),u(i),!1)}),n}return u(r.dataTypes[0])||!a["*"]&&u("*")}function Ut(e,t){var i,n,r=k.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&k.extend(!0,e,n),e}Nt.href=_t.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,k.ajaxSettings),t):Ut(k.ajaxSettings,e)},ajaxPrefilter:jt(Dt),ajaxTransport:jt(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,d,h,i,p,n,f,g,r,o,m=k.ajaxSetup({},t),y=m.context||m,v=m.context&&(y.nodeType||y.jquery)?k(y):k.event,_=k.Deferred(),b=k.Callbacks("once memory"),T=m.statusCode||{},s={},a={},l="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(f){if(!i)for(i={};t=Pt.exec(h);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return f?h:null},setRequestHeader:function(e,t){return null==f&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==f&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(f)S.always(e[S.status]);else for(t in e)T[t]=[T[t],e[t]];return this},abort:function(e){var t=e||l;return c&&c.abort(t),u(0,t),this}};if(_.promise(S),m.url=((e||m.url||_t.href)+"").replace(Ot,_t.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(R)||[""],null==m.crossDomain){n=w.createElement("a");try{n.href=m.url,n.href=n.href,m.crossDomain=Nt.protocol+"//"+Nt.host!=n.protocol+"//"+n.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=k.param(m.data,m.traditional)),Bt(Dt,m,t,S),f)return S;for(r in(g=k.event&&m.global)&&0==k.active++&&k.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!It.test(m.type),d=m.url.replace(At,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(xt,"+")):(o=m.url.slice(d.length),m.data&&(m.processData||"string"==typeof m.data)&&(d+=(Tt.test(d)?"&":"?")+m.data,delete m.data),!1===m.cache&&(d=d.replace(Lt,"$1"),o=(Tt.test(d)?"&":"?")+"_="+bt+++o),m.url=d+o),m.ifModified&&(k.lastModified[d]&&S.setRequestHeader("If-Modified-Since",k.lastModified[d]),k.etag[d]&&S.setRequestHeader("If-None-Match",k.etag[d])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&S.setRequestHeader("Content-Type",m.contentType),S.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Rt+"; q=0.01":""):m.accepts["*"]),m.headers)S.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(y,S,m)||f))return S.abort();if(l="abort",b.add(m.complete),S.done(m.success),S.fail(m.error),c=Bt(Mt,m,t,S)){if(S.readyState=1,g&&v.trigger("ajaxSend",[S,m]),f)return S;m.async&&0<m.timeout&&(p=C.setTimeout(function(){S.abort("timeout")},m.timeout));try{f=!1,c.send(s,u)}catch(e){if(f)throw e;u(-1,e)}}else u(-1,"No Transport");function u(e,t,i,n){var r,o,s,a,l,u=t;f||(f=!0,p&&C.clearTimeout(p),c=void 0,h=n||"",S.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(a=function(e,t,i){for(var n,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}(m,S,i)),a=function(e,t,i,n){var r,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(r in u)if((a=r.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[r]:!0!==u[r]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(m,a,S,r),r?(m.ifModified&&((l=S.getResponseHeader("Last-Modified"))&&(k.lastModified[d]=l),(l=S.getResponseHeader("etag"))&&(k.etag[d]=l)),204===e||"HEAD"===m.type?u="nocontent":304===e?u="notmodified":(u=a.state,o=a.data,r=!(s=a.error))):(s=u,!e&&u||(u="error",e<0&&(e=0))),S.status=e,S.statusText=(t||u)+"",r?_.resolveWith(y,[o,u,S]):_.rejectWith(y,[S,u,s]),S.statusCode(T),T=void 0,g&&v.trigger(r?"ajaxSuccess":"ajaxError",[S,m,r?o:s]),b.fireWith(y,[S,u]),g&&(v.trigger("ajaxComplete",[S,m]),--k.active||k.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,i){return k.get(e,t,i,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,r){k[r]=function(e,t,i,n){return v(t)&&(n=n||i,i=t,t=void 0),k.ajax(k.extend({url:e,type:r,dataType:n,data:t,success:i},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return v(i)?this.each(function(e){k(this).wrapInner(i.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=v(t);return this.each(function(e){k(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ft={0:200,1223:204},Ht=k.ajaxSettings.xhr();y.cors=!!Ht&&"withCredentials"in Ht,y.ajax=Ht=!!Ht,k.ajaxTransport(function(r){var o,s;if(y.cors||Ht&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=s=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Ft[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),s=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=s:n.onreadystatechange=function(){4===n.readyState&&C.setTimeout(function(){o&&s()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(e,t){n=k("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),w.head.appendChild(n[0])},abort:function(){r&&r()}}});var qt,zt=[],Wt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||k.expando+"_"+bt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,s=!1!==e.jsonp&&(Wt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Wt,"$1"+n):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||k.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=C[n],C[n]=function(){o=arguments},i.always(function(){void 0===r?k(C).removeProp(n):C[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,zt.push(n)),o&&v(r)&&r(o[0]),o=r=void 0}),"script"}),y.createHTMLDocument=((qt=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),k.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(y.createHTMLDocument?((n=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(n)):t=w),o=!i&&[],(r=A.exec(e))?[t.createElement(r[1])]:(r=ye([e],t,o),o&&o.length&&k(o).remove(),k.merge([],r.childNodes)));var n,r,o},k.fn.load=function(e,t,i){var n,r,o,s=this,a=e.indexOf(" ");return-1<a&&(n=pt(e.slice(a)),e=e.slice(0,a)),v(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<s.length&&k.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?k("<div>").append(k.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,i){var n,r,o,s,a,l,u=k.css(e,"position"),c=k(e),d={};"static"===u&&(e.style.position="relative"),a=c.offset(),o=k.css(e,"top"),l=k.css(e,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(s=(n=c.position()).top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),v(t)&&(t=t.call(e,i,k.extend({},a))),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):c.css(d)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===k.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),r.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-k.css(n,"marginTop",!0),left:t.left-r.left-k.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||ve})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;k.fn[t]=function(e){return q(this,function(e,t,i){var n;if(_(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===i)return n?n[r]:e[t];n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):e[t]=i},t,e,arguments.length)}}),k.each(["top","left"],function(e,i){k.cssHooks[i]=Fe(y.pixelPosition,function(e,t){if(t)return t=Ue(e,i),Ne.test(t)?k(e).position()[i]+"px":t})}),k.each({Height:"height",Width:"width"},function(s,a){k.each({padding:"inner"+s,content:a,"":"outer"+s},function(n,o){k.fn[o]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return q(this,function(e,t,i){var n;return _(e)?0===o.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+s],n["scroll"+s],e.body["offset"+s],n["offset"+s],n["client"+s])):void 0===i?k.css(e,t,r):k.style(e,t,i,r)},a,i?e:void 0,i)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){k.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),k.proxy=function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),v(e))return n=a.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(a.call(arguments)))}).guid=e.guid=e.guid||k.guid++,r},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=x,k.isFunction=v,k.isWindow=_,k.camelCase=G,k.type=T,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Vt=C.jQuery,Gt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Gt),e&&C.jQuery===k&&(C.jQuery=Vt),k},e||(C.jQuery=C.$=k),k}),function(V){var G={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0},onAutoChange:function(){return!0}};V.fn.bxSlider=function(t){if(0===this.length)return this;if(1<this.length)return this.each(function(){V(this).bxSlider(t)}),this;var d={},h=this,n=V(window).width(),r=V(window).height();if(!V(h).data("bxSlider")){var o=function(){V(h).data("bxSlider")||(d.settings=V.extend({},G,t),d.settings.slideWidth=parseInt(d.settings.slideWidth),d.children=h.children(d.settings.slideSelector),d.children.length<d.settings.minSlides&&(d.settings.minSlides=d.children.length),d.children.length<d.settings.maxSlides&&(d.settings.maxSlides=d.children.length),d.settings.randomStart&&(d.settings.startSlide=Math.floor(Math.random()*d.children.length)),d.active={index:d.settings.startSlide},d.carousel=1<d.settings.minSlides||1<d.settings.maxSlides,d.carousel&&(d.settings.preloadImages="all"),d.minThreshold=d.settings.minSlides*d.settings.slideWidth+(d.settings.minSlides-1)*d.settings.slideMargin,d.maxThreshold=d.settings.maxSlides*d.settings.slideWidth+(d.settings.maxSlides-1)*d.settings.slideMargin,d.working=!1,d.controls={},d.interval=null,d.animProp="vertical"===d.settings.mode?"top":"left",d.usingCSS=d.settings.useCSS&&"fade"!==d.settings.mode&&function(){for(var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<t.length;i++)if(void 0!==e.style[t[i]])return d.cssPrefix=t[i].replace("Perspective","").toLowerCase(),d.animProp="-"+d.cssPrefix+"-transform",!0;return!1}(),"vertical"===d.settings.mode&&(d.settings.maxSlides=d.settings.minSlides),h.data("origStyle",h.attr("style")),h.children(d.settings.slideSelector).each(function(){V(this).data("origStyle",V(this).attr("style"))}),e())},e=function(){var e=d.children.eq(d.settings.startSlide);h.wrap('<div class="'+d.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),d.viewport=h.parent(),d.settings.ariaLive&&!d.settings.ticker&&d.viewport.attr("aria-live","polite"),d.loader=V('<div class="bx-loading" />'),d.viewport.prepend(d.loader),h.css({width:"horizontal"===d.settings.mode?1e3*d.children.length+215+"%":"auto",position:"relative"}),d.usingCSS&&d.settings.easing?h.css("-"+d.cssPrefix+"-transition-timing-function",d.settings.easing):d.settings.easing||(d.settings.easing="swing"),d.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),d.viewport.parent().css({maxWidth:l()}),d.children.css({float:"horizontal"===d.settings.mode?"left":"none",listStyle:"none",position:"relative"}),d.children.css("width",u()),"horizontal"===d.settings.mode&&0<d.settings.slideMargin&&d.children.css("marginRight",d.settings.slideMargin),"vertical"===d.settings.mode&&0<d.settings.slideMargin&&d.children.css("marginBottom",d.settings.slideMargin),"fade"===d.settings.mode&&(d.children.css({position:"absolute",zIndex:0,display:"none"}),d.children.eq(d.settings.startSlide).css({zIndex:d.settings.slideZIndex,display:"block"})),d.controls.el=V('<div class="bx-controls" />'),d.settings.captions&&S(),d.active.last=d.settings.startSlide===f()-1,d.settings.video&&h.fitVids(),"none"===d.settings.preloadImages?e=null:("all"===d.settings.preloadImages||d.settings.ticker)&&(e=d.children),d.settings.ticker?d.settings.pager=!1:(d.settings.controls&&b(),d.settings.auto&&d.settings.autoControls&&T(),d.settings.pager&&_(),(d.settings.controls||d.settings.autoControls||d.settings.pager)&&d.viewport.after(d.controls.el)),null===e?a():s(e,a)},s=function(e,t){var i=e.find('img:not([src=""]), iframe').length,n=0;0!==i?e.find('img:not([src=""]), iframe').each(function(){V(this).one("load error",function(){++n===i&&t()}).each(function(){(this.complete||""==this.src)&&V(this).trigger("load")})}):t()},a=function(){if(d.settings.infiniteLoop&&"fade"!==d.settings.mode&&!d.settings.ticker){var e="vertical"===d.settings.mode?d.settings.minSlides:d.settings.maxSlides,t=d.children.slice(0,e).clone(!0).addClass("bx-clone"),i=d.children.slice(-e).clone(!0).addClass("bx-clone");d.settings.ariaHidden&&(t.attr("aria-hidden",!0),i.attr("aria-hidden",!0)),h.append(t).prepend(i)}d.loader.remove(),m(),"vertical"===d.settings.mode&&(d.settings.adaptiveHeight=!0),d.viewport.height(p()),h.redrawSlider(),d.settings.onSliderLoad.call(h,d.active.index),d.initialized=!0,d.settings.responsive&&V(window).on("resize",z),d.settings.auto&&d.settings.autoStart&&(1<f()||d.settings.autoSlideForOnePage)&&M(),d.settings.ticker&&R(),d.settings.pager&&A(d.settings.startSlide),d.settings.controls&&I(),d.settings.touchEnabled&&!d.settings.ticker&&B(),d.settings.keyboardEnabled&&!d.settings.ticker&&V(document).keydown(j)},p=function(){var t=0,e=V();if("vertical"===d.settings.mode||d.settings.adaptiveHeight)if(d.carousel){var n=1===d.settings.moveSlides?d.active.index:d.active.index*g();for(e=d.children.eq(n),i=1;i<=d.settings.maxSlides-1;i++)e=n+i>=d.children.length?e.add(d.children.eq(i-1)):e.add(d.children.eq(n+i))}else e=d.children.eq(d.active.index);else e=d.children;return"vertical"===d.settings.mode?(e.each(function(e){t+=V(this).outerHeight()}),0<d.settings.slideMargin&&(t+=d.settings.slideMargin*(d.settings.minSlides-1))):t=Math.max.apply(Math,e.map(function(){return V(this).outerHeight(!1)}).get()),"border-box"===d.viewport.css("box-sizing")?t+=parseFloat(d.viewport.css("padding-top"))+parseFloat(d.viewport.css("padding-bottom"))+parseFloat(d.viewport.css("border-top-width"))+parseFloat(d.viewport.css("border-bottom-width")):"padding-box"===d.viewport.css("box-sizing")&&(t+=parseFloat(d.viewport.css("padding-top"))+parseFloat(d.viewport.css("padding-bottom"))),t},l=function(){var e="100%";return 0<d.settings.slideWidth&&(e="horizontal"===d.settings.mode?d.settings.maxSlides*d.settings.slideWidth+(d.settings.maxSlides-1)*d.settings.slideMargin:d.settings.slideWidth),e},u=function(){var e=d.settings.slideWidth,t=d.viewport.width();if(0===d.settings.slideWidth||d.settings.slideWidth>t&&!d.carousel||"vertical"===d.settings.mode)e=t;else if(1<d.settings.maxSlides&&"horizontal"===d.settings.mode){if(t>d.maxThreshold)return e;t<d.minThreshold?e=(t-d.settings.slideMargin*(d.settings.minSlides-1))/d.settings.minSlides:d.settings.shrinkItems&&(e=Math.floor((t+d.settings.slideMargin)/Math.ceil((t+d.settings.slideMargin)/(e+d.settings.slideMargin))-d.settings.slideMargin))}return e},c=function(){var e=1,t=null;return"horizontal"===d.settings.mode&&0<d.settings.slideWidth?d.viewport.width()<d.minThreshold?e=d.settings.minSlides:d.viewport.width()>d.maxThreshold?e=d.settings.maxSlides:(t=d.children.first().width()+d.settings.slideMargin,e=Math.floor((d.viewport.width()+d.settings.slideMargin)/t)||1):"vertical"===d.settings.mode&&(e=d.settings.minSlides),e},f=function(){var e=0,t=0,i=0;if(0<d.settings.moveSlides){if(!d.settings.infiniteLoop){for(;t<d.children.length;)++e,t=i+c(),i+=d.settings.moveSlides<=c()?d.settings.moveSlides:c();return i}e=Math.ceil(d.children.length/g())}else e=Math.ceil(d.children.length/c());return e},g=function(){return 0<d.settings.moveSlides&&d.settings.moveSlides<=c()?d.settings.moveSlides:c()},m=function(){var e,t,i;d.children.length>d.settings.maxSlides&&d.active.last&&!d.settings.infiniteLoop?"horizontal"===d.settings.mode?(e=(t=d.children.last()).position(),y(-(e.left-(d.viewport.width()-t.outerWidth())),"reset",0)):"vertical"===d.settings.mode&&(i=d.children.length-d.settings.minSlides,e=d.children.eq(i).position(),y(-e.top,"reset",0)):(e=d.children.eq(d.active.index*g()).position(),d.active.index===f()-1&&(d.active.last=!0),void 0!==e&&("horizontal"===d.settings.mode?y(-e.left,"reset",0):"vertical"===d.settings.mode&&y(-e.top,"reset",0)))},y=function(e,t,i,n){var r,o;d.usingCSS?(o="vertical"===d.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)",h.css("-"+d.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"===t?(h.css(d.animProp,o),0!==i?h.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){V(e.target).is(h)&&(h.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),L())}):L()):"reset"===t?h.css(d.animProp,o):"ticker"===t&&(h.css("-"+d.cssPrefix+"-transition-timing-function","linear"),h.css(d.animProp,o),0!==i?h.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){V(e.target).is(h)&&(h.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),y(n.resetValue,"reset",0),N())}):(y(n.resetValue,"reset",0),N()))):((r={})[d.animProp]=e,"slide"===t?h.animate(r,i,d.settings.easing,function(){L()}):"reset"===t?h.css(d.animProp,e):"ticker"===t&&h.animate(r,i,"linear",function(){y(n.resetValue,"reset",0),N()}))},v=function(){for(var e="",t="",i=f(),n=0;n<i;n++)t="",d.settings.buildPager&&V.isFunction(d.settings.buildPager)||d.settings.pagerCustom?(t=d.settings.buildPager(n),d.pagerEl.addClass("bx-custom-pager")):(t=n+1,d.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+t+"</a></div>";d.pagerEl.html(e)},_=function(){d.settings.pagerCustom?d.pagerEl=V(d.settings.pagerCustom):(d.pagerEl=V('<div class="bx-pager" />'),d.settings.pagerSelector?V(d.settings.pagerSelector).html(d.pagerEl):d.controls.el.addClass("bx-has-pager").append(d.pagerEl),v()),d.pagerEl.on("click touchend","a",x)},b=function(){d.controls.next=V('<a class="bx-next" href="">'+d.settings.nextText+"</a>"),d.controls.prev=V('<a class="bx-prev" href="">'+d.settings.prevText+"</a>"),d.controls.next.on("click touchend",C),d.controls.prev.on("click touchend",w),d.settings.nextSelector&&V(d.settings.nextSelector).append(d.controls.next),d.settings.prevSelector&&V(d.settings.prevSelector).append(d.controls.prev),d.settings.nextSelector||d.settings.prevSelector||(d.controls.directionEl=V('<div class="bx-controls-direction" />'),d.controls.directionEl.append(d.controls.prev).append(d.controls.next),d.controls.el.addClass("bx-has-controls-direction").append(d.controls.directionEl))},T=function(){d.controls.start=V('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+d.settings.startText+"</a></div>"),d.controls.stop=V('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+d.settings.stopText+"</a></div>"),d.controls.autoEl=V('<div class="bx-controls-auto" />'),d.controls.autoEl.on("click",".bx-start",k),d.controls.autoEl.on("click",".bx-stop",E),d.settings.autoControlsCombine?d.controls.autoEl.append(d.controls.start):d.controls.autoEl.append(d.controls.start).append(d.controls.stop),d.settings.autoControlsSelector?V(d.settings.autoControlsSelector).html(d.controls.autoEl):d.controls.el.addClass("bx-has-controls-auto").append(d.controls.autoEl),P(d.settings.autoStart?"stop":"start")},S=function(){d.children.each(function(e){var t=V(this).find("img:first").attr("title");void 0!==t&&(""+t).length&&V(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},C=function(e){e.preventDefault(),d.controls.el.hasClass("disabled")||(d.settings.auto&&d.settings.stopAutoOnClick&&h.stopAuto(),h.goToNextSlide())},w=function(e){e.preventDefault(),d.controls.el.hasClass("disabled")||(d.settings.auto&&d.settings.stopAutoOnClick&&h.stopAuto(),h.goToPrevSlide())},k=function(e){h.startAuto(),e.preventDefault()},E=function(e){h.stopAuto(),e.preventDefault()},x=function(e){var t,i;e.preventDefault(),d.controls.el.hasClass("disabled")||(d.settings.auto&&d.settings.stopAutoOnClick&&h.stopAuto(),void 0!==(t=V(e.currentTarget)).attr("data-slide-index")&&(i=parseInt(t.attr("data-slide-index")))!==d.active.index&&h.goToSlide(i))},A=function(i){var e=d.children.length;if("short"===d.settings.pagerType)return 1<d.settings.maxSlides&&(e=Math.ceil(d.children.length/d.settings.maxSlides)),void d.pagerEl.html(i+1+d.settings.pagerShortSeparator+e);d.pagerEl.find("a").removeClass("active"),d.pagerEl.each(function(e,t){V(t).find("a").eq(i).addClass("active")})},L=function(){if(d.settings.infiniteLoop){var e="";0===d.active.index?e=d.children.eq(0).position():d.active.index===f()-1&&d.carousel?e=d.children.eq((f()-1)*g()).position():d.active.index===d.children.length-1&&(e=d.children.eq(d.children.length-1).position()),e&&("horizontal"===d.settings.mode?y(-e.left,"reset",0):"vertical"===d.settings.mode&&y(-e.top,"reset",0))}d.working=!1,d.settings.onSlideAfter.call(h,d.children.eq(d.active.index),d.oldIndex,d.active.index)},P=function(e){d.settings.autoControlsCombine?d.controls.autoEl.html(d.controls[e]):(d.controls.autoEl.find("a").removeClass("active"),d.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},I=function(){1===f()?(d.controls.prev.addClass("disabled"),d.controls.next.addClass("disabled")):!d.settings.infiniteLoop&&d.settings.hideControlOnEnd&&(0===d.active.index?(d.controls.prev.addClass("disabled"),d.controls.next.removeClass("disabled")):d.active.index===f()-1?(d.controls.next.addClass("disabled"),d.controls.prev.removeClass("disabled")):(d.controls.prev.removeClass("disabled"),d.controls.next.removeClass("disabled")))},O=function(){h.startAuto()},D=function(){h.stopAuto()},M=function(){0<d.settings.autoDelay?setTimeout(h.startAuto,d.settings.autoDelay):(h.startAuto(),V(window).focus(O).blur(D)),d.settings.autoHover&&h.hover(function(){d.interval&&(h.stopAuto(!0),d.autoPaused=!0)},function(){d.autoPaused&&(h.startAuto(!0),d.autoPaused=null)})},R=function(){var e,t,i,n,r,o,s,a,l=0;"next"===d.settings.autoDirection?h.append(d.children.clone().addClass("bx-clone")):(h.prepend(d.children.clone().addClass("bx-clone")),e=d.children.first().position(),l="horizontal"===d.settings.mode?-e.left:-e.top),y(l,"reset",0),d.settings.pager=!1,d.settings.controls=!1,d.settings.autoControls=!1,d.settings.tickerHover&&(d.usingCSS?(n="horizontal"===d.settings.mode?4:5,d.viewport.hover(function(){t=h.css("-"+d.cssPrefix+"-transform"),i=parseFloat(t.split(",")[n]),y(i,"reset",0)},function(){a=0,d.children.each(function(e){a+="horizontal"===d.settings.mode?V(this).outerWidth(!0):V(this).outerHeight(!0)}),r=d.settings.speed/a,o="horizontal"===d.settings.mode?"left":"top",s=r*(a-Math.abs(parseInt(i))),N(s)})):d.viewport.hover(function(){h.stop()},function(){a=0,d.children.each(function(e){a+="horizontal"===d.settings.mode?V(this).outerWidth(!0):V(this).outerHeight(!0)}),r=d.settings.speed/a,o="horizontal"===d.settings.mode?"left":"top",s=r*(a-Math.abs(parseInt(h.css(o)))),N(s)})),N()},N=function(e){var t,i,n=e||d.settings.speed,r={left:0,top:0},o={left:0,top:0};"next"===d.settings.autoDirection?r=h.find(".bx-clone").first().position():o=d.children.first().position(),t="horizontal"===d.settings.mode?-r.left:-r.top,i="horizontal"===d.settings.mode?-o.left:-o.top,y(t,"ticker",n,{resetValue:i})},j=function(e){var t,i,n,r,o=document.activeElement.tagName.toLowerCase();if(null==new RegExp(o,["i"]).exec("input|textarea")&&(t=h,i=V(window),n={top:i.scrollTop(),left:i.scrollLeft()},r=t.offset(),n.right=n.left+i.width(),n.bottom=n.top+i.height(),r.right=r.left+t.outerWidth(),r.bottom=r.top+t.outerHeight(),!(n.right<r.left||n.left>r.right||n.bottom<r.top||n.top>r.bottom))){if(39===e.keyCode)return C(e),!1;if(37===e.keyCode)return w(e),!1}},B=function(){d.touch={start:{x:0,y:0},end:{x:0,y:0}},d.viewport.on("touchstart MSPointerDown pointerdown",U),d.viewport.on("click",".bxslider a",function(e){d.viewport.hasClass("click-disabled")&&(e.preventDefault(),d.viewport.removeClass("click-disabled"))})},U=function(e){if("touchstart"===e.type||0===e.button)if(e.preventDefault(),d.controls.el.addClass("disabled"),d.working)d.controls.el.removeClass("disabled");else{d.touch.originalPos=h.position();var t=e.originalEvent,i=void 0!==t.changedTouches?t.changedTouches:[t];if("function"==typeof PointerEvent&&void 0===t.pointerId)return;d.touch.start.x=i[0].pageX,d.touch.start.y=i[0].pageY,d.viewport.get(0).setPointerCapture&&(d.pointerId=t.pointerId,d.viewport.get(0).setPointerCapture(d.pointerId)),d.originalClickTarget=t.originalTarget||t.target,d.originalClickButton=t.button,d.originalClickButtons=t.buttons,d.originalEventType=t.type,d.hasMove=!1,d.viewport.on("touchmove MSPointerMove pointermove",H),d.viewport.on("touchend MSPointerUp pointerup",q),d.viewport.on("MSPointerCancel pointercancel",F)}},F=function(e){e.preventDefault(),y(d.touch.originalPos.left,"reset",0),d.controls.el.removeClass("disabled"),d.viewport.off("MSPointerCancel pointercancel",F),d.viewport.off("touchmove MSPointerMove pointermove",H),d.viewport.off("touchend MSPointerUp pointerup",q),d.viewport.get(0).releasePointerCapture&&d.viewport.get(0).releasePointerCapture(d.pointerId)},H=function(e){var t=e.originalEvent,i=void 0!==t.changedTouches?t.changedTouches:[t],n=Math.abs(i[0].pageX-d.touch.start.x),r=Math.abs(i[0].pageY-d.touch.start.y),o=0,s=0;d.hasMove=!0,r<3*n&&d.settings.preventDefaultSwipeX?e.preventDefault():n<3*r&&d.settings.preventDefaultSwipeY&&e.preventDefault(),"touchmove"!==e.type&&e.preventDefault(),"fade"!==d.settings.mode&&d.settings.oneToOneTouch&&("horizontal"===d.settings.mode?(s=i[0].pageX-d.touch.start.x,o=d.touch.originalPos.left+s):(s=i[0].pageY-d.touch.start.y,o=d.touch.originalPos.top+s),y(o,"reset",0))},q=function(e){e.preventDefault(),d.viewport.off("touchmove MSPointerMove pointermove",H),d.controls.el.removeClass("disabled");var t=e.originalEvent,i=void 0!==t.changedTouches?t.changedTouches:[t],n=0,r=0;d.touch.end.x=i[0].pageX,d.touch.end.y=i[0].pageY,"fade"===d.settings.mode?(r=Math.abs(d.touch.start.x-d.touch.end.x))>=d.settings.swipeThreshold&&(d.touch.start.x>d.touch.end.x?h.goToNextSlide():h.goToPrevSlide(),h.stopAuto()):("horizontal"===d.settings.mode?(r=d.touch.end.x-d.touch.start.x,n=d.touch.originalPos.left):(r=d.touch.end.y-d.touch.start.y,n=d.touch.originalPos.top),!d.settings.infiniteLoop&&(0===d.active.index&&0<r||d.active.last&&r<0)?y(n,"reset",200):Math.abs(r)>=d.settings.swipeThreshold?(r<0?h.goToNextSlide():h.goToPrevSlide(),h.stopAuto()):y(n,"reset",200)),d.viewport.off("touchend MSPointerUp pointerup",q),d.viewport.get(0).releasePointerCapture&&d.viewport.get(0).releasePointerCapture(d.pointerId),!1!==d.hasMove||0!==d.originalClickButton&&"touchstart"!==d.originalEventType||V(d.originalClickTarget).trigger({type:"click",button:d.originalClickButton,buttons:d.originalClickButtons})},z=function(e){if(d.initialized)if(d.working)window.setTimeout(z,10);else{var t=V(window).width(),i=V(window).height();n===t&&r===i||(n=t,r=i,h.redrawSlider(),d.settings.onSliderResize.call(h,d.active.index))}},W=function(e){var t=c();d.settings.ariaHidden&&!d.settings.ticker&&(d.children.attr("aria-hidden","true"),d.children.slice(e,e+t).attr("aria-hidden","false"))};return h.goToSlide=function(e,t){var i,n,r,o,s,a=!0,l=0,u={left:0,top:0},c=null;if(d.oldIndex=d.active.index,d.active.index=(s=e)<0?d.settings.infiniteLoop?f()-1:d.active.index:s>=f()?d.settings.infiniteLoop?0:d.active.index:s,!d.working&&d.active.index!==d.oldIndex){if(d.working=!0,void 0!==(a=d.settings.onSlideBefore.call(h,d.children.eq(d.active.index),d.oldIndex,d.active.index))&&!a)return d.active.index=d.oldIndex,void(d.working=!1);"next"===t?d.settings.onSlideNext.call(h,d.children.eq(d.active.index),d.oldIndex,d.active.index)||(a=!1):"prev"===t&&(d.settings.onSlidePrev.call(h,d.children.eq(d.active.index),d.oldIndex,d.active.index)||(a=!1)),d.active.last=d.active.index>=f()-1,(d.settings.pager||d.settings.pagerCustom)&&A(d.active.index),d.settings.controls&&I(),"fade"===d.settings.mode?(d.settings.adaptiveHeight&&d.viewport.height()!==p()&&d.viewport.animate({height:p()},d.settings.adaptiveHeightSpeed),d.children.filter(":visible").fadeOut(d.settings.speed).css({zIndex:0}),d.children.eq(d.active.index).css("zIndex",d.settings.slideZIndex+1).fadeIn(d.settings.speed,function(){V(this).css("zIndex",d.settings.slideZIndex),L()})):(d.settings.adaptiveHeight&&d.viewport.height()!==p()&&d.viewport.animate({height:p()},d.settings.adaptiveHeightSpeed),!d.settings.infiniteLoop&&d.carousel&&d.active.last?"horizontal"===d.settings.mode?(u=(c=d.children.eq(d.children.length-1)).position(),l=d.viewport.width()-c.outerWidth()):(i=d.children.length-d.settings.minSlides,u=d.children.eq(i).position()):d.carousel&&d.active.last&&"prev"===t?(n=1===d.settings.moveSlides?d.settings.maxSlides-g():(f()-1)*g()-(d.children.length-d.settings.maxSlides),u=(c=h.children(".bx-clone").eq(n)).position()):"next"===t&&0===d.active.index?(u=h.find("> .bx-clone").eq(d.settings.maxSlides).position(),d.active.last=!1):0<=e&&(o=e*parseInt(g()),u=d.children.eq(o).position()),void 0!==u&&(r="horizontal"===d.settings.mode?-(u.left-l):-u.top,y(r,"slide",d.settings.speed)),d.working=!1),d.settings.ariaHidden&&W(d.active.index*g())}},h.goToNextSlide=function(){if((d.settings.infiniteLoop||!d.active.last)&&!0!==d.working){var e=parseInt(d.active.index)+1;h.goToSlide(e,"next")}},h.goToPrevSlide=function(){if((d.settings.infiniteLoop||0!==d.active.index)&&!0!==d.working){var e=parseInt(d.active.index)-1;h.goToSlide(e,"prev")}},h.startAuto=function(e){d.interval||(d.interval=setInterval(function(){"next"===d.settings.autoDirection?h.goToNextSlide():h.goToPrevSlide()},d.settings.pause),d.settings.onAutoChange.call(h,!0),d.settings.autoControls&&!0!==e&&P("stop"))},h.stopAuto=function(e){d.autoPaused&&(d.autoPaused=!1),d.interval&&(clearInterval(d.interval),d.interval=null,d.settings.onAutoChange.call(h,!1),d.settings.autoControls&&!0!==e&&P("start"))},h.getCurrentSlide=function(){return d.active.index},h.getCurrentSlideElement=function(){return d.children.eq(d.active.index)},h.getSlideElement=function(e){return d.children.eq(e)},h.getSlideCount=function(){return d.children.length},h.isWorking=function(){return d.working},h.redrawSlider=function(){d.children.add(h.find(".bx-clone")).outerWidth(u()),d.viewport.css("height",p()),d.settings.ticker||m(),d.active.last&&(d.active.index=f()-1),d.active.index>=f()&&(d.active.last=!0),d.settings.pager&&!d.settings.pagerCustom&&(v(),A(d.active.index)),d.settings.ariaHidden&&W(d.active.index*g())},h.destroySlider=function(){d.initialized&&(d.initialized=!1,V(".bx-clone",this).remove(),d.children.each(function(){void 0!==V(this).data("origStyle")?V(this).attr("style",V(this).data("origStyle")):V(this).removeAttr("style")}),void 0!==V(this).data("origStyle")?this.attr("style",V(this).data("origStyle")):V(this).removeAttr("style"),V(this).unwrap().unwrap(),d.controls.el&&d.controls.el.remove(),d.controls.next&&d.controls.next.remove(),d.controls.prev&&d.controls.prev.remove(),d.pagerEl&&d.settings.controls&&!d.settings.pagerCustom&&d.pagerEl.remove(),V(".bx-caption",this).remove(),d.controls.autoEl&&d.controls.autoEl.remove(),clearInterval(d.interval),d.settings.responsive&&V(window).off("resize",z),d.settings.keyboardEnabled&&V(document).off("keydown",j),V(this).removeData("bxSlider"),V(window).off("blur",D).off("focus",O))},h.reloadSlider=function(e){void 0!==e&&(t=e),h.destroySlider(),o(),V(h).data("bxSlider",this)},o(),V(h).data("bxSlider",this),this}}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(c){var d,n,h,r,p,t,l="Close",u="BeforeClose",f="MarkupParse",g="Open",m=".mfp",y="mfp-ready",i="mfp-removing",s="mfp-prevent-close",e=function(){},a=!!window.jQuery,v=c(window),_=function(e,t){d.ev.on("mfp"+e+m,t)},b=function(e,t,i,n){var r=document.createElement("div");return r.className="mfp-"+e,i&&(r.innerHTML=i),n?t&&t.appendChild(r):(r=c(r),t&&r.appendTo(t)),r},T=function(e,t){d.ev.triggerHandler("mfp"+e,t),d.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),d.st.callbacks[e]&&d.st.callbacks[e].apply(d,c.isArray(t)?t:[t]))},S=function(e){return e===t&&d.currTemplate.closeBtn||(d.currTemplate.closeBtn=c(d.st.closeMarkup.replace("%title%",d.st.tClose)),t=e),d.currTemplate.closeBtn},o=function(){c.magnificPopup.instance||((d=new e).init(),c.magnificPopup.instance=d)};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;d.isLowIE=d.isIE8=document.all&&!document.addEventListener,d.isAndroid=/android/gi.test(e),d.isIOS=/iphone|ipad|ipod/gi.test(e),d.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),d.probablyMobile=d.isAndroid||d.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),h=c(document),d.popupsCache={}},open:function(e){var t;if(!1===e.isObj){d.items=e.items.toArray(),d.index=0;var i,n=e.items;for(t=0;t<n.length;t++)if((i=n[t]).parsed&&(i=i.el[0]),i===e.el[0]){d.index=t;break}}else d.items=c.isArray(e.items)?e.items:[e.items],d.index=e.index||0;if(!d.isOpen){d.types=[],p="",e.mainEl&&e.mainEl.length?d.ev=e.mainEl.eq(0):d.ev=h,e.key?(d.popupsCache[e.key]||(d.popupsCache[e.key]={}),d.currTemplate=d.popupsCache[e.key]):d.currTemplate={},d.st=c.extend(!0,{},c.magnificPopup.defaults,e),d.fixedContentPos="auto"===d.st.fixedContentPos?!d.probablyMobile:d.st.fixedContentPos,d.st.modal&&(d.st.closeOnContentClick=!1,d.st.closeOnBgClick=!1,d.st.showCloseBtn=!1,d.st.enableEscapeKey=!1),d.bgOverlay||(d.bgOverlay=b("bg").on("click"+m,function(){d.close()}),d.wrap=b("wrap").attr("tabindex",-1).on("click"+m,function(e){d._checkIfClose(e.target)&&d.close()}),d.container=b("container",d.wrap)),d.contentContainer=b("content"),d.st.preloader&&(d.preloader=b("preloader",d.container,d.st.tLoading));var r=c.magnificPopup.modules;for(t=0;t<r.length;t++){var o=r[t];o=o.charAt(0).toUpperCase()+o.slice(1),d["init"+o].call(d)}T("BeforeOpen"),d.st.showCloseBtn&&(d.st.closeBtnInside?(_(f,function(e,t,i,n){i.close_replaceWith=S(n.type)}),p+=" mfp-close-btn-in"):d.wrap.append(S())),d.st.alignTop&&(p+=" mfp-align-top"),d.fixedContentPos?d.wrap.css({overflow:d.st.overflowY,overflowX:"hidden",overflowY:d.st.overflowY}):d.wrap.css({top:v.scrollTop(),position:"absolute"}),(!1===d.st.fixedBgPos||"auto"===d.st.fixedBgPos&&!d.fixedContentPos)&&d.bgOverlay.css({height:h.height(),position:"absolute"}),d.st.enableEscapeKey&&h.on("keyup"+m,function(e){27===e.keyCode&&d.close()}),v.on("resize"+m,function(){d.updateSize()}),d.st.closeOnContentClick||(p+=" mfp-auto-cursor"),p&&d.wrap.addClass(p);var s=d.wH=v.height(),a={};if(d.fixedContentPos&&d._hasScrollBar(s)){var l=d._getScrollbarSize();l&&(a.marginRight=l)}d.fixedContentPos&&(d.isIE7?c("body, html").css("overflow","hidden"):a.overflow="hidden");var u=d.st.mainClass;return d.isIE7&&(u+=" mfp-ie7"),u&&d._addClassToMFP(u),d.updateItemHTML(),T("BuildControls"),c("html").css(a),d.bgOverlay.add(d.wrap).prependTo(d.st.prependTo||c(document.body)),d._lastFocusedEl=document.activeElement,setTimeout(function(){d.content?(d._addClassToMFP(y),d._setFocus()):d.bgOverlay.addClass(y),h.on("focusin"+m,d._onFocusIn)},16),d.isOpen=!0,d.updateSize(s),T(g),e}d.updateItemHTML()},close:function(){d.isOpen&&(T(u),d.isOpen=!1,d.st.removalDelay&&!d.isLowIE&&d.supportsTransition?(d._addClassToMFP(i),setTimeout(function(){d._close()},d.st.removalDelay)):d._close())},_close:function(){T(l);var e=i+" "+y+" ";if(d.bgOverlay.detach(),d.wrap.detach(),d.container.empty(),d.st.mainClass&&(e+=d.st.mainClass+" "),d._removeClassFromMFP(e),d.fixedContentPos){var t={marginRight:""};d.isIE7?c("body, html").css("overflow",""):t.overflow="",c("html").css(t)}h.off("keyup.mfp focusin"+m),d.ev.off(m),d.wrap.attr("class","mfp-wrap").removeAttr("style"),d.bgOverlay.attr("class","mfp-bg"),d.container.attr("class","mfp-container"),!d.st.showCloseBtn||d.st.closeBtnInside&&!0!==d.currTemplate[d.currItem.type]||d.currTemplate.closeBtn&&d.currTemplate.closeBtn.detach(),d.st.autoFocusLast&&d._lastFocusedEl&&c(d._lastFocusedEl).focus(),d.currItem=null,d.content=null,d.currTemplate=null,d.prevHeight=0,T("AfterClose")},updateSize:function(e){if(d.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*t;d.wrap.css("height",i),d.wH=i}else d.wH=e||v.height();d.fixedContentPos||d.wrap.css("height",d.wH),T("Resize")},updateItemHTML:function(){var e=d.items[d.index];d.contentContainer.detach(),d.content&&d.content.detach(),e.parsed||(e=d.parseEl(d.index));var t=e.type;if(T("BeforeChange",[d.currItem?d.currItem.type:"",t]),d.currItem=e,!d.currTemplate[t]){var i=!!d.st[t]&&d.st[t].markup;T("FirstMarkupParse",i),d.currTemplate[t]=!i||c(i)}r&&r!==e.type&&d.container.removeClass("mfp-"+r+"-holder");var n=d["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,d.currTemplate[t]);d.appendContent(n,t),e.preloaded=!0,T("Change",e),r=e.type,d.container.prepend(d.contentContainer),T("AfterChange")},appendContent:function(e,t){(d.content=e)?d.st.showCloseBtn&&d.st.closeBtnInside&&!0===d.currTemplate[t]?d.content.find(".mfp-close").length||d.content.append(S()):d.content=e:d.content="",T("BeforeAppend"),d.container.addClass("mfp-"+t+"-holder"),d.contentContainer.append(d.content)},parseEl:function(e){var t,i=d.items[e];if(i.tagName?i={el:c(i)}:(t=i.type,i={data:i,src:i.src}),i.el){for(var n=d.types,r=0;r<n.length;r++)if(i.el.hasClass("mfp-"+n[r])){t=n[r];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=t||d.st.type||"inline",i.index=e,i.parsed=!0,d.items[e]=i,T("ElementParse",i),d.items[e]},addGroup:function(t,i){var e=function(e){e.mfpEl=this,d._openClick(e,t,i)};i||(i={});var n="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(n).on(n,e)):(i.isObj=!1,i.delegate?t.off(n).on(n,i.delegate,e):(i.items=t).off(n).on(n,e))},_openClick:function(e,t,i){if((void 0!==i.midClick?i.midClick:c.magnificPopup.defaults.midClick)||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var n=void 0!==i.disableOn?i.disableOn:c.magnificPopup.defaults.disableOn;if(n)if(c.isFunction(n)){if(!n.call(d))return!0}else if(v.width()<n)return!0;e.type&&(e.preventDefault(),d.isOpen&&e.stopPropagation()),i.el=c(e.mfpEl),i.delegate&&(i.items=t.find(i.delegate)),d.open(i)}},updateStatus:function(e,t){if(d.preloader){n!==e&&d.container.removeClass("mfp-s-"+n),t||"loading"!==e||(t=d.st.tLoading);var i={status:e,text:t};T("UpdateStatus",i),e=i.status,t=i.text,d.preloader.html(t),d.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),d.container.addClass("mfp-s-"+e),n=e}},_checkIfClose:function(e){if(!c(e).hasClass(s)){var t=d.st.closeOnContentClick,i=d.st.closeOnBgClick;if(t&&i)return!0;if(!d.content||c(e).hasClass("mfp-close")||d.preloader&&e===d.preloader[0])return!0;if(e===d.content[0]||c.contains(d.content[0],e)){if(t)return!0}else if(i&&c.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){d.bgOverlay.addClass(e),d.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),d.wrap.removeClass(e)},_hasScrollBar:function(e){return(d.isIE7?h.height():document.body.scrollHeight)>(e||v.height())},_setFocus:function(){(d.st.focus?d.content.find(d.st.focus).eq(0):d.wrap).focus()},_onFocusIn:function(e){return e.target===d.wrap[0]||c.contains(d.wrap[0],e.target)?void 0:(d._setFocus(),!1)},_parseMarkup:function(r,e,t){var o;t.data&&(e=c.extend(t.data,e)),T(f,[r,e,t]),c.each(e,function(e,t){if(void 0===t||!1===t)return!0;if(1<(o=e.split("_")).length){var i=r.find(m+"-"+o[0]);if(0<i.length){var n=o[1];"replaceWith"===n?i[0]!==t[0]&&i.replaceWith(t):"img"===n?i.is("img")?i.attr("src",t):i.replaceWith(c("<img>").attr("src",t).attr("class",i.attr("class"))):i.attr(o[1],t)}}else r.find(m+"-"+e).html(t)})},_getScrollbarSize:function(){if(void 0===d.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),d.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return d.scrollbarSize}},c.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return o(),(e=e?c.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return c.magnificPopup.instance&&c.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(c.magnificPopup.defaults[e]=t.options),c.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},c.fn.magnificPopup=function(e){o();var t=c(this);if("string"==typeof e)if("open"===e){var i,n=a?t.data("magnificPopup"):t[0].magnificPopup,r=parseInt(arguments[1],10)||0;n.items?i=n.items[r]:(i=t,n.delegate&&(i=i.find(n.delegate)),i=i.eq(r)),d._openClick({mfpEl:i},t,n)}else d.isOpen&&d[e].apply(d,Array.prototype.slice.call(arguments,1));else e=c.extend(!0,{},e),a?t.data("magnificPopup",e):t[0].magnificPopup=e,d.addGroup(t,e);return t};var C,w,k,E="inline",x=function(){k&&(w.after(k.addClass(C)).detach(),k=null)};c.magnificPopup.registerModule(E,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){d.types.push(E),_(l+"."+E,function(){x()})},getInline:function(e,t){if(x(),e.src){var i=d.st.inline,n=c(e.src);if(n.length){var r=n[0].parentNode;r&&r.tagName&&(w||(C=i.hiddenClass,w=b(C),C="mfp-"+C),k=n.after(w).detach().removeClass(C)),d.updateStatus("ready")}else d.updateStatus("error",i.tNotFound),n=c("<div>");return e.inlineElement=n}return d.updateStatus("ready"),d._parseMarkup(t,{},e),t}}});var A,L="ajax",P=function(){A&&c(document.body).removeClass(A)},I=function(){P(),d.req&&d.req.abort()};c.magnificPopup.registerModule(L,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){d.types.push(L),A=d.st.ajax.cursor,_(l+"."+L,I),_("BeforeChange."+L,I)},getAjax:function(r){A&&c(document.body).addClass(A),d.updateStatus("loading");var e=c.extend({url:r.src,success:function(e,t,i){var n={data:e,xhr:i};T("ParseAjax",n),d.appendContent(c(n.data),L),r.finished=!0,P(),d._setFocus(),setTimeout(function(){d.wrap.addClass(y)},16),d.updateStatus("ready"),T("AjaxContentAdded")},error:function(){P(),r.finished=r.loadError=!0,d.updateStatus("error",d.st.ajax.tError.replace("%url%",r.src))}},d.st.ajax.settings);return d.req=c.ajax(e),""}}});var O;c.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=d.st.image,t=".image";d.types.push("image"),_(g+t,function(){"image"===d.currItem.type&&e.cursor&&c(document.body).addClass(e.cursor)}),_(l+t,function(){e.cursor&&c(document.body).removeClass(e.cursor),v.off("resize"+m)}),_("Resize"+t,d.resizeImage),d.isLowIE&&_("AfterChange",d.resizeImage)},resizeImage:function(){var e=d.currItem;if(e&&e.img&&d.st.image.verticalFit){var t=0;d.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",d.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,O&&clearInterval(O),e.isCheckingImgSize=!1,T("ImageHasSize",e),e.imgHidden&&(d.content&&d.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],r=function(e){O&&clearInterval(O),O=setInterval(function(){return 0<n.naturalWidth?void d._onImageHasSize(t):(200<i&&clearInterval(O),void(3===++i?r(10):40===i?r(50):100===i&&r(500)))},e)};r(1)},getImage:function(e,t){var i=0,n=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===d.currItem&&(d._onImageHasSize(e),d.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,T("ImageLoadComplete")):++i<200?setTimeout(n,100):r())},r=function(){e&&(e.img.off(".mfploader"),e===d.currItem&&(d._onImageHasSize(e),d.updateStatus("error",o.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},o=d.st.image,s=t.find(".mfp-img");if(s.length){var a=document.createElement("img");a.className="mfp-img",e.el&&e.el.find("img").length&&(a.alt=e.el.find("img").attr("alt")),e.img=c(a).on("load.mfploader",n).on("error.mfploader",r),a.src=e.src,s.is("img")&&(e.img=e.img.clone()),0<(a=e.img[0]).naturalWidth?e.hasSize=!0:a.width||(e.hasSize=!1)}return d._parseMarkup(t,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=d.st.image.titleSrc;if(t){if(c.isFunction(t))return t.call(d,e);if(e.el)return e.el.attr(t)||""}return""}(e),img_replaceWith:e.img},e),d.resizeImage(),e.hasSize?(O&&clearInterval(O),e.loadError?(t.addClass("mfp-loading"),d.updateStatus("error",o.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),d.updateStatus("ready"))):(d.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),d.findImageSize(e))),t}}});var D;c.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,o=d.st.zoom,t=".zoom";if(o.enabled&&d.supportsTransition){var i,n,r=o.duration,s=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+o.duration/1e3+"s "+o.easing,n={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},r="transition";return n["-webkit-"+r]=n["-moz-"+r]=n["-o-"+r]=n[r]=i,t.css(n),t},a=function(){d.content.css("visibility","visible")};_("BuildControls"+t,function(){if(d._allowZoom()){if(clearTimeout(i),d.content.css("visibility","hidden"),!(e=d._getItemToZoom()))return void a();(n=s(e)).css(d._getOffset()),d.wrap.append(n),i=setTimeout(function(){n.css(d._getOffset(!0)),i=setTimeout(function(){a(),setTimeout(function(){n.remove(),e=n=null,T("ZoomAnimationEnded")},16)},r)},16)}}),_(u+t,function(){if(d._allowZoom()){if(clearTimeout(i),d.st.removalDelay=r,!e){if(!(e=d._getItemToZoom()))return;n=s(e)}n.css(d._getOffset(!0)),d.wrap.append(n),d.content.css("visibility","hidden"),setTimeout(function(){n.css(d._getOffset())},16)}}),_(l+t,function(){d._allowZoom()&&(a(),n&&n.remove(),e=null)})}},_allowZoom:function(){return"image"===d.currItem.type},_getItemToZoom:function(){return!!d.currItem.hasSize&&d.currItem.img},_getOffset:function(e){var t,i=(t=e?d.currItem.img:d.st.zoom.opener(d.currItem.el||d.currItem)).offset(),n=parseInt(t.css("padding-top"),10),r=parseInt(t.css("padding-bottom"),10);i.top-=c(window).scrollTop()-n;var o={width:t.width(),height:(a?t.innerHeight():t[0].offsetHeight)-r-n};return void 0===D&&(D=void 0!==document.createElement("p").style.MozTransform),D?o["-moz-transform"]=o.transform="translate("+i.left+"px,"+i.top+"px)":(o.left=i.left,o.top=i.top),o}}});var M="iframe",R=function(e){if(d.currTemplate[M]){var t=d.currTemplate[M].find("iframe");t.length&&(e||(t[0].src="//about:blank"),d.isIE8&&t.css("display",e?"block":"none"))}};c.magnificPopup.registerModule(M,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){d.types.push(M),_("BeforeChange",function(e,t,i){t!==i&&(t===M?R():i===M&&R(!0))}),_(l+"."+M,function(){R()})},getIframe:function(e,t){var i=e.src,n=d.st.iframe;c.each(n.patterns,function(){return-1<i.indexOf(this.index)?(this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1):void 0});var r={};return n.srcAction&&(r[n.srcAction]=i),d._parseMarkup(t,r,e),d.updateStatus("ready"),t}}});var N=function(e){var t=d.items.length;return t-1<e?e-t:e<0?t+e:e},j=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};c.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var o=d.st.gallery,e=".mfp-gallery";return d.direction=!0,!(!o||!o.enabled)&&(p+=" mfp-gallery",_(g+e,function(){o.navigateByImgClick&&d.wrap.on("click"+e,".mfp-img",function(){return 1<d.items.length?(d.next(),!1):void 0}),h.on("keydown"+e,function(e){37===e.keyCode?d.prev():39===e.keyCode&&d.next()})}),_("UpdateStatus"+e,function(e,t){t.text&&(t.text=j(t.text,d.currItem.index,d.items.length))}),_(f+e,function(e,t,i,n){var r=d.items.length;i.counter=1<r?j(o.tCounter,n.index,r):""}),_("BuildControls"+e,function(){if(1<d.items.length&&o.arrows&&!d.arrowLeft){var e=o.arrowMarkup,t=d.arrowLeft=c(e.replace(/%title%/gi,o.tPrev).replace(/%dir%/gi,"left")).addClass(s),i=d.arrowRight=c(e.replace(/%title%/gi,o.tNext).replace(/%dir%/gi,"right")).addClass(s);t.click(function(){d.prev()}),i.click(function(){d.next()}),d.container.append(t.add(i))}}),_("Change"+e,function(){d._preloadTimeout&&clearTimeout(d._preloadTimeout),d._preloadTimeout=setTimeout(function(){d.preloadNearbyImages(),d._preloadTimeout=null},16)}),void _(l+e,function(){h.off(e),d.wrap.off("click"+e),d.arrowRight=d.arrowLeft=null}))},next:function(){d.direction=!0,d.index=N(d.index+1),d.updateItemHTML()},prev:function(){d.direction=!1,d.index=N(d.index-1),d.updateItemHTML()},goTo:function(e){d.direction=e>=d.index,d.index=e,d.updateItemHTML()},preloadNearbyImages:function(){var e,t=d.st.gallery.preload,i=Math.min(t[0],d.items.length),n=Math.min(t[1],d.items.length);for(e=1;e<=(d.direction?n:i);e++)d._preloadItem(d.index+e);for(e=1;e<=(d.direction?i:n);e++)d._preloadItem(d.index-e)},_preloadItem:function(e){if(e=N(e),!d.items[e].preloaded){var t=d.items[e];t.parsed||(t=d.parseEl(e)),T("LazyLoad",t),"image"===t.type&&(t.img=c('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,T("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0}}}});var B="retina";c.magnificPopup.registerModule(B,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var i=d.st.retina,n=i.ratio;1<(n=isNaN(n)?n():n)&&(_("ImageHasSize."+B,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})}),_("ElementParse."+B,function(e,t){t.src=i.replaceSrc(t,n)}))}}}}),o()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.videojs=t()}(this,function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i,m="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n={},r=Object.freeze({default:n}),o=r&&n||r,s=void 0!==e?e:"undefined"!=typeof window?window:{};"undefined"!=typeof document?i=document:(i=s["__GLOBAL_DOCUMENT_CACHE@4"])||(i=s["__GLOBAL_DOCUMENT_CACHE@4"]=o);var h=i,a=void 0,l="info",u=[],c=function(e,t){var i=a.levels[l],n=new RegExp("^("+i+")$");if("log"!==e&&t.unshift(e.toUpperCase()+":"),u&&u.push([].concat(t)),t.unshift("VIDEOJS:"),m.console){var r=m.console[e];r||"debug"!==e||(r=m.console.info||m.console.log),r&&i&&n.test(e)&&r[Array.isArray(t)?"apply":"call"](m.console,t)}};(a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];c("log",t)}).levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:l},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');l=e}return l},a.history=function(){return u?[].concat(u):[]},a.history.clear=function(){u&&(u.length=0)},a.history.disable=function(){null!==u&&(u.length=0,u=null)},a.history.enable=function(){null===u&&(u=[])},a.error=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return c("error",t)},a.warn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return c("warn",t)},a.debug=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return c("debug",t)};var p=a,f=function(e){for(var t="",i=0;i<arguments.length;i++)t+=e[i].replace(/\n\r?\s*/g,"")+(arguments[i+1]||"");return t},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},d=function(e,t){return e.raw=t,e},b=Object.prototype.toString,T=function(e){return w(e)?Object.keys(e):[]};function S(t,i){T(t).forEach(function(e){return i(t[e],e)})}function C(i){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[i].concat(t)):(t.forEach(function(e){e&&S(e,function(e,t){i[t]=e})}),i)}function w(e){return!!e&&"object"===(void 0===e?"undefined":g(e))}function k(e){return w(e)&&"[object Object]"===b.call(e)&&e.constructor===Object}function E(e,t){if(!e||!t)return"";if("function"==typeof m.getComputedStyle){var i=m.getComputedStyle(e);return i?i[t]:""}return""}var x=d(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function A(e){return"string"==typeof e&&/\S/.test(e)}function L(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function P(){return h===m.document}function I(e){return w(e)&&1===e.nodeType}function O(){try{return m.parent!==m.self}catch(e){return!0}}function D(n){return function(e,t){if(!A(e))return h[n](null);A(t)&&(t=h.querySelector(t));var i=I(t)?t:h;return i[n]&&i[n](e)}}function M(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],r=h.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(p.warn(f(x,e,t)),r.setAttribute(e,t)):"textContent"===e?R(r,t):r[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),n&&ee(r,n),r}function R(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function N(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function j(e,t){return L(t),e.classList?e.classList.contains(t):(i=t,new RegExp("(^|\\s)"+i+"($|\\s)")).test(e.className);var i}function B(e,t){return e.classList?e.classList.add(t):j(e,t)||(e.className=(e.className+" "+t).trim()),e}function U(e,t){return e.classList?e.classList.remove(t):(L(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function F(e,t,i){var n=j(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return i?B(e,t):U(e,t),e}function H(i,n){Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];null==t||!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})}function q(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,n=i.length-1;0<=n;n--){var r=i[n].name,o=i[n].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(o=null!==o),t[r]=o}return t}function z(e,t){return e.getAttribute(t)}function W(e,t,i){e.setAttribute(t,i)}function V(e,t){e.removeAttribute(t)}function G(){h.body.focus(),h.onselectstart=function(){return!1}}function X(){h.onselectstart=function(){return!0}}function Y(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(E(e,"height"))),i.width||(i.width=parseFloat(E(e,"width"))),i}}function $(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var i=h.documentElement,n=h.body,r=i.clientLeft||n.clientLeft||0,o=m.pageXOffset||n.scrollLeft,s=t.left+o-r,a=i.clientTop||n.clientTop||0,l=m.pageYOffset||n.scrollTop,u=t.top+l-a;return{left:Math.round(s),top:Math.round(u)}}function K(e,t){var i={},n=$(e),r=e.offsetWidth,o=e.offsetHeight,s=n.top,a=n.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(s-l+o)/o)),i.x=Math.max(0,Math.min(1,(u-a)/r)),i}function Q(e){return w(e)&&3===e.nodeType}function J(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Z(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),I(e)||Q(e)?e:"string"==typeof e&&/\S/.test(e)?h.createTextNode(e):void 0}).filter(function(e){return e})}function ee(t,e){return Z(e).forEach(function(e){return t.appendChild(e)}),t}function te(e,t){return ee(J(e),t)}function ie(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}var ne=D("querySelector"),re=D("querySelectorAll"),oe=Object.freeze({isReal:P,isEl:I,isInFrame:O,createEl:M,textContent:R,prependTo:N,hasClass:j,addClass:B,removeClass:U,toggleClass:F,setAttributes:H,getAttributes:q,getAttribute:z,setAttribute:W,removeAttribute:V,blockTextSelection:G,unblockTextSelection:X,getBoundingClientRect:Y,findPosition:$,getPointerPosition:K,isTextNode:Q,emptyEl:J,normalizeContent:Z,appendContent:ee,insertContent:te,isSingleLeftClick:ie,$:ne,$$:re}),se=1;function ae(){return se++}var le={},ue="vdata"+(new Date).getTime();function ce(e){var t=e[ue];return t||(t=e[ue]=ae()),le[t]||(le[t]={}),le[t]}function de(e){var t=e[ue];return!!t&&!!Object.getOwnPropertyNames(le[t]).length}function he(e){var t=e[ue];if(t){delete le[t];try{delete e[ue]}catch(t){e.removeAttribute?e.removeAttribute(ue):e[ue]=null}}}function pe(e,t){var i=ce(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&he(e)}function fe(t,i,e,n){e.forEach(function(e){t(i,e,n)})}function ge(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n=e||m.event;for(var r in e={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||h),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var o=h.documentElement,s=h.body;e.pageX=e.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var me=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){me=!0}});m.addEventListener("test",null,e),m.removeEventListener("test",null,e)}catch(e){}}();var ye=["touchstart","touchmove"];function ve(s,e,t){if(Array.isArray(e))return fe(ve,s,e,t);var a=ce(s);if(a.handlers||(a.handlers={}),a.handlers[e]||(a.handlers[e]=[]),t.guid||(t.guid=ae()),a.handlers[e].push(t),a.dispatcher||(a.disabled=!1,a.dispatcher=function(e,t){if(!a.disabled){e=ge(e);var i=a.handlers[e.type];if(i)for(var n=i.slice(0),r=0,o=n.length;r<o&&!e.isImmediatePropagationStopped();r++)try{n[r].call(s,e,t)}catch(e){p.error(e)}}}),1===a.handlers[e].length)if(s.addEventListener){var i=!1;me&&-1<ye.indexOf(e)&&(i={passive:!0}),s.addEventListener(e,a.dispatcher,i)}else s.attachEvent&&s.attachEvent("on"+e,a.dispatcher)}function _e(e,t,i){if(de(e)){var n=ce(e);if(n.handlers){if(Array.isArray(t))return fe(_e,e,t,i);var r=function(e,t){n.handlers[t]=[],pe(e,t)};if(void 0!==t){var o=n.handlers[t];if(o)if(i){if(i.guid)for(var s=0;s<o.length;s++)o[s].guid===i.guid&&o.splice(s--,1);pe(e,t)}else r(e,t)}else for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&r(e,a)}}}function be(e,t,i){var n=de(e)?ce(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=ge(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)be.call(null,r,t,i);else if(!r&&!t.defaultPrevented){var o=ce(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function Te(t,i,n){if(Array.isArray(i))return fe(Te,t,i,n);var e=function e(){_e(t,i,e),n.apply(this,arguments)};e.guid=n.guid=n.guid||ae(),ve(t,i,e)}var Se=Object.freeze({fixEvent:ge,on:ve,off:_e,trigger:be,one:Te}),Ce=!1,we=void 0,ke=function(){if(P()&&!1!==we.options.autoSetup){var e=Array.prototype.slice.call(h.getElementsByTagName("video")),t=Array.prototype.slice.call(h.getElementsByTagName("audio")),i=Array.prototype.slice.call(h.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&0<n.length)for(var r=0,o=n.length;r<o;r++){var s=n[r];if(!s||!s.getAttribute){Ee(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&we(s)}else Ce||Ee(1)}};function Ee(e,t){t&&(we=t),m.setTimeout(ke,e)}P()&&"complete"===h.readyState?Ce=!0:Te(m,"load",function(){Ce=!0});var xe=function(e){var t=h.createElement("style");return t.className=e,t},Ae=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Le=function(e,t,i){t.guid||(t.guid=ae());var n=function(){return t.apply(e,arguments)};return n.guid=i?i+"_"+t.guid:t.guid,n},Pe=function(t,i){var n=Date.now();return function(){var e=Date.now();i<=e-n&&(t.apply(void 0,arguments),n=e)}},Ie=function(){};Ie.prototype.allowedEvents_={},Ie.prototype.addEventListener=Ie.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ve(this,e,t),this.addEventListener=i},Ie.prototype.removeEventListener=Ie.prototype.off=function(e,t){_e(this,e,t)},Ie.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},Te(this,e,t),this.addEventListener=i},Ie.prototype.dispatchEvent=Ie.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=ge(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),be(this,e)};var Oe=function(t){return t instanceof Ie||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},De=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Me=function(e){if(!e.nodeName&&!Oe(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Re=function(e){if(!De(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Ne=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},je=function(e,t){var i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,n=void 0,r=void 0,o=void 0;return i?(n=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],o=t[1]):(n=t[0],r=t[1],o=t[2]),Me(n),Re(r),Ne(o),{isTargetingSelf:i,target:n,type:r,listener:o=Le(e,o)}},Be=function(e,t,i,n){Me(e),e.nodeName?Se[t](e,i,n):e[t](i,n)},Ue={on:function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=je(this,i),o=r.isTargetingSelf,s=r.target,a=r.type,l=r.listener;if(Be(s,"on",a,l),!o){var u=function(){return e.off(s,a,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Be(this,"on","dispose",u),Be(s,"on","dispose",c)}},one:function(){for(var r=this,e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=je(this,t),o=n.isTargetingSelf,s=n.target,a=n.type,l=n.listener;if(o)Be(s,"one",a,l);else{var u=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];r.off(s,a,e),l.apply(null,i)};u.guid=l.guid,Be(s,"one",a,u)}},off:function(e,t,i){if(!e||De(e))_e(this.eventBusEl_,e,t);else{var n=e,r=t;Me(n),Re(r),Ne(i),i=Le(this,i),this.off("dispose",i),n.nodeName?(_e(n,r,i),_e(n,"dispose",i)):Oe(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){return be(this.eventBusEl_,e,t)}};function Fe(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=M("span",{className:"vjs-event-bus"});return C(e,Ue),e.on("dispose",function(){e.off(),m.setTimeout(function(){e.eventBusEl_=null},0)}),e}var He={state:{},setState:function(e){var i=this;"function"==typeof e&&(e=e());var n=void 0;return S(e,function(e,t){i.state[t]!==e&&((n=n||{})[t]={from:i.state[t],to:e}),i.state[t]=e}),n&&Oe(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function qe(e,t){return C(e,He),e.state=C({},e.state,t),"function"==typeof e.handleStateChanged&&Oe(e)&&e.on("statechanged",e.handleStateChanged),e}function ze(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function We(){for(var i={},e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){e&&S(e,function(e,t){k(e)?(k(i[t])||(i[t]={}),i[t]=We(i[t],e)):i[t]=e})}),i}var Ve=function(){function l(e,t,i){if(y(this,l),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=We({},this.options_),t=this.options_=We(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+ae()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&Fe(this,{eventBusKey:this.el_?"el_":null}),qe(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}return l.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),he(this.el_),this.el_=null),this.player_=null},l.prototype.player=function(){return this.player_},l.prototype.options=function(e){return p.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=We(this.options_,e)),this.options_},l.prototype.el=function(){return this.el_},l.prototype.createEl=function(e,t,i){return M(e,t,i)},l.prototype.localize=function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,i=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),o=n&&n[i],s=i&&i.split("-")[0],a=n&&n[s],l=t;return o&&o[e]?l=o[e]:a&&a[e]&&(l=a[e]),r&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var i=r[t-1],n=i;return void 0===i&&(n=e),n})),l},l.prototype.contentEl=function(){return this.contentEl_||this.el_},l.prototype.id=function(){return this.id_},l.prototype.name=function(){return this.name_},l.prototype.children=function(){return this.children_},l.prototype.getChildById=function(e){return this.childIndex_[e]},l.prototype.getChild=function(e){if(e)return e=ze(e),this.childNameIndex_[e]},l.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0,r=void 0;if("string"==typeof e){r=ze(e);var o=t.componentClass||r;t.name=r;var s=l.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;n=new s(this.player_||this,t)}else n=e;if(this.children_.splice(i,0,n),"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(r=r||n.name&&ze(n.name()))&&(this.childNameIndex_[r]=n),"function"==typeof n.el&&n.el()){var a=this.contentEl().children[i]||null;this.contentEl().insertBefore(n.el(),a)}return n},l.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},l.prototype.initChildren=function(){var r=this,n=this.options_.children;if(n){var o=this.options_,e=void 0,i=l.getComponent("Tech");(e=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t=void 0,i=void 0;return"string"==typeof e?i=n[t=e]||r.options_[t]||{}:(t=e.name,i=e),{name:t,opts:i}}).filter(function(e){var t=l.getComponent(e.opts.componentClass||ze(e.name));return t&&!i.isTech(t)}).forEach(function(e){var t=e.name,i=e.opts;if(void 0!==o[t]&&(i=o[t]),!1!==i){!0===i&&(i={}),i.playerOptions=r.options_.playerOptions;var n=r.addChild(t,i);n&&(r[t]=n)}})}},l.prototype.buildCSSClass=function(){return""},l.prototype.ready=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},l.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},l.prototype.$=function(e,t){return ne(e,t||this.contentEl())},l.prototype.$$=function(e,t){return re(e,t||this.contentEl())},l.prototype.hasClass=function(e){return j(this.el_,e)},l.prototype.addClass=function(e){B(this.el_,e)},l.prototype.removeClass=function(e){U(this.el_,e)},l.prototype.toggleClass=function(e,t){F(this.el_,e,t)},l.prototype.show=function(){this.removeClass("vjs-hidden")},l.prototype.hide=function(){this.addClass("vjs-hidden")},l.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},l.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},l.prototype.getAttribute=function(e){return z(this.el_,e)},l.prototype.setAttribute=function(e,t){W(this.el_,e,t)},l.prototype.removeAttribute=function(e){V(this.el_,e)},l.prototype.width=function(e,t){return this.dimension("width",e,t)},l.prototype.height=function(e,t){return this.dimension("height",e,t)},l.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},l.prototype.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+ze(e)],10)},l.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof m.getComputedStyle){var i=m.getComputedStyle(this.el_);t=i.getPropertyValue(e)||i[e]}if(0===(t=parseFloat(t))){var n="offset"+ze(e);t=this.el_[n]}return t},l.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},l.prototype.currentWidth=function(){return this.currentDimension("width")},l.prototype.currentHeight=function(){return this.currentDimension("height")},l.prototype.focus=function(){this.el_.focus()},l.prototype.blur=function(){this.el_.blur()},l.prototype.emitTapEvents=function(){var t=0,n=null,r=void 0;this.on("touchstart",function(e){1===e.touches.length&&(n={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),r=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)r=!1;else if(n){var t=e.touches[0].pageX-n.pageX,i=e.touches[0].pageY-n.pageY;10<Math.sqrt(t*t+i*i)&&(r=!1)}});var e=function(){r=!1};this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(n=null)===r&&(new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap"))})},l.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=Le(this.player(),this.player().reportUserActivity),i=void 0;this.on("touchstart",function(){t(),this.clearInterval(i),i=this.setInterval(t,250)});var e=function(e){t(),this.clearInterval(i)};this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e)}},l.prototype.setTimeout=function(e,t){var i=this;e=Le(this,e);var n=m.setTimeout(e,t),r=function(){return i.clearTimeout(n)};return r.guid="vjs-timeout-"+n,this.on("dispose",r),n},l.prototype.clearTimeout=function(e){m.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},l.prototype.setInterval=function(e,t){var i=this;e=Le(this,e);var n=m.setInterval(e,t),r=function(){return i.clearInterval(n)};return r.guid="vjs-interval-"+n,this.on("dispose",r),n},l.prototype.clearInterval=function(e){m.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},l.prototype.requestAnimationFrame=function(e){var t=this;if(this.supportsRaf_){e=Le(this,e);var i=m.requestAnimationFrame(e),n=function(){return t.cancelAnimationFrame(i)};return n.guid="vjs-raf-"+i,this.on("dispose",n),i}return this.setTimeout(e,1e3/60)},l.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){m.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},l.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=l.getComponent("Tech"),n=i&&i.isTech(t),r=l===t||l.prototype.isPrototypeOf(t.prototype);if(n||!r){throw new Error('Illegal component, "'+e+'"; '+(n?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".")}e=ze(e),l.components_||(l.components_={});var o=l.getComponent("Player");if("Player"===e&&o&&o.players){var s=o.players,a=Object.keys(s);if(s&&0<a.length&&a.map(function(e){return s[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return l.components_[e]=t},l.getComponent=function(e){if(e)return e=ze(e),l.components_&&l.components_[e]?l.components_[e]:void 0},l}();Ve.prototype.supportsRaf_="function"==typeof m.requestAnimationFrame&&"function"==typeof m.cancelAnimationFrame,Ve.registerComponent("Component",Ve);var Ge,Xe,Ye,$e,Ke=m.navigator&&m.navigator.userAgent||"",Qe=/AppleWebKit\/([\d.]+)/i.exec(Ke),Je=Qe?parseFloat(Qe.pop()):null,Ze=/iPad/i.test(Ke),et=/iPhone/i.test(Ke)&&!Ze,tt=/iPod/i.test(Ke),it=et||Ze||tt,nt=(Ge=Ke.match(/OS (\d+)_/i))&&Ge[1]?Ge[1]:null,rt=/Android/i.test(Ke),ot=function(){var e=Ke.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),st=rt&&ot<5&&Je<537,at=/Firefox/i.test(Ke),lt=/Edge/i.test(Ke),ut=!lt&&/Chrome/i.test(Ke),ct=(Xe=Ke.match(/Chrome\/(\d+)/))&&Xe[1]?parseFloat(Xe[1]):null,dt=(!($e=(Ye=/MSIE\s(\d+)\.\d/.exec(Ke))&&parseFloat(Ye[1]))&&/Trident\/7.0/i.test(Ke)&&/rv:11.0/.test(Ke)&&($e=11),$e),ht=/Safari/i.test(Ke)&&!ut&&!rt&&!lt,pt=ht||it,ft=P()&&("ontouchstart"in m||m.DocumentTouch&&m.document instanceof m.DocumentTouch),gt=Object.freeze({IS_IPAD:Ze,IS_IPHONE:et,IS_IPOD:tt,IS_IOS:it,IOS_VERSION:nt,IS_ANDROID:rt,ANDROID_VERSION:ot,IS_NATIVE_ANDROID:st,IS_FIREFOX:at,IS_EDGE:lt,IS_CHROME:ut,CHROME_VERSION:ct,IE_VERSION:dt,IS_SAFARI:ht,IS_ANY_SAFARI:pt,TOUCH_ENABLED:ft});function mt(e,t,i,n){return function(e,t,i){if("number"!=typeof t||t<0||i<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function yt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:mt.bind(null,"start",0,e),end:mt.bind(null,"end",1,e)}}function vt(e,t){return Array.isArray(e)?yt(e):void 0===e||void 0===t?yt():yt([[e,t]])}function _t(e,t){var i=0,n=void 0,r=void 0;if(!t)return 0;e&&e.length||(e=vt(0,0));for(var o=0;o<e.length;o++)n=e.start(o),t<(r=e.end(o))&&(r=t),i+=r-n;return i/t}for(var bt={},Tt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],St=Tt[0],Ct=void 0,wt=0;wt<Tt.length;wt++)if(Tt[wt][1]in h){Ct=Tt[wt];break}if(Ct)for(var kt=0;kt<Ct.length;kt++)bt[St[kt]]=Ct[kt];function Et(e){if(e instanceof Et)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:w(e)&&("number"==typeof e.code&&(this.code=e.code),C(this,e)),this.message||(this.message=Et.defaultMessages[this.code]||"")}Et.prototype.code=0,Et.prototype.message="",Et.prototype.status=null,Et.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Et.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var xt=0;xt<Et.errorTypes.length;xt++)Et[Et.errorTypes[xt]]=xt,Et.prototype[Et.errorTypes[xt]]=xt;function At(e){return null!=e&&"function"==typeof e.then}function Lt(e){At(e)&&e.then(null,function(e){})}var Pt=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,i){return n[t]&&(e[t]=n[t]),e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},It="vjs-modal-dialog",Ot=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=M("div",{className:It+"-content"},{role:"document"}),i.descEl_=M("p",{className:It+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),R(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return v(r,n),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},r.prototype.buildCSSClass=function(){return It+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},r.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},r.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},r.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Le(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Le(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},r.prototype.fill=function(){this.fillWith(this.content())},r.prototype.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),te(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},r.prototype.empty=function(){this.trigger("beforemodalempty"),J(this.contentEl()),this.trigger("modalempty")},r.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r.prototype.conditionalFocus_=function(){var e=h.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(h,"keydown",this.handleKeyDown))},r.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(h,"keydown",this.handleKeyDown)},r.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),i=this.el_.querySelector(":focus"),n=void 0,r=0;r<t.length;r++)if(i===t[r]){n=r;break}h.activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())}},r.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof m.HTMLAnchorElement||e instanceof m.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof m.HTMLInputElement||e instanceof m.HTMLSelectElement||e instanceof m.HTMLTextAreaElement||e instanceof m.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof m.HTMLIFrameElement||e instanceof m.HTMLObjectElement||e instanceof m.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},r}(Ve);Ot.prototype.options_={pauseOnOpen:!0,temporary:!0},Ve.registerComponent("ModalDialog",Ot);var Dt=function(n){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y(this,r);var t=_(this,n.call(this));t.tracks_=[],Object.defineProperty(t,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)t.addTrack(e[i]);return t}return v(r,n),r.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},r.prototype.removeTrack=function(e){for(var t=void 0,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack"})},r.prototype.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},r}(Ie);for(var Mt in Dt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Dt.prototype.allowedEvents_)Dt.prototype["on"+Mt]=null;var Rt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},Nt=function(n){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y(this,r);for(var t=e.length-1;0<=t;t--)if(e[t].enabled){Rt(e,e[t]);break}var i=_(this,n.call(this,e));return i.changing_=!1,i}return v(r,n),r.prototype.addTrack=function(e){var t=this;e.enabled&&Rt(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){t.changing_||(t.changing_=!0,Rt(t,e),t.changing_=!1,t.trigger("change"))})},r}(Dt),jt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},Bt=function(n){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y(this,r);for(var t=e.length-1;0<=t;t--)if(e[t].selected){jt(e,e[t]);break}var i=_(this,n.call(this,e));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}return v(r,n),r.prototype.addTrack=function(e){var t=this;e.selected&&jt(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){t.changing_||(t.changing_=!0,jt(t,e),t.changing_=!1,t.trigger("change"))})},r}(Dt),Ut=function(t){function e(){return y(this,e),_(this,t.apply(this,arguments))}return v(e,t),e.prototype.addTrack=function(e){t.prototype.addTrack.call(this,e),e.addEventListener("modechange",Le(this,function(){this.trigger("change")})),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",Le(this,function(){this.trigger("selectedlanguagechange")}))},e}(Dt),Ft=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y(this,n),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}return n.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},n.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},n.prototype.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},n}(),Ht=function(){function t(e){y(this,t),t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return t.prototype.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)},t.prototype.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(),qt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},zt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Wt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Vt={disabled:"disabled",hidden:"hidden",showing:"showing"},Gt=function(o){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,s);var t=_(this,o.call(this)),i={id:e.id||"vjs_track_"+ae(),kind:e.kind||"",label:e.label||"",language:e.language||""},n=function(e){Object.defineProperty(t,e,{get:function(){return i[e]},set:function(){}})};for(var r in i)n(r);return t}return v(s,o),s}(Ie),Xt=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=h.createElement("a");i.href=e;var n=""===i.host&&"file:"!==i.protocol,r=void 0;n&&((r=h.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),h.body.appendChild(r));for(var o={},s=0;s<t.length;s++)o[t[s]]=i[t[s]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=m.location.protocol),n&&h.body.removeChild(r),o},Yt=function(e){if(!e.match(/^https?:\/\//)){var t=h.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},$t=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},Kt=function(e){var t=m.location,i=Xt(e);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host},Qt=Object.freeze({parseUrl:Xt,getAbsoluteURL:Yt,getFileExtension:$t,isCrossOrigin:Kt}),Jt=function(e){var t=Zt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Zt=Object.prototype.toString,ei=Object.freeze({default:Jt,__moduleExports:Jt}),ti=t(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),ii=ti.left,ni=ti.right,ri=Object.freeze({default:ti,__moduleExports:ti,left:ii,right:ni}),oi=ei&&Jt||ei,si=function(e,t,i){if(!oi(t))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),"[object Array]"===ai.call(e)?function(e,t,i){for(var n=0,r=e.length;n<r;n++)li.call(e,n)&&t.call(i,e[n],n,e)}(e,t,i):"string"==typeof e?function(e,t,i){for(var n=0,r=e.length;n<r;n++)t.call(i,e.charAt(n),n,e)}(e,t,i):function(e,t,i){for(var n in e)li.call(e,n)&&t.call(i,e[n],n,e)}(e,t,i)},ai=Object.prototype.toString,li=Object.prototype.hasOwnProperty,ui=Object.freeze({default:si,__moduleExports:si}),ci=ri&&ti||ri,di=ui&&si||ui,hi=function(e){if(!e)return{};var o={};return di(ci(e).split("\n"),function(e){var t,i=e.indexOf(":"),n=ci(e.slice(0,i)).toLowerCase(),r=ci(e.slice(i+1));void 0===o[n]?o[n]=r:(t=o[n],"[object Array]"===Object.prototype.toString.call(t)?o[n].push(r):o[n]=[o[n],r])}),o},pi=Object.freeze({default:hi,__moduleExports:hi}),fi=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)gi.call(i,n)&&(e[n]=i[n])}return e},gi=Object.prototype.hasOwnProperty,mi=Object.freeze({default:fi,__moduleExports:fi}),yi=pi&&hi||pi,vi=mi&&fi||mi,_i=Ti;function bi(e,t,i){var n=e;return oi(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=vi(t,{uri:e}),n.callback=i,n}function Ti(e,t,i){return Si(t=bi(e,t,i))}function Si(n){if(void 0===n.callback)throw new Error("callback argument missing");var r=!1,o=function(e,t,i){r||(r=!0,n.callback(e,t,i))};function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,g)}function e(){if(!s){var e;clearTimeout(l),e=n.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var t=g,i=null;return 0!==e?(t={body:function(){var e=void 0;if(e=a.response?a.response:a.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(a),f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:a},a.getAllResponseHeaders&&(t.headers=yi(a.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),o(i,t,t.body)}}var i,s,a=n.xhr||null;a||(a=n.cors||n.useXDR?new Ti.XDomainRequest:new Ti.XMLHttpRequest);var l,u=a.url=n.uri||n.url,c=a.method=n.method||"GET",d=n.body||n.data,h=a.headers=n.headers||{},p=!!n.sync,f=!1,g={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:a};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===n.json?d:n.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(e,0)},a.onload=e,a.onerror=t,a.onprogress=function(){},a.onabort=function(){s=!0},a.ontimeout=t,a.open(c,u,!p,n.username,n.password),p||(a.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(l=setTimeout(function(){if(!s){s=!0,a.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},n.timeout)),a.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&a.setRequestHeader(i,h[i]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(a.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(a),a.send(d||null),a}Ti.XMLHttpRequest=m.XMLHttpRequest||function(){},Ti.XDomainRequest="withCredentials"in new Ti.XMLHttpRequest?Ti.XMLHttpRequest:m.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(n){Ti["delete"===n?"del":n]=function(e,t,i){return(t=bi(e,t,i)).method=n.toUpperCase(),Si(t)}});var Ci=function(e,t){var i=new m.WebVTT.Parser(m,m.vttjs,m.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),0<n.length&&(m.console&&m.console.groupCollapsed&&m.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return p.error(e)}),m.console&&m.console.groupEnd&&m.console.groupEnd()),i.flush()},wi=function(u){function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(y(this,c),!e.tech)throw new Error("A tech was not provided.");var t=We(e,{kind:Wt[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=Vt[t.mode]||"disabled",n=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(i="hidden");var r=_(this,u.call(this,t));r.tech_=t.tech,r.cues_=[],r.activeCues_=[];var o=new Ht(r.cues_),s=new Ht(r.activeCues_),a=!1,l=Le(r,function(){this.activeCues,a&&(this.trigger("cuechange"),a=!1)});return"disabled"!==i&&r.tech_.ready(function(){r.tech_.on("timeupdate",l)},!0),Object.defineProperties(r,{default:{get:function(){return n},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;Vt[e]&&("showing"===(i=e)&&this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(a=!1,t.length!==this.activeCues_.length)a=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(a=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),t.src?(r.src=t.src,function(e,r){var t={uri:e},i=Kt(e);i&&(t.cors=i),_i(t,Le(this,function(e,t,i){if(e)return p.error(e,t);if(r.loaded_=!0,"function"!=typeof m.WebVTT){if(r.tech_){var n=function(){return Ci(i,r)};r.tech_.on("vttjsloaded",n),r.tech_.on("vttjserror",function(){p.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",n)})}}else Ci(i,r)}))}(t.src,r)):r.loaded_=!0,r}return v(c,u),c.prototype.addCue=function(e){var t=e;if(m.vttjs&&!(e instanceof m.vttjs.VTTCue)){for(var i in t=new m.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},c.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},c}(Gt);wi.prototype.allowedEvents_={cuechange:"cuechange"};var ki=function(r){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,o);var t=We(e,{kind:zt[e.kind]||""}),i=_(this,r.call(this,t)),n=!1;return Object.defineProperty(i,"enabled",{get:function(){return n},set:function(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(i.enabled=t.enabled),i.loaded_=!0,i}return v(o,r),o}(Gt),Ei=function(r){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,o);var t=We(e,{kind:qt[e.kind]||""}),i=_(this,r.call(this,t)),n=!1;return Object.defineProperty(i,"selected",{get:function(){return n},set:function(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(i.selected=t.selected),i}return v(o,r),o}(Gt),xi=function(r){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,o);var t=_(this,r.call(this)),i=void 0,n=new wi(e);return t.kind=n.kind,t.src=n.src,t.srclang=n.language,t.label=n.label,t.default=n.default,Object.defineProperties(t,{readyState:{get:function(){return i}},track:{get:function(){return n}}}),i=0,n.addEventListener("loadeddata",function(){i=2,t.trigger({type:"load",target:t})}),t}return v(o,r),o}(Ie);xi.prototype.allowedEvents_={load:"load"},xi.NONE=0,xi.LOADING=1,xi.LOADED=2,xi.ERROR=3;var Ai={audio:{ListClass:Nt,TrackClass:ki,capitalName:"Audio"},video:{ListClass:Bt,TrackClass:Ei,capitalName:"Video"},text:{ListClass:Ut,TrackClass:wi,capitalName:"Text"}};Object.keys(Ai).forEach(function(e){Ai[e].getterName=e+"Tracks",Ai[e].privateName=e+"Tracks_"});var Li={remoteText:{ListClass:Ut,TrackClass:wi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ft,TrackClass:xi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Pi=We(Ai,Li);Li.names=Object.keys(Li),Ai.names=Object.keys(Ai),Pi.names=[].concat(Li.names).concat(Ai.names);var Ii=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function Oi(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Di(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function Mi(){this.values=Ii(null)}function Ri(e,t,i,n){var r=n?e.split(n):[e];for(var o in r)if("string"==typeof r[o]){var s=r[o].split(i);2===s.length&&t(s[0],s[1])}}function Ni(t,e,o){var i,n,s,r=t;function a(){var e=Di(t);if(null===e)throw new Oi(Oi.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=a(),l(),"--\x3e"!==t.substr(0,3))throw new Oi(Oi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),l(),e.endTime=a(),l(),i=t,n=e,s=new Mi,Ri(i,function(e,t){switch(e){case"region":for(var i=o.length-1;0<=i;i--)if(o[i].id===t){s.set(e,o[i].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];s.integer(e,r),s.percent(e,r)&&s.set("snapToLines",!1),s.alt(e,r,["auto"]),2===n.length&&s.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=t.split(","),s.percent(e,n[0]),2===n.length&&s.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),n.region=s.get("region",null),n.vertical=s.get("vertical",""),n.line=s.get("line","auto"),n.lineAlign=s.get("lineAlign","start"),n.snapToLines=s.get("snapToLines",!0),n.size=s.get("size",100),n.align=s.get("align","middle"),n.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},n.align),n.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},n.align)}((Oi.prototype=Ii(Error.prototype)).constructor=Oi).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Mi.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var ji={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"â","&rlm;":"â","&nbsp;":"Â "},Bi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ui={v:"title",lang:"lang"},Fi={rt:"ruby"};function Hi(o,i){function e(){if(!i)return null;var e,t=i.match(/^([^<]*)(<[^>]*>?)?/);return e=t[1]?t[1]:t[2],i=i.substr(e.length),e}function t(e){return ji[e]}function n(e){for(;f=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(f[0],t);return e}function r(e,t){var i=Bi[e];if(!i)return null;var n=o.document.createElement(i);n.localName=i;var r=Ui[e];return r&&t&&(n[r]=t.trim()),n}for(var s,a,l,u=o.document.createElement("div"),c=u,d=[];null!==(s=e());)if("<"!==s[0])c.appendChild(o.document.createTextNode(n(s)));else{if("/"===s[1]){d.length&&d[d.length-1]===s.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var h,p=Di(s.substr(1,s.length-2));if(p){h=o.document.createProcessingInstruction("timestamp",p),c.appendChild(h);continue}var f=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f)continue;if(!(h=r(f[1],f[3])))continue;if(a=c,Fi[(l=h).localName]&&Fi[l.localName]!==a.localName)continue;f[2]&&(h.className=f[2].substr(1).replace("."," ")),d.push(f[1]),c.appendChild(h),c=h}return u}var qi=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function zi(e){for(var t=0;t<qi.length;t++){var i=qi[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function Wi(){}function Vi(e,t,i){Wi.call(this),this.cue=t,this.cueDiv=Hi(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}function o(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?n[e.length=0]:i}return"ruby"===t.tagName?o(e):t.childNodes?(r(e,t),o(e)):void 0}for(r(t,e);i=o(t);)for(var n=0;n<i.length;n++)if(zi(i.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"middle":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Gi(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function Xi(e,t,a,l){var i=new Gi(t),n=t.cue,r=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(n),o=[];if(n.snapToLines){var s;switch(n.vertical){case"":o=["+y","-y"],s="height";break;case"rl":o=["+x","-x"],s="width";break;case"lr":o=["-x","+x"],s="width"}var u=i.lineHeight,c=u*Math.round(r),d=a[s]+u,h=o[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),r<0&&(c+=""===n.vertical?a.height:a.width,o=o.reverse()),i.move(h,c)}else{var p=i.lineHeight/a.height*100;switch(n.lineAlign){case"middle":r-=p/2;break;case"end":r-=p}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(r,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(r,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(r,"%")})}o=["+y","-x","+x","-y"],i=new Gi(t)}var f=function(e,t){for(var i,n=new Gi(e),r=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(a,t[o])||e.within(a)&&e.overlapsAny(l);)e.move(t[o]);if(e.within(a))return e;var s=e.intersectPercentage(a);s<r&&(i=new Gi(e),r=s),e=new Gi(n)}return i||n}(i,o);t.move(f.toCSSCompatValues(a))}function Yi(){}Wi.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Wi.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Vi.prototype=Ii(Wi.prototype)).constructor=Vi,Gi.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Gi.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Gi.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Gi.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Gi.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Gi.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Gi.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Gi.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},Yi.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Yi.convertCueToDOMTree=function(e,t){return e&&t?Hi(e,t):null},Yi.processCues=function(n,r,e){if(!n||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var o=n.document.createElement("div");if(o.style.position="absolute",o.style.left="0",o.style.right="0",o.style.top="0",o.style.bottom="0",o.style.margin="1.5%",e.appendChild(o),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(r)){var s=[],a=Gi.getSimpleBoxPosition(o),l={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var e,t,i=0;i<r.length;i++)t=r[i],e=new Vi(n,t,l),o.appendChild(e.div),Xi(0,e,a,s),t.displayState=e.div,s.push(Gi.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)o.appendChild(r[t].displayState)},(Yi.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Oi))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,o=this;function i(){for(var e=o.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,o.buffer=e.substr(t),i}e&&(o.buffer+=o.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===o.state){if(!/\r\n|\n/.test(o.buffer))return this;var r=(n=i()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Oi(Oi.Errors.BadSignature);o.state="HEADER"}for(var s=!1;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(s?s=!1:n=i(),o.state){case"HEADER":/:/.test(n)?(t=n).match(/X-TIMESTAMP-MAP/)?Ri(t,function(e,t){switch(e){case"X-TIMESTAMP-MAP":i=t,n=new Mi,Ri(i,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",Di(t))}},/[^\d]:/,/,/),o.ontimestampmap&&o.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}var i,n},/=/):Ri(t,function(e,t){switch(e){case"Region":!function(e){var r=new Mi;if(Ri(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var n=new Mi;if(n.percent("x",i[0]),n.percent("y",i[1]),!n.has("x")||!n.has("y"))break;r.set(e+"X",n.get("x")),r.set(e+"Y",n.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new(o.vttjs.VTTRegion||o.window.VTTRegion);t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),o.onregion&&o.onregion(t),o.regionList.push({id:r.get("id"),region:t})}}(t)}},/:/):n||(o.state="ID");continue;case"NOTE":n||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){o.state="NOTE";break}if(!n)continue;if(o.cue=new(o.vttjs.VTTCue||o.window.VTTCue)(0,0,""),o.state="CUE",-1===n.indexOf("--\x3e")){o.cue.id=n;continue}case"CUE":try{Ni(n,o.cue,o.regionList)}catch(e){o.reportOrThrowError(e),o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("--\x3e");if(!n||a&&(s=!0)){o.oncue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}o.cue.text&&(o.cue.text+="\n"),o.cue.text+=n;continue;case"BADCUE":n||(o.state="ID");continue}}}catch(e){o.reportOrThrowError(e),"CUETEXT"===o.state&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state="INITIAL"===o.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Oi(Oi.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var $i=Yi,Ki=Object.freeze({default:$i,__moduleExports:$i}),Qi={"":1,lr:1,rl:1},Ji={start:1,middle:1,end:1,left:1,right:1};function Zi(e){return"string"==typeof e&&!!Ji[e.toLowerCase()]&&e.toLowerCase()}function en(e,t,i){this.hasBeenReset=!1;var n="",r=!1,o=e,s=t,a=i,l=null,u="",c=!0,d="auto",h="start",p=50,f="middle",g=50,m="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(e){a=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t,i="string"==typeof(t=e)&&!!Qi[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");u=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Zi(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Zi(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(e){var t=Zi(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}}}),this.displayState=void 0}en.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var tn=en,nn=Object.freeze({default:tn,__moduleExports:tn}),rn={"":!0,up:!0};function on(e){return"number"==typeof e&&0<=e&&e<=100}var sn=function(){var t=100,i=3,n=0,r=100,o=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!on(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!on(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!on(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!on(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!on(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){var t,i="string"==typeof(t=e)&&!!rn[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");a=i}}})},an=Object.freeze({default:sn,__moduleExports:sn}),ln=Ki&&$i||Ki,un=nn&&tn||nn,cn=an&&sn||an,dn=t(function(e){var t=e.exports={WebVTT:ln,VTTCue:un,VTTRegion:cn};m.vttjs=t,m.WebVTT=t.WebVTT;var i=t.VTTCue,n=t.VTTRegion,r=m.VTTCue,o=m.VTTRegion;t.shim=function(){m.VTTCue=i,m.VTTRegion=n},t.restore=function(){m.VTTCue=r,m.VTTRegion=o},m.VTTCue||t.shim()});dn.WebVTT,dn.VTTCue,dn.VTTRegion;var hn=function(t){function r(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y(this,r),i.reportTouchActivity=!1;var n=_(this,t.call(this,null,i,e));return n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Pi.names.forEach(function(e){var t=Pi[e];i&&i[t.getterName]&&(n[t.privateName]=i[t.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===i["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===i.nativeCaptions||!1===i.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==i.nativeCaptions&&!0!==i.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new Pi.text.ListClass,n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}return v(r,t),r.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},r.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Le(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},r.prototype.onDurationChange=function(e){this.duration_=this.duration()},r.prototype.buffered=function(){return vt(0,0)},r.prototype.bufferedPercent=function(){return _t(this.buffered(),this.duration_)},r.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.dispose=function(){this.clearTracks(Ai.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},r.prototype.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],i=t.length;i--;){var n=t[i];"text"===e&&r.removeRemoteTextTrack(n),t.removeTrack(n)}})},r.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},r.prototype.reset=function(){},r.prototype.error=function(e){return void 0!==e&&(this.error_=new Et(e),this.trigger("error")),this.error_},r.prototype.played=function(){return this.hasStarted_?vt(0,0):vt()},r.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.initTrackListeners=function(){var r=this;Ai.names.forEach(function(e){var t=Ai[e],i=function(){r.trigger(e+"trackchange")},n=r[t.getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),r.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)})})},r.prototype.addWebVttScript_=function(){var e=this;if(!m.WebVTT)if(h.body.contains(this.el())){if(!this.options_["vtt.js"]&&k(dn)&&0<Object.keys(dn).length)return void this.trigger("vttjsloaded");var t=h.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),m.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},r.prototype.emulateTextTracks=function(){var e=this,i=this.textTracks(),t=this.remoteTextTracks(),n=function(e){return i.addTrack(e.track)},r=function(e){return i.removeTrack(e.track)};t.on("addtrack",n),t.on("removetrack",r),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},s=function(){o();for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",o),"showing"===t.mode&&t.addEventListener("cuechange",o)}};s(),i.addEventListener("change",s),i.addEventListener("addtrack",s),i.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",r),i.removeEventListener("change",s),i.removeEventListener("addtrack",s),i.removeEventListener("removetrack",s);for(var e=0;e<i.length;e++)i[e].removeEventListener("cuechange",o)})},r.prototype.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var s=new Pi.text.TrackClass(r);return o.addTrack(s),s}(this,e,t,i)},r.prototype.createRemoteTextTrack=function(e){var t=We(e,{tech:this});return new Li.remoteTextEl.TrackClass(t)},r.prototype.addRemoteTextTrack=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=this.createRemoteTextTrack(t);return!0!==i&&!1!==i&&(p.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==i&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(n.track)}),n},r.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.prototype.getVideoPlaybackQuality=function(){return{}},r.prototype.setPoster=function(){},r.prototype.playsinline=function(){},r.prototype.setPlaysinline=function(){},r.prototype.overrideNativeAudioTracks=function(){},r.prototype.overrideNativeVideoTracks=function(){},r.prototype.canPlayType=function(){return""},r.canPlayType=function(){return""},r.canPlaySource=function(e,t){return r.canPlayType(e.type)},r.isTech=function(e){return e.prototype instanceof r||e instanceof r||e===r},r.registerTech=function(e,t){if(r.techs_||(r.techs_={}),!r.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!r.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!r.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ze(e),r.techs_[e]=t,"Tech"!==e&&r.defaultTechOrder_.push(e),t},r.getTech=function(e){if(e)return e=ze(e),r.techs_&&r.techs_[e]?r.techs_[e]:m&&m.videojs&&m.videojs[e]?(p.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),m.videojs[e]):void 0},r}(Ve);Pi.names.forEach(function(e){var t=Pi[e];hn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),hn.prototype.featuresVolumeControl=!0,hn.prototype.featuresFullscreenResize=!1,hn.prototype.featuresPlaybackRate=!1,hn.prototype.featuresProgressEvents=!1,hn.prototype.featuresSourceset=!1,hn.prototype.featuresTimeupdateEvents=!1,hn.prototype.featuresNativeTextTracks=!1,hn.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),void 0===t&&(t=i.length),i.splice(t,0,e)},r.canPlayType=function(e){for(var t=r.sourceHandlers||[],i=void 0,n=0;n<t.length;n++)if(i=t[n].canPlayType(e))return i;return""},r.selectSourceHandler=function(e,t){for(var i=r.sourceHandlers||[],n=0;n<i.length;n++)if(i[n].canHandleSource(e,t))return i[n];return null},r.canPlaySource=function(e,t){var i=r.selectSourceHandler(e,t);return i?i.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:p.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ve.registerComponent("Tech",hn),hn.registerTech("Tech",hn),hn.defaultTechOrder_=[];var pn={},fn={},gn={};function mn(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r="call"+ze(i),o=e.reduce(bn(r),n),s=o===gn,a=s?null:t[i](o);return function(e,t,i,n){for(var r=e.length-1;0<=r;r--){var o=e[r];o[t]&&o[t](n,i)}}(e,i,a,s),a}var yn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},vn={setCurrentTime:1},_n={play:1,pause:1};function bn(i){return function(e,t){return e===gn?gn:t[i]?t[i](e):e}}var Tn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Sn=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=$t(e);return Tn[t.toLowerCase()]||""};function Cn(e){var t=Sn(e.src);return!e.type&&t&&(e.type=t),e}var wn=function(u){function c(e,t,i){y(this,c);var n=We({createEl:!1},t),r=_(this,u.call(this,e,n,i));if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var o=0,s=t.playerOptions.techOrder;o<s.length;o++){var a=ze(s[o]),l=hn.getTech(a);if(a||(l=Ve.getComponent(a)),l&&l.isSupported()){e.loadTech_(a);break}}return r}return v(c,u),c}(Ve);Ve.registerComponent("MediaLoader",wn);var kn=function(r){function n(e,t){y(this,n);var i=_(this,r.call(this,e,t));return i.emitTapEvents(),i.enable(),i}return v(n,r),n.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t=C({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&p.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=C({role:"button"},i),this.tabIndex_=t.tabIndex;var n=r.prototype.createEl.call(this,e,t,i);return this.createControlTextEl(n),n},n.prototype.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},n.prototype.createControlTextEl=function(e){return this.controlTextEl_=M("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.prototype.controlText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,R(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},n.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},n.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},n.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},n.prototype.handleClick=function(e){},n.prototype.handleFocus=function(e){ve(h,"keydown",Le(this,this.handleKeyPress))},n.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):r.prototype.handleKeyPress&&r.prototype.handleKeyPress.call(this,e)},n.prototype.handleBlur=function(e){_e(h,"keydown",Le(this,this.handleKeyPress))},n}(Ve);Ve.registerComponent("ClickableComponent",kn);var En=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.update(),e.on("posterchange",Le(i,i.update)),i}return v(r,n),r.prototype.dispose=function(){this.player().off("posterchange",this.update),n.prototype.dispose.call(this)},r.prototype.createEl=function(){return M("div",{className:"vjs-poster",tabIndex:-1})},r.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},r.prototype.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},r.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},r}(kn);Ve.registerComponent("PosterImage",En);var xn="#222",An={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Ln(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function Pn(e,t,i){try{e.style[t]=i}catch(e){return}}var In=function(r){function o(i,e,t){y(this,o);var n=_(this,r.call(this,i,e,t));return i.on("loadstart",Le(n,n.toggleDisplay)),i.on("texttrackchange",Le(n,n.updateDisplay)),i.on("loadstart",Le(n,n.preselectTrack)),i.ready(Le(n,function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",Le(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),n}return v(o,r),o.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage,n=void 0,r=void 0,o=void 0,s=0;s<t.length;s++){var a=t[s];i&&i.enabled&&i.language===a.language?a.kind===i.kind?o=a:o||(o=a):i&&!i.enabled?r=n=o=null:a.default&&("descriptions"!==a.kind||n?a.kind in e&&!r&&(r=a):n=a)}o?o.mode="showing":r?r.mode="showing":n&&(n.mode="showing")},o.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},o.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},o.prototype.clearDisplay=function(){"function"==typeof m.WebVTT&&m.WebVTT.processCues(m,[],this.el_)},o.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,i=null,n=e.length;n--;){var r=e[n];"showing"===r.mode&&("descriptions"===r.kind?t=r:i=r)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},o.prototype.updateForTrack=function(e){if("function"==typeof m.WebVTT&&e.activeCues){for(var t=[],i=0;i<e.activeCues.length;i++)t.push(e.activeCues[i]);if(m.WebVTT.processCues(m,t,this.el_),this.player_.textTrackSettings)for(var n=this.player_.textTrackSettings.getValues(),r=t.length;r--;){var o=t[r];if(o){var s=o.displayState;if(n.color&&(s.firstChild.style.color=n.color),n.textOpacity&&Pn(s.firstChild,"color",Ln(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(s.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Pn(s.firstChild,"backgroundColor",Ln(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Pn(s,"backgroundColor",Ln(n.windowColor,n.windowOpacity)):s.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+xn:"raised"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+xn:"depressed"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+xn:"uniform"===n.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+xn)),n.fontPercent&&1!==n.fontPercent){var a=m.parseFloat(s.style.fontSize);s.style.fontSize=a*n.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=An[n.fontFamily])}}}},o}(Ve);Ve.registerComponent("TextTrackDisplay",In);var On=function(r){function e(){return y(this,e),_(this,r.apply(this,arguments))}return v(e,r),e.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=M("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),n=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n},e}(Ve);Ve.registerComponent("LoadingSpinner",On);var Dn=function(t){function e(){return y(this,e),_(this,t.apply(this,arguments))}return v(e,t),e.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t=C({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=C({type:"button"},i);var n=Ve.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(n),n},e.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.constructor.name;return p.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Ve.prototype.addChild.call(this,e,t)},e.prototype.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},e.prototype.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},e.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(kn);Ve.registerComponent("Button",Dn);var Mn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-big-play-button"},r.prototype.handleClick=function(e){var t=this.player_.play();if(!(this.mouseused_&&e.clientX&&e.clientY)){var i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(n){var r=function(){return n.focus()};At(t)?t.then(r,function(){}):this.setTimeout(r,1)}else this.player_.focus()}},r.prototype.handleKeyPress=function(e){this.mouseused_=!1,n.prototype.handleKeyPress.call(this,e)},r.prototype.handleMouseDown=function(e){this.mouseused_=!0},r}(Dn);Mn.prototype.controlText_="Play Video",Ve.registerComponent("BigPlayButton",Mn);var Rn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.controlText(t&&t.controlText||i.localize("Close")),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},r}(Dn);Ve.registerComponent("CloseButton",Rn);var Nn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on(e,"play",i.handlePlay),i.on(e,"pause",i.handlePause),i.on(e,"ended",i.handleEnded),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},r.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},r}(Dn);Nn.prototype.controlText_="Play",Ve.registerComponent("PlayToggle",Nn);var jn=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),(r=0<r||0<s?r+":":"")+(n=((r||10<=o)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)},Bn=jn;function Un(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;return Bn(e,t)}var Fn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.throttledUpdateContent=Pe(Le(i,i.updateContent),25),i.on(e,"timeupdate",i.throttledUpdateContent),i}return v(r,n),r.prototype.createEl=function(e){var t=this.buildCSSClass(),i=n.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"Â </span>"});return this.contentEl_=M("span",{className:t+"-display"},{"aria-live":"off"}),this.updateTextNode_(),i.appendChild(this.contentEl_),i},r.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},r.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=h.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},r.prototype.formatTime_=function(e){return Un(e)},r.prototype.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},r.prototype.updateContent=function(e){},r}(Ve);Fn.prototype.labelText_="Time",Fn.prototype.controlText_="Time",Ve.registerComponent("TimeDisplay",Fn);var Hn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on(e,"ended",i.handleEnded),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-current-time"},r.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},r.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},r}(Fn);Hn.prototype.labelText_="Current Time",Hn.prototype.controlText_="Current Time",Ve.registerComponent("CurrentTimeDisplay",Hn);var qn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on(e,"durationchange",i.updateContent),i.on(e,"loadedmetadata",i.throttledUpdateContent),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-duration"},r.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},r}(Fn);qn.prototype.labelText_="Duration",qn.prototype.controlText_="Duration",Ve.registerComponent("DurationDisplay",qn);var zn=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return v(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Ve);Ve.registerComponent("TimeDivider",zn);var Wn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on(e,"durationchange",i.throttledUpdateContent),i.on(e,"ended",i.handleEnded),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-remaining-time"},r.prototype.formatTime_=function(e){return"-"+n.prototype.formatTime_.call(this,e)},r.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},r.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},r}(Fn);Wn.prototype.labelText_="Remaining Time",Wn.prototype.controlText_="Remaining Time",Ve.registerComponent("RemainingTimeDisplay",Wn);var Vn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return v(r,n),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=M("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"Â </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},r.prototype.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},r.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},r}(Ve);Ve.registerComponent("LiveDisplay",Vn);var Gn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return v(r,n),r.prototype.enabled=function(){return this.enabled_},r.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.className=t.className+" vjs-slider",t=C({tabIndex:0},t),i=C({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),n.prototype.createEl.call(this,e,t,i)},r.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),G(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},r.prototype.handleMouseMove=function(e){},r.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;X(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},r.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var i=(100*e).toFixed(2)+"%",n=t.el().style;return this.vertical()?n.height=i:n.width=i,e}}},r.prototype.calculateDistance=function(e){var t=K(this.el_,e);return this.vertical()?t.y:t.x},r.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},r.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},r.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},r.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},r.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},r}(Ve);Ve.registerComponent("Slider",Gn);var Xn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.partEls_=[],i.on(e,"progress",i.update),i}return v(r,n),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},r.prototype.dispose=function(){this.partEls_=null,n.prototype.dispose.call(this)},r.prototype.update=function(e){var t=this.player_.buffered(),i=this.player_.duration(),n=this.player_.bufferedEnd(),r=this.partEls_,o=function(e,t){var i=e/t||0;return 100*(1<=i?1:i)+"%"};this.el_.style.width=o(n,i);for(var s=0;s<t.length;s++){var a=t.start(s),l=t.end(s),u=r[s];u||(u=this.el_.appendChild(M()),r[s]=u),u.style.left=o(a,n),u.style.width=o(l-a,n)}for(var c=r.length;c>t.length;c--)this.el_.removeChild(r[c-1]);r.length=t.length},r}(Ve);Ve.registerComponent("LoadProgressBar",Xn);var Yn=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return v(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,t,i){var n=Y(this.el_),r=Y(this.player_.el()),o=e.width*t;if(r&&n){var s=e.left-r.left+o,a=e.width-o+(r.right-e.right),l=n.width/2;s<l?l+=l-s:a<l&&(l=a),l<0?l=0:l>n.width&&(l=n.width),this.el_.style.right="-"+l+"px",R(this.el_,i)}},t}(Ve);Ve.registerComponent("TimeTooltip",Yn);var $n=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return v(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(i,n){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=Un(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),t=r.getChild("timeTooltip");t&&t.update(i,n,e)})},t}(Ve);$n.prototype.options_={children:[]},it||rt||$n.prototype.options_.children.push("timeTooltip"),Ve.registerComponent("PlayProgressBar",$n);var Kn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.update=Pe(Le(i,i.update),25),i}return v(r,n),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.prototype.update=function(i,n){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=r.player_.duration(),t=Un(n*e,e);r.el_.style.left=i.width*n+"px",r.getChild("timeTooltip").update(i,n,t)})},r}(Ve);Kn.prototype.options_={children:["timeTooltip"]},Ve.registerComponent("MouseTimeDisplay",Kn);var Qn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.setEventHandlers_(),i}return v(r,n),r.prototype.setEventHandlers_=function(){var e=this;this.update=Pe(Le(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.prototype.update_=function(e,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Un(e,i),Un(i,i)],"{1} of {2}")),this.bar.update(Y(this.el_),t)},r.prototype.update=function(e){var t=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t},r.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},r.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return 1<=e?1:e||0},r.prototype.handleMouseDown=function(e){ie(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,e))},r.prototype.handleMouseMove=function(e){if(ie(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},r.prototype.enable=function(){n.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},r.prototype.disable=function(){n.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},r.prototype.handleMouseUp=function(e){n.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Lt(this.player_.play())},r.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},r.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},r.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,e)},r}(Gn);Qn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},it||rt||Qn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Qn.prototype.playerEvent="timeupdate",Ve.registerComponent("SeekBar",Qn);var Jn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.handleMouseMove=Pe(Le(i,i.handleMouseMove),25),i.throttledHandleMouseSeek=Pe(Le(i,i.handleMouseSeek),25),i.enable(),i}return v(r,n),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("mouseTimeDisplay"),n=t.el(),r=Y(n),o=K(n,e).x;1<o?o=1:o<0&&(o=0),i&&i.update(r,o)}},r.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},r.prototype.enabled=function(){return this.enabled_},r.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},r.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},r.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},r}(Ve);Jn.prototype.options_={children:["seekBar"]},Ve.registerComponent("ProgressControl",Jn);var Zn=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on(e,"fullscreenchange",i.handleFullscreenChange),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},r.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},r}(Dn);Zn.prototype.controlText_="Fullscreen",Ve.registerComponent("FullscreenToggle",Zn);var er=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},tr=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return v(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Ve);Ve.registerComponent("VolumeLevel",tr);var ir=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on("slideractive",i.updateLastVolume_),i.on(e,"volumechange",i.updateARIAAttributes),e.ready(function(){return i.updateARIAAttributes()}),i}return v(r,n),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.prototype.handleMouseDown=function(e){ie(e)&&n.prototype.handleMouseDown.call(this,e)},r.prototype.handleMouseMove=function(e){ie(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},r.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},r.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},r.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},r}(Gn);ir.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ir.prototype.playerEvent="volumechange",Ve.registerComponent("VolumeBar",ir);var nr=function(n){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,r),t.vertical=t.vertical||!1,(void 0===t.volumeBar||k(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical);var i=_(this,n.call(this,e,t));return er(i,e),i.throttledHandleMouseMove=Pe(Le(i,i.handleMouseMove),25),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}return v(r,n),r.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},r.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},r.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},r.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},r}(Ve);nr.prototype.options_={children:["volumeBar"]},Ve.registerComponent("VolumeControl",nr);var rr=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return er(i,e),i.on(e,["loadstart","volumechange"],i.update),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},r.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)U(this.el_,"vjs-vol-"+i);B(this.el_,"vjs-vol-"+t)},r.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},r}(Dn);rr.prototype.controlText_="Mute",Ve.registerComponent("MuteToggle",rr);var or=function(n){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,r),void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||k(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline);var i=_(this,n.call(this,e,t));return er(i,e),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return v(r,n),r.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},r.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},r}(Ve);or.prototype.options_={children:["muteToggle","volumeControl"]},Ve.registerComponent("VolumePanel",or);var sr=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return t&&(i.menuButton_=t.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return v(r,n),r.prototype.addItem=function(t){this.addChild(t),t.on("click",Le(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},r.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=M(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ve(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},r.prototype.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},r.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},r.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.prototype.focus=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},r}(Ve);Ve.registerComponent("Menu",sr);var ar=function(r){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,o);var i=_(this,r.call(this,e,t));i.menuButton_=new Dn(e,t),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var n=Dn.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}return v(o,r),o.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},o.prototype.createMenu=function(){var e=new sr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=M("li",{className:"vjs-menu-title",innerHTML:ze(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),N(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},o.prototype.createItems=function(){},o.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},o.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Dn.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},o.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+r.prototype.buildCSSClass.call(this)},o.prototype.controlText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},o.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",Le(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},o.prototype.focus=function(){this.menuButton_.focus()},o.prototype.blur=function(){this.menuButton_.blur()},o.prototype.handleFocus=function(){ve(h,"keydown",Le(this,this.handleKeyPress))},o.prototype.handleBlur=function(){_e(h,"keydown",Le(this,this.handleKeyPress))},o.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},o.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},o.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),it&&O())return;this.menu.focus()}},o.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},o.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},o.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},o}(Ve);Ve.registerComponent("MenuButton",ar);var lr=function(o){function s(e,t){y(this,s);var i=t.tracks,n=_(this,o.call(this,e,t));if(n.items.length<=1&&n.hide(),!i)return _(n);var r=Le(n,n.update);return i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),n.player_.on("ready",r),n.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}),n}return v(s,o),s}(ar);Ve.registerComponent("TrackButton",lr);var ur=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.selectable=t.selectable,i.isSelected_=t.selected||!1,i.selected(i.isSelected_),i.selectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitem"),i}return v(r,n),r.prototype.createEl=function(e,t,i){return this.nonIconControl=!0,n.prototype.createEl.call(this,"li",C({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),i)},r.prototype.handleClick=function(e){this.selected(!0)},r.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},r}(kn);Ve.registerComponent("MenuItem",ur);var cr=function(l){function u(e,t){y(this,u);var i=t.track,n=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected="showing"===i.mode;var r=_(this,l.call(this,e,t));r.track=i;var o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r.handleTracksChange.apply(r,t)},s=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r.handleSelectedLanguageChange.apply(r,t)};if(e.on(["loadstart","texttrackchange"],o),n.addEventListener("change",o),n.addEventListener("selectedlanguagechange",s),r.on("dispose",function(){e.off(["loadstart","texttrackchange"],o),n.removeEventListener("change",o),n.removeEventListener("selectedlanguagechange",s)}),void 0===n.onchange){var a=void 0;r.on(["tap","click"],function(){if("object"!==g(m.Event))try{a=new m.Event("change")}catch(e){}a||(a=h.createEvent("Event")).initEvent("change",!0,!0),n.dispatchEvent(a)})}return r.handleTracksChange(),r}return v(u,l),u.prototype.handleClick=function(e){var t=this.track.kind,i=this.track.kinds,n=this.player_.textTracks();if(i||(i=[t]),l.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var o=n[r];o===this.track&&-1<i.indexOf(o.kind)?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},u.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},u.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},u.prototype.dispose=function(){this.track=null,l.prototype.dispose.call(this)},u}(ur);Ve.registerComponent("TextTrackMenuItem",cr);var dr=function(i){function n(e,t){return y(this,n),t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,_(this,i.call(this,e,t))}return v(n,i),n.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var o=t[n];if(-1<this.options_.kinds.indexOf(o.kind)&&"showing"===o.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},n.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var o=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(o.kind)&&"showing"===o.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},n}(cr);Ve.registerComponent("OffTextTrackMenuItem",dr);var hr=function(i){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return y(this,n),t.tracks=e.textTracks(),_(this,i.call(this,e,t))}return v(n,i),n.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:cr,i=void 0;this.label_&&(i=this.label_+" off"),e.push(new dr(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var o=n[r];if(-1<this.kinds_.indexOf(o.kind)){var s=new t(this.player_,{track:o,selectable:!0});s.addClass("vjs-"+o.kind+"-menu-item"),e.push(s)}}return e},n}(lr);Ve.registerComponent("TextTrackButton",hr);var pr=function(s){function a(e,t){y(this,a);var i=t.track,n=t.cue,r=e.currentTime();t.selectable=!0,t.label=n.text,t.selected=n.startTime<=r&&r<n.endTime;var o=_(this,s.call(this,e,t));return o.track=i,o.cue=n,i.addEventListener("cuechange",Le(o,o.update)),o}return v(a,s),a.prototype.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},a.prototype.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},a}(ur);Ve.registerComponent("ChaptersTrackMenuItem",pr);var fr=function(n){function r(e,t,i){return y(this,r),_(this,n.call(this,e,t,i))}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},r.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),n.prototype.update.call(this)},r.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},r.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var i=e[t];if(i.kind===this.kind_)return i}},r.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ze(this.kind_))},r.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},r.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],o=new pr(this.player_,{track:this.track_,cue:r});e.push(o)}return e},r}(hr);fr.prototype.kind_="chapters",fr.prototype.controlText_="Chapters",Ve.registerComponent("ChaptersButton",fr);var gr=function(s){function a(e,t,i){y(this,a);var n=_(this,s.call(this,e,t,i)),r=e.textTracks(),o=Le(n,n.handleTracksChange);return r.addEventListener("change",o),n.on("dispose",function(){r.removeEventListener("change",o)}),n}return v(a,s),a.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var o=t[n];if(o.kind!==this.kind_&&"showing"===o.mode){i=!0;break}}i?this.disable():this.enable()},a.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},a.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},a}(hr);gr.prototype.kind_="descriptions",gr.prototype.controlText_="Descriptions",Ve.registerComponent("DescriptionsButton",gr);var mr=function(n){function r(e,t,i){return y(this,r),_(this,n.call(this,e,t,i))}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},r}(hr);mr.prototype.kind_="subtitles",mr.prototype.controlText_="Subtitles",Ve.registerComponent("SubtitlesButton",mr);var yr=function(n){function r(e,t){y(this,r),t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem";var i=_(this,n.call(this,e,t));return i.addClass("vjs-texttrack-settings"),i.controlText(", opens "+t.kind+" settings dialog"),i}return v(r,n),r.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},r}(cr);Ve.registerComponent("CaptionSettingsMenuItem",yr);var vr=function(n){function r(e,t,i){return y(this,r),_(this,n.call(this,e,t,i))}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},r.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new yr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,e)},r}(hr);vr.prototype.kind_="captions",vr.prototype.controlText_="Captions",Ve.registerComponent("CaptionsButton",vr);var _r=function(r){function e(){return y(this,e),_(this,r.apply(this,arguments))}return v(e,r),e.prototype.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),n+="</span>",r.prototype.createEl.call(this,e,C({innerHTML:n},t),i)},e}(cr);Ve.registerComponent("SubsCapsMenuItem",_r);var br=function(n){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,r);var i=_(this,n.call(this,e,t));return i.label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)&&(i.label_="captions"),i.menuButton_.controlText(ze(i.label_)),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},r.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new yr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,e,_r)},r}(hr);br.prototype.kinds_=["captions","subtitles"],br.prototype.controlText_="Subtitles",Ve.registerComponent("SubsCapsButton",br);var Tr=function(s){function a(e,t){y(this,a);var i=t.track,n=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled;var r=_(this,s.call(this,e,t));r.track=i;var o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r.handleTracksChange.apply(r,t)};return n.addEventListener("change",o),r.on("dispose",function(){n.removeEventListener("change",o)}),r}return v(a,s),a.prototype.handleClick=function(e){var t=this.player_.audioTracks();s.prototype.handleClick.call(this,e);for(var i=0;i<t.length;i++){var n=t[i];n.enabled=n===this.track}},a.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},a}(ur);Ve.registerComponent("AudioTrackMenuItem",Tr);var Sr=function(i){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return y(this,n),t.tracks=e.audioTracks(),_(this,i.call(this,e,t))}return v(n,i),n.prototype.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},n.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},n.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new Tr(this.player_,{track:n,selectable:!0}))}return e},n}(lr);Sr.prototype.controlText_="Audio Track",Ve.registerComponent("AudioTrackButton",Sr);var Cr=function(o){function s(e,t){y(this,s);var i=t.rate,n=parseFloat(i,10);t.label=i,t.selected=1===n,t.selectable=!0;var r=_(this,o.call(this,e,t));return r.label=i,r.rate=n,r.on(e,"ratechange",r.update),r}return v(s,o),s.prototype.handleClick=function(e){o.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},s.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},s}(ur);Cr.prototype.contentElType="button",Ve.registerComponent("PlaybackRateMenuItem",Cr);var wr=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.updateVisibility(),i.updateLabel(),i.on(e,"loadstart",i.updateVisibility),i.on(e,"ratechange",i.updateLabel),i}return v(r,n),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this);return this.labelEl_=M("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},r.prototype.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},r.prototype.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},r.prototype.createMenu=function(){var e=new sr(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;0<=i;i--)e.addChild(new Cr(this.player(),{rate:t[i]+"x"}));return e},r.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},r.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},r.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},r.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},r}(ar);wr.prototype.controlText_="Playback Rate",Ve.registerComponent("PlaybackRateMenuButton",wr);var kr=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return v(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Ve);Ve.registerComponent("Spacer",kr);var Er=function(t){function e(){return y(this,e),_(this,t.apply(this,arguments))}return v(e,t),e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="Â ",e},e}(kr);Ve.registerComponent("CustomControlSpacer",Er);var xr=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return v(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Ve);xr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Ve.registerComponent("ControlBar",xr);var Ar=function(n){function r(e,t){y(this,r);var i=_(this,n.call(this,e,t));return i.on(e,"error",i.open),i}return v(r,n),r.prototype.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},r.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},r}(Ot);Ar.prototype.options_=We(Ot.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ve.registerComponent("ErrorDisplay",Ar);var Lr="vjs-text-track-settings",Pr=["#000","Black"],Ir=["#00F","Blue"],Or=["#0FF","Cyan"],Dr=["#0F0","Green"],Mr=["#F0F","Magenta"],Rr=["#F00","Red"],Nr=["#FFF","White"],jr=["#FF0","Yellow"],Br=["1","Opaque"],Ur=["0.5","Semi-Transparent"],Fr=["0","Transparent"],Hr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Pr,Nr,Rr,Dr,Ir,jr,Mr,Or]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Br,Ur,Fr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Nr,Pr,Rr,Dr,Ir,jr,Mr,Or]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Br,Ur]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Fr,Ur,Br]}};function qr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Hr.windowColor.options=Hr.backgroundColor.options;var zr=function(n){function r(e,t){y(this,r),t.temporary=!1;var i=_(this,n.call(this,e,t));return i.updateDisplay=Le(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=M("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),S(Hr,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return v(r,n),r.prototype.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},r.prototype.createElSelect_=function(e){var i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",r=Hr[e],o=r.id.replace("%s",this.id_),s=[t,o].join(" ").trim();return["<"+n+' id="'+o+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=o+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},r.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},r.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},r.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},r.prototype.createElColors_=function(){return M("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.prototype.createElFont_=function(){return M("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return M("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.prototype.label=function(){return this.localize("Caption Settings Dialog")},r.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.prototype.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.prototype.getValues=function(){var s=this;return function(i,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return T(i).reduce(function(e,t){return n(e,i[t],t)},e)}(Hr,function(e,t,i){var n,r,o=(n=s.$(t.selector),r=t.parser,qr(n.options[n.options.selectedIndex].value,r));return void 0!==o&&(e[i]=o),e},{})},r.prototype.setValues=function(i){var n=this;S(Hr,function(e,t){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(qr(e.options[n].value,i)===t){e.selectedIndex=n;break}}(n.$(e.selector),i[t],e.parser)})},r.prototype.setDefaults=function(){var i=this;S(Hr,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})},r.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(m.localStorage.getItem(Lr))}catch(e){p.warn(e)}e&&this.setValues(e)},r.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?m.localStorage.setItem(Lr,JSON.stringify(e)):m.localStorage.removeItem(Lr)}catch(e){p.warn(e)}}},r.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},r.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(h,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},r}(Ot);Ve.registerComponent("TextTrackSettings",zr);var Wr=function(o){function s(e,t){y(this,s);var i=t.ResizeObserver||m.ResizeObserver;null===t.ResizeObserver&&(i=!1);var n=We({createEl:!i},t),r=_(this,o.call(this,e,n));return r.ResizeObserver=t.ResizeObserver||m.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(n,r,o){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:m,a=void 0;return function(){var e=this,t=arguments,i=function(){i=a=null,o||n.apply(e,t)};!a&&o&&n.apply(e,t),s.clearTimeout(a),a=s.setTimeout(i,r)}}(function(){r.resizeHandler()},100,!1,e),i?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(e.el())):(r.loadListener_=function(){r.el_.contentWindow&&ve(r.el_.contentWindow,"resize",r.debouncedHandler_),r.off("load",r.loadListener_)},r.on("load",r.loadListener_)),r}return v(s,o),s.prototype.createEl=function(){return o.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},s.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},s.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&_e(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},s}(Ve);Ve.registerComponent("ResizeManager",Wr);var Vr=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var o=0;o<i.length;o++){var s=i[o].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},Gr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=h.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=h.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",m.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Xr=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},Yr=function(o){var s=o.el();if(!s.resetSourceWatch_){var t={},e=Xr([o.el(),m.HTMLMediaElement.prototype,m.Element.prototype,Gr],"innerHTML"),i=function(r){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=r.apply(s,t);return Vr(o),n}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=i(t[e]))}),Object.defineProperty(s,"innerHTML",We(e,{set:i(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},o.one("sourceset",s.resetSourceWatch_)}},$r=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Yt(m.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return m.Element.prototype.setAttribute.call(this,"src",e),e}}),Kr=d(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Qr=function(c){function d(e,t){y(this,d);var i=_(this,c.call(this,e,t)),n=e.source,r=!1;if(n&&(i.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(n):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,s=o.length,a=[];s--;){var l=o[s];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),r||i.el_.hasAttribute("crossorigin")||!Kt(l.src)||(r=!0)):a.push(l))}for(var u=0;u<a.length;u++)i.el_.removeChild(a[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&p.warn(f(Kr)),i.restoreMetadataTracksInIOSNativePlayer_(),(ft||et||st)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return v(d,c),d.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),d.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},d.prototype.setupSourcesetHandling_=function(){!function(n){if(n.featuresSourceset){var r=n.el();if(!r.resetSourceset_){var i=Xr([n.el(),m.HTMLMediaElement.prototype,$r],"src"),o=r.setAttribute,t=r.load;Object.defineProperty(r,"src",We(i,{set:function(e){var t=i.set.call(r,e);return n.triggerSourceset(r.src),t}})),r.setAttribute=function(e,t){var i=o.call(r,e,t);return/src/i.test(e)&&n.triggerSourceset(r.src),i},r.load=function(){var e=t.call(r);return Vr(n)||(n.triggerSourceset(""),Yr(n)),e},r.currentSrc?n.triggerSourceset(r.currentSrc):Vr(n)||Yr(n),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=t,r.setAttribute=o,Object.defineProperty(r,"src",i),r.resetSourceWatch_&&r.resetSourceWatch_()}}}}(this)},d.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var n=this.textTracks(),r=void 0,e=function(){r=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&r.push({track:t,storedMode:t.mode})}};e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)});var t=function e(){for(var t=0;t<r.length;t++){var i=r[t];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}n.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",t),n.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",t)})},d.prototype.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},d.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},d.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},d.prototype.proxyNativeTracksForType_=function(e){var n=this,t=Ai[e],r=this.el()[t.getterName],o=this[t.getterName]();if(this["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener){var s={change:function(e){o.trigger({type:"change",target:o,currentTarget:o,srcElement:o})},addtrack:function(e){o.addTrack(e.track)},removetrack:function(e){o.removeTrack(e.track)}},i=function(){for(var e=[],t=0;t<o.length;t++){for(var i=!1,n=0;n<r.length;n++)if(r[n]===o[t]){i=!0;break}i||e.push(o[t])}for(;e.length;)o.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(t){var i=s[t];r.addEventListener(t,i),n.on("dispose",function(e){return r.removeEventListener(t,i)})}),this.on("loadstart",i),this.on("dispose",function(e){return n.off("loadstart",i)})}},d.prototype.proxyNativeTracks_=function(){var t=this;Ai.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},d.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),d.disposeMediaElement(e),e=t}else{e=h.createElement("video");var i=We({},this.options_.tag&&q(this.options_.tag));ft&&!0===this.options_.nativeControlsForTouch||delete i.controls,H(e,C(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&W(e,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],r=0;r<n.length;r++){var o=n[r],s=this.options_[o];void 0!==s&&(s?W(e,o,o):V(e,o),e[o]=s)}return e},d.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},d.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){p(e,"Video is not ready. (Video.js)")}},d.prototype.duration=function(){var t=this;return this.el_.duration===1/0&&rt&&ut&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},d.prototype.width=function(){return this.el_.offsetWidth},d.prototype.height=function(){return this.el_.offsetHeight},d.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},d.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=m.navigator&&m.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},d.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},d.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},d.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},d.prototype.reset=function(){d.resetMediaElement(this.el_)},d.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},d.prototype.setControls=function(e){this.el_.controls=!!e},d.prototype.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):c.prototype.addTextTrack.call(this,e,t,i)},d.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,e);var t=h.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},d.prototype.addRemoteTextTrack=function(e,t){var i=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},d.prototype.removeRemoteTextTrack=function(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},d.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),m.performance&&"function"==typeof m.performance.now?e.creationTime=m.performance.now():m.performance&&m.performance.timing&&"number"==typeof m.performance.timing.navigationStart&&(e.creationTime=m.Date.now()-m.performance.timing.navigationStart),e},d}(hn);if(P()){Qr.TEST_VID=h.createElement("video");var Jr=h.createElement("track");Jr.kind="captions",Jr.srclang="en",Jr.label="English",Qr.TEST_VID.appendChild(Jr)}Qr.isSupported=function(){try{Qr.TEST_VID.volume=.5}catch(e){return!1}return!(!Qr.TEST_VID||!Qr.TEST_VID.canPlayType)},Qr.canPlayType=function(e){return Qr.TEST_VID.canPlayType(e)},Qr.canPlaySource=function(e,t){return Qr.canPlayType(e.type)},Qr.canControlVolume=function(){try{var e=Qr.TEST_VID.volume;return Qr.TEST_VID.volume=e/2+.1,e!==Qr.TEST_VID.volume}catch(e){return!1}},Qr.canControlPlaybackRate=function(){if(rt&&ut&&ct<58)return!1;try{var e=Qr.TEST_VID.playbackRate;return Qr.TEST_VID.playbackRate=e/2+.1,e!==Qr.TEST_VID.playbackRate}catch(e){return!1}},Qr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(h.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(h.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(h.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(h.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Qr.supportsNativeTextTracks=function(){return pt},Qr.supportsNativeVideoTracks=function(){return!(!Qr.TEST_VID||!Qr.TEST_VID.videoTracks)},Qr.supportsNativeAudioTracks=function(){return!(!Qr.TEST_VID||!Qr.TEST_VID.audioTracks)},Qr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Qr.prototype.featuresVolumeControl=Qr.canControlVolume(),Qr.prototype.featuresPlaybackRate=Qr.canControlPlaybackRate(),Qr.prototype.featuresSourceset=Qr.canOverrideAttributes(),Qr.prototype.movingMediaElementInDOM=!it,Qr.prototype.featuresFullscreenResize=!0,Qr.prototype.featuresProgressEvents=!0,Qr.prototype.featuresTimeupdateEvents=!0,Qr.prototype.featuresNativeTextTracks=Qr.supportsNativeTextTracks(),Qr.prototype.featuresNativeVideoTracks=Qr.supportsNativeVideoTracks(),Qr.prototype.featuresNativeAudioTracks=Qr.supportsNativeAudioTracks();var Zr=Qr.TEST_VID&&Qr.TEST_VID.constructor.prototype.canPlayType,eo=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Qr.patchCanPlayType=function(){4<=ot&&!at&&!ut&&(Qr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&eo.test(e)?"maybe":Zr.call(this,e)})},Qr.unpatchCanPlayType=function(){var e=Qr.TEST_VID.constructor.prototype.canPlayType;return Qr.TEST_VID.constructor.prototype.canPlayType=Zr,e},Qr.patchCanPlayType(),Qr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Qr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Qr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Qr.prototype["set"+ze(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){Qr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Qr.prototype["set"+ze(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){Qr.prototype[e]=function(){return this.el_[e]()}}),hn.withSourceHandlers(Qr),Qr.nativeSourceHandler={},Qr.nativeSourceHandler.canPlayType=function(e){try{return Qr.TEST_VID.canPlayType(e)}catch(e){return""}},Qr.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Qr.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=$t(e.src);return Qr.nativeSourceHandler.canPlayType("video/"+i)}return""},Qr.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},Qr.nativeSourceHandler.dispose=function(){},Qr.registerSourceHandler(Qr.nativeSourceHandler),hn.registerTech("Html5",Qr);var to=d(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),io=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],no={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ro=function(c){function d(e,t,i){if(y(this,d),e.id=e.id||t.id||"vjs_video_"+ae(),(t=C(d.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var n=e.closest("[lang]");n&&n.getAttribute&&(t.language=n.getAttribute("lang"))}else for(var r=e;r&&1===r.nodeType;){if(q(r).hasOwnProperty("lang")){t.language=r.getAttribute("lang");break}r=r.parentNode}var o=_(this,c.call(this,null,t,i));if(o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=e,o.tagAttributes=e&&q(e),o.language(o.options_.language),t.languages){var s={};Object.getOwnPropertyNames(t.languages).forEach(function(e){s[e.toLowerCase()]=t.languages[e]}),o.languages_=s}else o.languages_=d.prototype.options_.languages;o.cache_={},o.poster_=t.poster||"",o.controls_=!!t.controls,o.cache_.lastVolume=1,e.controls=!1,e.removeAttribute("controls"),o.scrubbing_=!1,o.el_=o.createEl(),o.cache_.lastPlaybackRate=o.defaultPlaybackRate(),Fe(o,{eventBusKey:"el_"});var a=We(o.options_);if(t.plugins){var l=t.plugins;Object.keys(l).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](l[e])},o)}o.options_.playerOptions=a,o.middleware_=[],o.initChildren(),o.isAudio("audio"===e.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),it||o.addClass("vjs-workinghover"),d.players[o.id_]=o;var u="7.0.3".split(".")[0];return o.addClass("vjs-v"+u),o.userActive(!0),o.reportUserActivity(),o.one("play",o.listenForUserActivity_),o.on("fullscreenchange",o.handleFullscreenChange_),o.on("stageclick",o.handleStageClick_),o.changingSrc_=!1,o.playWaitingForReady_=!1,o.playOnLoadstart_=null,o}return v(d,c),d.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),d.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),fn[this.id()]=null,c.prototype.dispose.call(this)},d.prototype.createEl=function(){var t=this.tag,i=void 0,e=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();e?i=this.el_=t.parentNode:n||(i=this.el_=c.prototype.createEl.call(this,"div"));var r=q(t);if(n){for(i=this.el_=t,t=this.tag=h.createElement("video");i.children.length;)t.appendChild(i.firstChild);j(i,"video-js")||B(i,"video-js"),i.appendChild(t),e=this.playerElIngest_=i,Object.keys(i).forEach(function(e){t[e]=i[e]})}if(t.setAttribute("tabindex","-1"),t.removeAttribute("width"),t.removeAttribute("height"),Object.getOwnPropertyNames(r).forEach(function(e){n&&"class"===e||i.setAttribute(e,r[e]),n&&t.setAttribute(e,r[e])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=i.player=this,this.addClass("vjs-paused"),!0!==m.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=xe("vjs-styles-dimensions");var o=ne(".vjs-styles-defaults"),s=ne("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var a=t.getElementsByTagName("a"),l=0;l<a.length;l++){var u=a.item(l);B(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!e&&t.parentNode.insertBefore(i,t),N(t,i),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_=i},d.prototype.width=function(e){return this.dimension("width",e)},d.prototype.height=function(e){return this.dimension("height",e)},d.prototype.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?p.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},d.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},d.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},d.prototype.updateStyleEl_=function(){if(!0!==m.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Ae(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(0<=o&&(a.width=o),0<=s&&(a.height=s))}},d.prototype.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=ze(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(hn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var o={source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+n+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Pi.names.forEach(function(e){var t=Pi[e];o[t.getterName]=i[t.privateName]}),C(o,this.options_[n]),C(o,this.options_[r]),C(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(o.startTime=this.cache_.currentTime);var s,a,l=hn.getTech(e);if(!l)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new l(o),this.tech_.ready(Le(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],a=this.tech_,s.forEach(function(e){var t=a.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),a.textTracks(),io.forEach(function(e){i.on(i.tech_,e,i["handleTech"+ze(e)+"_"])}),Object.keys(no).forEach(function(t){i.on(i.tech_,t,function(e){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+no[t]+"_"].bind(i),event:e}):i["handleTech"+no[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||N(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},d.prototype.unloadTech_=function(){var e,t,i,n=this;Pi.names.forEach(function(e){var t=Pi[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=Pt(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Pt))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},d.prototype.tech=function(e){return void 0===e&&p.warn(f(to)),this.tech_},d.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},d.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},d.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(e){p("deleting tag.poster throws in some browsers",e)}},d.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},d.prototype.updateSourceCaches_=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var o=n[r];if(o.type&&o.src&&o.src===t)return o.type}return Sn(t)}(this,t)),this.cache_.source={src:t,type:i};for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],o=this.$$("source"),s=[],a=0;a<o.length;a++){var l=q(o[a]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},d.prototype.handleTechSourceset_=function(e){var i=this;this.changingSrc_||(this.updateSourceCaches_(e.src),e.src)||this.tech_.one(["sourceset","loadstart"],function e(t){"sourceset"!==t.type&&i.updateSourceCaches_(i.techGet_("currentSrc")),i.tech_.off(["sourceset","loadstart"],e)}),this.trigger({src:e.src,type:"sourceset"})},d.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},d.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},d.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},d.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},d.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},d.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},d.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},d.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},d.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},d.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(p.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},d.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},d.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},d.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},d.prototype.handleTechClick_=function(e){ie(e)&&this.controls_&&(this.paused()?this.play():this.pause())},d.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},d.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},d.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},d.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},d.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},d.prototype.handleStageClick_=function(){this.reportUserActivity()},d.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},d.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},d.prototype.handleTechTextData_=function(){var e=null;1<arguments.length&&(e=arguments[1]),this.trigger("textdata",e)},d.prototype.getCache=function(){return this.cache_},d.prototype.techCall_=function(r,o){this.ready(function(){if(r in vn)return e=this.middleware_,t=this.tech_,n=o,t[i=r](e.reduce(bn(i),n));if(r in _n)return mn(this.middleware_,this.tech_,r,o);var e,t,i,n;try{this.tech_&&this.tech_[r](o)}catch(e){throw p(e),e}},!0)},d.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in yn)return t=this.middleware_,i=this.tech_,n=e,t.reduceRight(bn(n),i[n]());if(e in _n)return mn(this.middleware_,this.tech_,e);var t,i,n;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw p("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw p("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw p(t),t}}},d.prototype.play=function(){var e=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){e.playOnLoadstart_=null,Lt(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,Lt(e.play())})}},d.prototype.pause=function(){this.techCall_("pause")},d.prototype.paused=function(){return!1!==this.techGet_("paused")},d.prototype.played=function(){return this.techGet_("played")||vt(0,0)},d.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},d.prototype.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},d.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},d.prototype.remainingTime=function(){return this.duration()-this.currentTime()},d.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},d.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=vt(0,0)),e},d.prototype.bufferedPercent=function(){return _t(this.buffered(),this.duration())},d.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return t<i&&(i=t),i},d.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},d.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},d.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},d.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},d.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},d.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},d.prototype.requestFullscreen=function(){var i=bt;this.isFullscreen(!0),i.requestFullscreen?(ve(h,i.fullscreenchange,Le(this,function e(t){this.isFullscreen(h[i.fullscreenElement]),!1===this.isFullscreen()&&_e(h,i.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[i.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},d.prototype.exitFullscreen=function(){var e=bt;this.isFullscreen(!1),e.requestFullscreen?h[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},d.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=h.documentElement.style.overflow,ve(h,"keydown",Le(this,this.fullWindowOnEscKey)),h.documentElement.style.overflow="hidden",B(h.body,"vjs-full-window"),this.trigger("enterFullWindow")},d.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},d.prototype.exitFullWindow=function(){this.isFullWindow=!1,_e(h,"keydown",this.fullWindowOnEscKey),h.documentElement.style.overflow=this.docOrigOverflow,U(h.body,"vjs-full-window"),this.trigger("exitFullWindow")},d.prototype.canPlayType=function(e){for(var t=void 0,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],o=hn.getTech(r);if(o||(o=Ve.getComponent(r)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else p.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},d.prototype.selectSource=function(e){var i,n=this,t=this.options_.techOrder.map(function(e){return[e,hn.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(p.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,i,n){var r=void 0;return e.some(function(t){return i.some(function(e){if(r=n(t,e))return!0})}),r},o=function(e,t){var i=e[0];if(e[1].canPlaySource(t,n.options_[i.toLowerCase()]))return{source:t,tech:i}};return(this.options_.sourceOrder?r(e,t,(i=o,function(e,t){return i(t,e)})):r(t,e,o))||!1},d.prototype.src=function(e){var r=this;if(void 0===e)return this.cache_.src||"";var t,i,n,o=function t(e){if(Array.isArray(e)){var i=[];e.forEach(function(e){e=t(e),Array.isArray(e)?i=i.concat(e):w(e)&&i.push(e)}),e=i}else e="string"==typeof e&&e.trim()?[Cn({src:e})]:w(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Cn(e)]:[];return e}(e);o.length?(this.changingSrc_=!0,this.cache_.sources=o,this.updateSourceCaches_(o[0]),t=this,i=o[0],n=function(e,t){var i,n;if(r.middleware_=t,r.cache_.sources=o,r.updateSourceCaches_(e),r.src_(e))return 1<o.length?r.src(o.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());i=t,n=r.tech_,i.forEach(function(e){return e.setTech&&e.setTech(n)})},t.setTimeout(function(){return function i(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],o=arguments[3],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],a=5<arguments.length&&void 0!==arguments[5]&&arguments[5],t=e[0],l=e.slice(1);if("string"==typeof t)i(n,pn[t],r,o,s,a);else if(t){var u=function(e,t){var i=fn[e.id()],n=null;if(null==i)return n=t(e),fn[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var o=i[r],s=o[0],a=o[1];s===t&&(n=a)}return null===n&&(n=t(e),i.push([t,n])),n}(o,t);u.setSource(C({},n),function(e,t){if(e)return i(n,l,r,o,s,a);s.push(u),i(t,n.type===t.type?l:pn[t.type],r,o,s,a)})}else l.length?i(n,l,r,o,s,a):a?r(n,s):i(n,pn["*"],r,o,s,!0)}(i,pn[i.type],n,t)},1)):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},d.prototype.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,ze(t)!==ze(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},d.prototype.load=function(){this.techCall_("load")},d.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},d.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},d.prototype.currentSource=function(){return this.cache_.source||{}},d.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},d.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},d.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},d.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),void(this.options_.autoplay=e)):this.techGet_("autoplay",e)},d.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},d.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},d.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},d.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},d.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},d.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},d.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Et(e),this.addClass("vjs-error"),p.error("(CODE:"+this.error_.code+" "+Et.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},d.prototype.reportUserActivity=function(e){this.userActivity_=!0},d.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},d.prototype.listenForUserActivity_=function(){var t=void 0,i=void 0,n=void 0,r=Le(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,r())}),this.on("mouseup",function(e){r(),this.clearInterval(t)}),this.on("keydown",r),this.on("keyup",r);var o=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},d.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},d.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},d.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},d.prototype.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},d.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},d.prototype.removeRemoteTextTrack=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track,t=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},d.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},d.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},d.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},d.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},d.prototype.languages=function(){return We(d.prototype.options_.languages,this.languages_)},d.prototype.toJSON=function(){var e=We(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=We(n)).player=void 0,e.tracks[i]=n}return e},d.prototype.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Ot(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},d.getTagSettings=function(e){var t={sources:[],tracks:[]},i=q(e),n=i["data-setup"];if(j(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]}(n||"{}"),o=r[0],s=r[1];o&&p.error(o),C(i,s)}if(C(t,i),e.hasChildNodes())for(var a=e.childNodes,l=0,u=a.length;l<u;l++){var c=a[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(q(c)):"track"===d&&t.tracks.push(q(c))}return t},d.prototype.flexNotSupported_=function(){var e=h.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},d}(Ve);Pi.names.forEach(function(e){var t=Pi[e];ro.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),ro.players={};var oo=m.navigator;ro.prototype.options_={techOrder:hn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:oo&&(oo.languages&&oo.languages[0]||oo.userLanguage||oo.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){ro.prototype[e]=function(){return this.techGet_(e)}}),io.forEach(function(e){ro.prototype["handleTech"+ze(e)+"_"]=function(){return this.trigger(e)}}),Ve.registerComponent("Player",ro);var so="plugin",ao="activePlugins_",lo={},uo=function(e){return lo.hasOwnProperty(e)},co=function(e){return uo(e)?lo[e]:void 0},ho=function(e,t){e[ao]=e[ao]||{},e[ao][t]=!0},po=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},fo=function(r,o){return o.prototype.name=r,function(){po(this,{name:r,plugin:o,instance:null},!0);for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=new(Function.prototype.bind.apply(o,[null].concat([this].concat(t))));return this[r]=function(){return n},po(this,n.getEventHash()),n}},go=function(){function o(e){if(y(this,o),this.constructor===o)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,Fe(this),delete this.trigger,qe(this,this.constructor.defaultState),ho(e,this.name),this.dispose=Le(this,this.dispose),e.on("dispose",this.dispose)}return o.prototype.version=function(){return this.constructor.VERSION},o.prototype.getEventHash=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},o.prototype.trigger=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return be(this.eventBusEl_,e,this.getEventHash(t))},o.prototype.handleStateChanged=function(e){},o.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[ao][e]=!1,this.player=this.state=null,t[e]=fo(e,lo[e])},o.isBasic=function(e){var t="string"==typeof e?co(e):e;return"function"==typeof t&&!o.prototype.isPrototypeOf(t.prototype)},o.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+(void 0===e?"undefined":g(e))+".");if(uo(e))p.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(ro.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===t?"undefined":g(t))+".");var i,n,r;return lo[e]=t,e!==so&&(o.isBasic(t)?ro.prototype[e]=(i=e,n=t,r=function(){po(this,{name:i,plugin:n,instance:null},!0);var e=n.apply(this,arguments);return ho(this,i),po(this,{name:i,plugin:n,instance:e}),e},Object.keys(n).forEach(function(e){r[e]=n[e]}),r):ro.prototype[e]=fo(e,t)),t},o.deregisterPlugin=function(e){if(e===so)throw new Error("Cannot de-register base plugin.");uo(e)&&(delete lo[e],delete ro.prototype[e])},o.getPlugins=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(lo),i=void 0;return e.forEach(function(e){var t=co(e);t&&((i=i||{})[e]=t)}),i},o.getPluginVersion=function(e){var t=co(e);return t&&t.VERSION||""},o}();go.getPlugin=co,go.BASE_PLUGIN_NAME=so,go.registerPlugin(so,go),ro.prototype.usingPlugin=function(e){return!!this[ao]&&!0===this[ao][e]},ro.prototype.hasPlugin=function(e){return!!uo(e)};var mo=function(e){return 0===e.indexOf("#")?e.slice(1):e};function yo(e,i,t){var n=yo.getPlayer(e);if(n)return i&&p.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&n.ready(t),n;var r="string"==typeof e?ne("#"+mo(e)):e;if(!I(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");h.body.contains(r)||p.warn("The element supplied is not included in the DOM"),i=i||{},yo.hooks("beforesetup").forEach(function(e){var t=e(r,We(i));w(t)&&!Array.isArray(t)?i=We(i,t):p.error("please return an object in beforesetup hooks")});var o=Ve.getComponent("Player");return n=new o(r,i,t),yo.hooks("setup").forEach(function(e){return e(n)}),n}if(yo.hooks_={},yo.hooks=function(e,t){return yo.hooks_[e]=yo.hooks_[e]||[],t&&(yo.hooks_[e]=yo.hooks_[e].concat(t)),yo.hooks_[e]},yo.hook=function(e,t){yo.hooks(e,t)},yo.hookOnce=function(i,e){yo.hooks(i,[].concat(e).map(function(t){return function e(){return yo.removeHook(i,e),t.apply(void 0,arguments)}}))},yo.removeHook=function(e,t){var i=yo.hooks(e).indexOf(t);return!(i<=-1||(yo.hooks_[e]=yo.hooks_[e].slice(),yo.hooks_[e].splice(i,1),0))},!0!==m.VIDEOJS_NO_DYNAMIC_STYLE&&P()){var vo=ne(".vjs-styles-defaults");if(!vo){vo=xe("vjs-styles-defaults");var _o=ne("head");_o&&_o.insertBefore(vo,_o.firstChild),Ae(vo,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Ee(1,yo),yo.VERSION="7.0.3",yo.options=ro.prototype.options_,yo.getPlayers=function(){return ro.players},yo.getPlayer=function(e){var t=ro.players,i=void 0;if("string"==typeof e){var n=mo(e),r=t[n];if(r)return r;i=ne("#"+n)}else i=e;if(I(i)){var o=i,s=o.player,a=o.playerId;if(s||t[a])return s||t[a]}},yo.getAllPlayers=function(){return Object.keys(ro.players).map(function(e){return ro.players[e]}).filter(Boolean)},yo.players=ro.players,yo.getComponent=Ve.getComponent,yo.registerComponent=function(e,t){hn.isTech(t)&&p.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ve.registerComponent.call(Ve,e,t)},yo.getTech=hn.getTech,yo.registerTech=hn.registerTech,yo.use=function(e,t){pn[e]=pn[e]||[],pn[e].push(t)},Object.defineProperty(yo,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(yo.middleware,"TERMINATOR",{value:gn,writeable:!1,enumerable:!0}),yo.browser=gt,yo.TOUCH_ENABLED=ft,yo.extend=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=function(){e.apply(this,arguments)},n={};for(var r in"object"===(void 0===t?"undefined":g(t))?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(i,e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},yo.mergeOptions=We,yo.bind=Le,yo.registerPlugin=go.registerPlugin,yo.plugin=function(e,t){return p.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),go.registerPlugin(e,t)},yo.getPlugins=go.getPlugins,yo.getPlugin=go.getPlugin,yo.getPluginVersion=go.getPluginVersion,yo.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),yo.options.languages=We(yo.options.languages,((i={})[e]=t,i)),yo.options.languages[e]},yo.log=p,yo.createTimeRange=yo.createTimeRanges=vt,yo.formatTime=Un,yo.setFormatTime=function(e){Bn=e},yo.resetFormatTime=function(){Bn=jn},yo.parseUrl=Xt,yo.isCrossOrigin=Kt,yo.EventTarget=Ie,yo.on=ve,yo.one=Te,yo.off=_e,yo.trigger=be,yo.xhr=_i,yo.TextTrack=wi,yo.AudioTrack=ki,yo.VideoTrack=Ei,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){yo[e]=function(){return p.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),oe[e].apply(null,arguments)}}),yo.computedStyle=E,yo.dom=oe,yo.url=Qt;var bo,To,So=t(function(e,t){var i,c,n,r,d;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=d.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var o=d.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var s=c.exec(o.path);o.netLoc=s[1],o.path=s[2]}o.netLoc&&!o.path&&(o.path="/");var a={scheme:o.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(a.netLoc=o.netLoc,"/"!==r.path[0]))if(r.path){var l=o.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;a.path=d.normalizePath(u)}else a.path=o.path,r.params||(a.params=o.params,r.query||(a.query=o.query));return null===a.path&&(a.path=i.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(a)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d}),Co=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},ko=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Eo=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":g(t))&&"function"!=typeof t?e:t},xo=function(){function e(){Co(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},e.prototype.trigger=function(e){var t=this.listeners[e],i=void 0,n=void 0,r=void 0;if(t)if(2===arguments.length)for(n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),n=t.length,i=0;i<n;++i)t[i].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),Ao=function(t){function i(){Co(this,i);var e=Eo(this,t.call(this));return e.buffer="",e}return ko(i,t),i.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},i}(xo),Lo=function(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},n=t.length,r=void 0;n--;)""!==t[n]&&((r=/([^=]*)=(.*)/.exec(t[n]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),i[r[0]]=r[1]);return i},Po=function(t){function i(){Co(this,i);var e=Eo(this,t.call(this));return e.customParsers=[],e}return ko(i,t),i.prototype.push=function(e){var t=void 0,i=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var n=0;n<this.customParsers.length;n++)if(this.customParsers[n].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void this.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void this.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void this.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var r=Lo(t[1]);if(r.URI&&(i.uri=r.URI),r.BYTERANGE){var o=r.BYTERANGE.split("@"),s=o[0],a=o[1];i.byterange={},s&&(i.byterange.length=parseInt(s,10)),a&&(i.byterange.offset=parseInt(a,10))}}this.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=Lo(t[1]),i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION.split("x"),u={};l[0]&&(u.width=parseInt(l[0],10)),l[1]&&(u.height=parseInt(l[1],10)),i.attributes.RESOLUTION=u}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=Lo(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=Lo(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=Lo(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},i.prototype.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,o=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:o}),!0})},i}(xo),Io=function(t){function i(){Co(this,i);var e=Eo(this,t.call(this));e.lineStream=new Ao,e.parseStream=new Po,e.lineStream.pipe(e.parseStream);var r=e,o=[],s={},a=void 0,l=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var i=void 0,n=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((s.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((s.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(l.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):l=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){a={},t.uri&&(a.uri=t.uri),t.byterange&&(a.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(s.attributes||(s.attributes={}),wo(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},i=e[t.attributes["GROUP-ID"]],(n={default:/yes/i.test(t.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),i[t.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data}}[t.tagType]||function(){}).call(r)},uri:function(){s.uri=t.uri,o.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=c,a&&(s.map=a),s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)}),e}return ko(i,t),i.prototype.push=function(e){this.lineStream.push(e)},i.prototype.end=function(){this.lineStream.push("\n")},i.prototype.addParser=function(e){this.parseStream.addParser(e)},i}(xo),Oo=function(e){var t,i=e.attributes,n=e.segments,r={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(r.contentProtection=i.contentProtection),r},Do=function(e){return!!e&&"object"===(void 0===e?"undefined":g(e))},Mo=function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(t,i){return Object.keys(i).forEach(function(e){Array.isArray(t[e])&&Array.isArray(i[e])?t[e]=t[e].concat(i[e]):Do(t[e])&&Do(i[e])?t[e]=n(t[e],i[e]):t[e]=i[e]}),t},{})},Ro=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=So.buildAbsoluteURL(m.location.href,e)),So.buildAbsoluteURL(e,t))},No=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,o=e.range,s=void 0===o?"":o,a={uri:r,resolvedUri:Ro(i||"",r)};if(s){var l=s.split("-"),u=parseInt(l[0],10),c=parseInt(l[1],10);a.byterange={length:c-u,offset:u}}return a},jo=function(e,t){for(var i,n,r,o,s,a,l,u,c,d,h,p,f=e.type,g=void 0===f?"static":f,m=e.minimumUpdatePeriod,y=void 0===m?0:m,v=e.media,_=void 0===v?"":v,b=e.sourceDuration,T=e.timescale,S=void 0===T?1:T,C=e.startNumber,w=void 0===C?1:C,k=e.periodIndex,E=[],x=-1,A=0;A<t.length;A++){var L=t[A],P=L.d,I=L.r||0,O=L.t||0;x<0&&(x=O),O&&x<O&&(x=O);var D=void 0;if(I<0){var M=A+1;M===t.length?"dynamic"===g&&0<y&&0<_.indexOf("$Number$")?(n=x,r=P,o=(i=e).NOW,s=i.clientOffset,a=i.availabilityStartTime,u=void 0===(l=i.timescale)?1:l,d=void 0===(c=i.start)?0:c,p=(o+s)/1e3+(void 0===(h=i.minimumUpdatePeriod)?0:h)-(a+d),D=Math.ceil((p*u-n)/r)):D=(b*S-x)/P:D=(t[M].t-x)/P}else D=I+1;for(var R=w+E.length+D,N=w+E.length;N<R;)E.push({number:N,duration:P/S,time:x,timeline:k}),x+=P,N++}return E},Bo=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},Uo=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},Fo={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,o=void 0===r?1:r,s=e.duration,a=e.start,l=void 0===a?0:a,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+i)/1e3,f=n+l,g=p+c-f,m=Math.ceil(g*o/s),y=Math.floor((p-f-h)*o/s),v=Math.floor((p-f)*o/s);return{start:Math.max(0,y),end:Math.min(m,v)}}},Ho=function(e){var a,t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,o=void 0===r?1:r,s=e.sourceDuration,l=Fo[i](e),u=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(l.start,l.end).map((a=e,function(e,t){var i=a.duration,n=a.timescale,r=void 0===n?1:n,o=a.periodIndex,s=a.startNumber;return{number:(void 0===s?1:s)+e,duration:i/r,timeline:o,time:t*i}}));if("static"===i){var c=u.length-1;u[c].duration=s-n/o*c}return u},qo=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,zo=function(e,t){return e.replace(qo,(o=t,function(e,t,i,n){if("$$"===e)return"$";if(void 0===o[t])return e;var r=""+o[t];return"RepresentationID"===t?r:(n=i?parseInt(n,10):1)<=r.length?r:""+new Array(n-r.length+1).join("0")+r}));var o},Wo=function(i,e){var t,n,r={RepresentationID:i.id,Bandwidth:i.bandwidth||0},o=i.initialization,s=void 0===o?{sourceURL:"",range:""}:o,a=No({baseUrl:i.baseUrl,source:zo(s.sourceURL,r),range:s.range});return(n=e,(t=i).duration||n?t.duration?Ho(t):jo(t,n):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(e){r.Number=e.number,r.Time=e.time;var t=zo(i.media||"",r);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:Ro(i.baseUrl||"",t),map:a,number:e.number}})},Vo=function(l,e){var t=l.duration,i=l.segmentUrls,n=void 0===i?[]:i;if(!t&&!e||t&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");var r=n.map(function(e){return i=e,n=(t=l).baseUrl,r=t.initialization,s=No({baseUrl:n,source:(o=void 0===r?{}:r).sourceURL,range:o.range}),(a=No({baseUrl:n,source:i.media,range:i.mediaRange})).map=s,a;var t,i,n,r,o,s,a}),o=void 0;return t&&(o=Ho(l)),e&&(o=jo(l,e)),o.map(function(e,t){if(r[t]){var i=r[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})},Go=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,o=e.timescale,s=void 0===o?1:o,a=e.indexRange,l=void 0===a?"":a,u=e.duration;if(!t)throw new Error("NO_BASE_URL");var c=No({baseUrl:t,source:n.sourceURL,range:n.range}),d=No({baseUrl:t,source:t,range:l});if(d.map=c,u){var h=Ho(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/s,d.timeline=0);return d.number=0,[d]},Xo=function(e){var t=e.attributes,i=e.segmentInfo,n=void 0,r=void 0;if(i.template?(r=Wo,n=Mo(t,i.template)):i.base?(r=Go,n=Mo(t,i.base)):i.list&&(r=Vo,n=Mo(t,i.list)),!r)return{attributes:t};var o=r(n,i.timeline);if(n.duration){var s=n,a=s.duration,l=s.timescale,u=void 0===l?1:l;n.duration=a/u}else o.length?n.duration=o.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):n.duration=0;return{attributes:n,segments:o}},Yo=function(e,t){return Uo(e.childNodes).filter(function(e){return e.tagName===t})},$o=function(e){return e.textContent.trim()},Ko=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(o||0)+3600*parseFloat(s||0)+60*parseFloat(a||0)+parseFloat(l||0)},Qo={mediaPresentationDuration:function(e){return Ko(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Ko(e)},timeShiftBufferDepth:function(e){return Ko(e)},start:function(e){return Ko(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Ko(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Jo=function(e){return e&&e.attributes?Uo(e.attributes).reduce(function(e,t){var i=Qo[t.name]||Qo.DEFAULT;return e[t.name]=i(t.value),e},{}):{}},Zo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},es=function(e,i){return i.length?Bo(e.map(function(t){return i.map(function(e){return Ro(t,$o(e))})})):e},ts=function(e){var t=Yo(e,"SegmentTemplate")[0],i=Yo(e,"SegmentList")[0],n=i&&Yo(i,"SegmentURL").map(function(e){return Mo({tag:"SegmentURL"},Jo(e))}),r=Yo(e,"SegmentBase")[0],o=i||t,s=o&&Yo(o,"SegmentTimeline")[0],a=i||r||t,l=a&&Yo(a,"Initialization")[0],u=t&&Jo(t);u&&l?u.initialization=l&&Jo(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:s&&Yo(s,"S").map(function(e){return Jo(e)}),list:i&&Mo(Jo(i),{segmentUrls:n,initialization:Jo(l)}),base:r&&Mo(Jo(r),{initialization:Jo(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c},is=function(p,f,g){return function(e){var t=Jo(e),i=es(f,Yo(e,"BaseURL")),n=Yo(e,"Role")[0],r={role:Jo(n)},o=Mo(p,t,r),s=Yo(e,"ContentProtection").reduce(function(e,t){var i=Jo(t),n=Zo[i.schemeIdUri];if(n){e[n]={attributes:i};var r=Yo(t,"cenc:pssh")[0];if(r){var o=$o(r),s=o&&function(e){for(var t=m.atob(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}(o);e[n].pssh=s}}return e},{});Object.keys(s).length&&(o=Mo(o,{contentProtection:s}));var a,l,u,c=ts(e),d=Yo(e,"Representation"),h=Mo(g,c);return Bo(d.map((a=o,l=i,u=h,function(e){var t=Yo(e,"BaseURL"),i=es(l,t),n=Mo(a,Jo(e)),r=ts(e);return i.map(function(e){return{segmentInfo:Mo(u,r),attributes:Mo(n,{baseUrl:e})}})})))}},ns=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t=(new m.DOMParser).parseFromString(e,"application/xml"),i=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!i||i&&0<i.getElementsByTagName("parsererror").length)throw new Error("DASH_INVALID_XML");return i},rs=function(e,t){return function(e){var t;if(!e.length)return{};var i=e[0].attributes,n=i.sourceDuration,r=i.minimumUpdatePeriod,o=void 0===r?0:r,s=e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}).map(Oo),a=e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}),l=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),u={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:n,playlists:s,minimumUpdatePeriod:1e3*o};return a.length&&(u.mediaGroups.AUDIO.audio=a.reduce(function(e,t){var i,n,r,o,s,a=t.attributes.role&&t.attributes.role.value||"main",l=t.attributes.lang||"",u="main";return l&&(u=t.attributes.lang+" ("+a+")"),e[u]&&e[u].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[u]={language:l,autoselect:!0,default:"main"===a,playlists:[(i=t,r=i.attributes,o=i.segments,s={attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:o,mediaSequence:o.length?o[0].number:1},r.contentProtection&&(s.contentProtection=r.contentProtection),s)],uri:""}),e},{})),l.length&&(u.mediaGroups.SUBTITLES.subs=l.reduce(function(e,t){var i,n,r,o,s=t.attributes.lang||"text";return e[s]||(e[s]={language:s,default:!1,autoselect:!1,playlists:[(i=t,r=i.attributes,o=i.segments,void 0===o&&(o=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration),{attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:o,mediaSequence:o.length?o[0].number:1})],uri:""}),e},{})),u}(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.manifestUri,n=void 0===i?"":i,r=t.NOW,o=void 0===r?Date.now():r,s=t.clientOffset,a=void 0===s?0:s,l=Yo(e,"Period");if(1!==l.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var u,c,d=Jo(e),h=es([n],Yo(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=o,d.clientOffset=a,Bo(l.map((u=d,c=h,function(e,t){var i=es(c,Yo(e,"BaseURL")),n=Jo(e),r=Mo(u,n,{periodIndex:t}),o=Yo(e,"AdaptationSet"),s=ts(e);return Bo(o.map(is(r,i,s)))})))}(ns(e),t).map(Xo))},os={toUnsigned:function(e){return e>>>0}},ss=os.toUnsigned,as=Object.freeze({default:os,__moduleExports:os,toUnsigned:ss}),ls=(as&&os||as).toUnsigned;bo=function(e,t){var i,n,r,o,s,a=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=ls(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),r=To(e.subarray(i+4,i+8)),o=1<n?i+n:e.byteLength,r===t[0]&&(1===t.length?a.push(e.subarray(i+8,o)):(s=bo(e.subarray(i+8,o),t.slice(1))).length&&(a=a.concat(s))),i=o;return a},To=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])};var us={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},cs=us.H264_STREAM_TYPE,ds=us.ADTS_STREAM_TYPE,hs=us.METADATA_STREAM_TYPE,ps=Object.freeze({default:us,__moduleExports:us,H264_STREAM_TYPE:cs,ADTS_STREAM_TYPE:ds,METADATA_STREAM_TYPE:hs}),fs=function(){this.init=function(){var o={};this.on=function(e,t){o[e]||(o[e]=[]),o[e]=o[e].concat(t)},this.off=function(e,t){var i;return!!o[e]&&(i=o[e].indexOf(t),o[e]=o[e].slice(),o[e].splice(i,1),-1<i)},this.trigger=function(e){var t,i,n,r;if(t=o[e])if(2===arguments.length)for(n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=t.length,i=0;i<n;++i)t[i].apply(this,r)}},this.dispose=function(){o={}}}};fs.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},fs.prototype.push=function(e){this.trigger("data",e)},fs.prototype.flush=function(e){this.trigger("done",e)};var gs=fs,ms=Object.freeze({default:gs,__moduleExports:gs}),ys=function(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e},vs=function e(t){var i,n;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=ys(e.dts,n),e.pts=ys(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.discontinuity=function(){i=n=void 0}};vs.prototype=new(ms&&gs||ms);var _s={TimestampRolloverStream:vs,handleRollover:ys},bs=_s.TimestampRolloverStream,Ts=_s.handleRollover,Ss=Object.freeze({default:_s,__moduleExports:_s,TimestampRolloverStream:bs,handleRollover:Ts}),Cs=ps&&us||ps,ws=function(e){var t=31&e[1];return(t<<=8)|e[2]},ks=function(e){return!!(64&e[1])},Es=function(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t},xs=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},As={parseType:function(e,t){var i=ws(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=ks(e),i=4+Es(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=ks(e),n=4+Es(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var o=12+((15&e[n+10])<<8|e[n+11]);o<r;){var s=n+o;t[(31&e[s+1])<<8|e[s+2]]=e[s],o+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:ks,parsePesType:function(e,t){switch(t[ws(e)]){case Cs.H264_STREAM_TYPE:return"video";case Cs.ADTS_STREAM_TYPE:return"audio";case Cs.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!ks(e))return null;var t=4+Es(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+Es(e),i=e.subarray(t),n=0,r=0,o=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===xs(31&i[r+3])&&(o=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===xs(31&i[r+3])&&(o=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===xs(31&i[r+3])&&(o=!0),o}},Ls=As.parseType,Ps=As.parsePat,Is=As.parsePmt,Os=As.parsePayloadUnitStartIndicator,Ds=As.parsePesType,Ms=As.parsePesTime,Rs=As.videoPacketContainsKeyFrame,Ns=Object.freeze({default:As,__moduleExports:As,parseType:Ls,parsePat:Ps,parsePmt:Is,parsePayloadUnitStartIndicator:Os,parsePesType:Ds,parsePesTime:Ms,videoPacketContainsKeyFrame:Rs}),js=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Bs=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Us={parseId3TagSize:function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return js[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Bs(e.subarray(10,14)));do{if((i=Bs(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}(n,0,r))){var o=n.subarray(r+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return(s*=4)+(3&o[7])}break}}t+=10,t+=i}while(t<e.byteLength);return null}},Fs=Us.parseId3TagSize,Hs=Us.parseAdtsSize,qs=Us.parseType,zs=Us.parseSampleRate,Ws=Us.parseAacTimestamp,Vs=Object.freeze({default:Us,__moduleExports:Us,parseId3TagSize:Fs,parseAdtsSize:Hs,parseType:qs,parseSampleRate:zs,parseAacTimestamp:Ws}),Gs=Ns&&As||Ns,Xs=Vs&&Us||Vs,Ys=(Ss&&_s||Ss).handleRollover,$s={};$s.ts=Gs,$s.aac=Xs;var Ks=188,Qs=function(e,t,i){for(var n,r,o,s,a=0,l=Ks,u=!1;l<e.byteLength;)if(71!==e[a]||71!==e[l])a++,l++;else{switch(n=e.subarray(a,l),$s.ts.parseType(n,t.pid)){case"pes":r=$s.ts.parsePesType(n,t.table),o=$s.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&o&&(s=$s.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;a+=Ks,l+=Ks}for(a=(l=e.byteLength)-Ks,u=!1;0<=a;)if(71!==e[a]||71!==e[l])a--,l--;else{switch(n=e.subarray(a,l),$s.ts.parseType(n,t.pid)){case"pes":r=$s.ts.parsePesType(n,t.table),o=$s.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&o&&(s=$s.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;a-=Ks,l-=Ks}},Js=function(e,t,i){for(var n,r,o,s,a,l,u,c=0,d=Ks,h=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(n=e.subarray(c,d),$s.ts.parseType(n,t.pid)){case"pes":if(r=$s.ts.parsePesType(n,t.table),o=$s.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(o&&!h&&(s=$s.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0),!i.firstKeyFrame)){if(o&&0!==p.size){for(a=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),a.set(u,l),l+=u.byteLength;$s.ts.videoPacketContainsKeyFrame(a)&&(i.firstKeyFrame=$s.ts.parsePesTime(a),i.firstKeyFrame.type="video"),p.size=0}p.data.push(n),p.size+=n.byteLength}}if(h&&i.firstKeyFrame)break;c+=Ks,d+=Ks}for(c=(d=e.byteLength)-Ks,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(n=e.subarray(c,d),$s.ts.parseType(n,t.pid)){case"pes":r=$s.ts.parsePesType(n,t.table),o=$s.ts.parsePayloadUnitStartIndicator(n),"video"===r&&o&&(s=$s.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0)}if(h)break;c-=Ks,d-=Ks}},Zs=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ea=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),ta=null,ia=function(){function c(e){Zs(this,c),ta||(ta=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],o=void 0,s=void 0,a=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(o=0;o<256;o++)u[(l[o]=o<<1^283*(o>>7))^o]=o;for(s=a=0;!n[s];s^=c||1,a=u[a]||1)for(h=(h=a^a<<1^a<<2^a<<3^a<<4)>>8^255&h^99,f=16843009*l[d=l[c=l[r[n[s]=h]=s]]]^65537*d^257*c^16843008*s,p=257*l[h]^16843008*h,o=0;o<4;o++)t[o][s]=p=p<<24^p>>>8,i[o][h]=f=f<<24^f>>>8;for(o=0;o<5;o++)t[o]=t[o].slice(0),i[o]=i[o].slice(0);return e}()),this._tables=[[ta[0][0].slice(),ta[0][1].slice(),ta[0][2].slice(),ta[0][3].slice(),ta[0][4].slice()],[ta[1][0].slice(),ta[1][1].slice(),ta[1][2].slice(),ta[1][3].slice(),ta[1][4].slice()]];var t=void 0,i=void 0,n=void 0,r=void 0,o=void 0,s=this._tables[0][4],a=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),o=[],this._key=[r,o],t=l;t<4*l+28;t++)n=r[t-1],(t%l==0||8===l&&t%l==4)&&(n=s[n>>>24]<<24^s[n>>16&255]<<16^s[n>>8&255]<<8^s[255&n],t%l==0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^n;for(i=0;t;i++,t--)n=r[3&i?t:t-4],o[i]=t<=4||i<4?n:a[0][s[n>>>24]]^a[1][s[n>>16&255]]^a[2][s[n>>8&255]]^a[3][s[255&n]]}return c.prototype.decrypt=function(e,t,i,n,r,o){var s=this._key[1],a=e^s[0],l=n^s[1],u=i^s[2],c=t^s[3],d=void 0,h=void 0,p=void 0,f=s.length/4-2,g=void 0,m=4,y=this._tables[1],v=y[0],_=y[1],b=y[2],T=y[3],S=y[4];for(g=0;g<f;g++)d=v[a>>>24]^_[l>>16&255]^b[u>>8&255]^T[255&c]^s[m],h=v[l>>>24]^_[u>>16&255]^b[c>>8&255]^T[255&a]^s[m+1],p=v[u>>>24]^_[c>>16&255]^b[a>>8&255]^T[255&l]^s[m+2],c=v[c>>>24]^_[a>>16&255]^b[l>>8&255]^T[255&u]^s[m+3],m+=4,a=d,l=h,u=p;for(g=0;g<4;g++)r[(3&-g)+o]=S[a>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^s[m++],d=a,a=l,l=u,u=c,c=d},c}(),na=function(){function e(){Zs(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),ra=function(t){function i(){Zs(this,i);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":g(t))&&"function"!=typeof t?e:t}(this,t.call(this,na));return e.jobs=[],e.delay=1,e.timeout_=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(na),oa=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},sa=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new ia(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),s=new Int32Array(o.buffer),a=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0;for(a=i[0],l=i[1],u=i[2],c=i[3],g=0;g<n.length;g+=4)d=oa(n[g]),h=oa(n[g+1]),p=oa(n[g+2]),f=oa(n[g+3]),r.decrypt(d,h,p,f,s,g),s[g]=oa(s[g]^a),s[g+1]=oa(s[g+1]^l),s[g+2]=oa(s[g+2]^u),s[g+3]=oa(s[g+3]^c),a=d,l=h,u=p,c=f;return o},aa=function(){function l(e,t,i,n){Zs(this,l);var r=l.STEP,o=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),a=0;for(this.asyncStream_=new ra,this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),t,i,s)),a=r;a<o.length;a+=r)i=new Uint32Array([oa(o[a-4]),oa(o[a-3]),oa(o[a-2]),oa(o[a-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),t,i,s));this.asyncStream_.push(function(){var e;n(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}return l.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=sa(t,i,n);r.set(e,t.byteOffset)}},ea(l,null,[{key:"STEP",get:function(){return 32e3}}]),l}(),la=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=So.buildAbsoluteURL(m.location.href,e)),So.buildAbsoluteURL(e,t))},ua=yo.mergeOptions,ca=yo.log,da=function(r,o){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var i in r.mediaGroups[e][t]){var n=r.mediaGroups[e][t][i];o(n,e,t,i)}})},ha=function(e,t){var i=ua(e,{}),n=i.playlists[t.uri];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.mediaSequence===t.mediaSequence)return null;var r=ua(n,t);n.segments&&(r.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),o=i;o<r;o++)n[o-i]=ua(e[o],n[o-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){var t,i;t=e,i=r.resolvedUri,t.resolvedUri||(t.resolvedUri=la(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=la(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=la(i,t.map.uri))});for(var o=0;o<i.playlists.length;o++)i.playlists[o].uri===t.uri&&(i.playlists[o]=r);return i.playlists[t.uri]=r,i},pa=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];(e.playlists[i.uri]=i).resolvedUri=la(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},ca.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},fa=function(t){da(t,function(e){e.uri&&(e.resolvedUri=la(t.uri,e.uri))})},ga=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},ma=function(r){function o(e,t,i){y(this,o);var n=_(this,r.call(this));if(n.srcUrl=e,n.hls_=t,n.withCredentials=i,!n.srcUrl)throw new Error("A non-empty playlist URL is required");return n.state="HAVE_NOTHING",n.on("mediaupdatetimeout",function(){"HAVE_METADATA"===n.state&&(n.state="HAVE_CURRENT_METADATA",n.request=n.hls_.xhr({uri:la(n.master.uri,n.media().uri),withCredentials:n.withCredentials},function(e,t){if(n.request)return e?n.playlistRequestError(n.request,n.media().uri,"HAVE_METADATA"):void n.haveMetadata(n.request,n.media().uri)}))}),n}return v(o,r),o.prototype.playlistRequestError=function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")},o.prototype.haveMetadata=function(e,t){var i=this;this.request=null,this.state="HAVE_METADATA";var n=new Io;n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{};var r=ha(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[n.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(m.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=m.setTimeout(function(){i.trigger("mediaupdatetimeout")},ga(this.media(),!!r))),this.trigger("loadedplaylist")},o.prototype.dispose=function(){this.stopRequest(),m.clearTimeout(this.mediaUpdateTimeout)},o.prototype.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},o.prototype.media=function(i){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}var e=!this.media_||i.uri!==this.media_.uri;if(this.master.playlists[i.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e){if(this.state="SWITCHING_MEDIA",this.request){if(la(this.master.uri,i.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:la(this.master.uri,i.uri),withCredentials:this.withCredentials},function(e,t){if(n.request){if(e)return n.playlistRequestError(n.request,i.uri,r);n.haveMetadata(t,i.uri),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}},o.prototype.pause=function(){this.stopRequest(),m.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},o.prototype.load=function(e){var t=this;m.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=m.setTimeout(function(){return t.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},o.prototype.start=function(){var n=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"HLS playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");var i=new Io;return i.push(t.responseText),i.end(),n.state="HAVE_MASTER",i.manifest.uri=n.srcUrl,i.manifest.playlists?(n.master=i.manifest,pa(n.master),fa(n.master),n.trigger("loadedplaylist"),void(n.request||n.media(i.manifest.playlists[0]))):(n.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:m.location.href,playlists:[{uri:n.srcUrl,id:0}]},n.master.playlists[n.srcUrl]=n.master.playlists[0],n.master.playlists[0].resolvedUri=n.srcUrl,n.master.playlists[0].attributes=n.master.playlists[0].attributes||{},n.haveMetadata(t,n.srcUrl),n.trigger("loadedmetadata"))}})},o}(yo.EventTarget),ya=yo.createTimeRange,va=function(e,o,t){var i,n;return void 0===o&&(o=e.mediaSequence+e.segments.length),o<e.mediaSequence?0:(i=function(e,t){var i=0,n=o-e.mediaSequence,r=e.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e)).precise?i.result:(n=function(e,t){for(var i=0,n=void 0,r=o-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e)).precise?n.result:i.result+t},_a=function(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return m.Infinity}return va(e,t,i)},ba=function(e,t,i){var n=0;if(i<t){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var o=t;o<Math.min(0,i);o++)n+=e.targetDuration;t=0}for(var s=t;s<i;s++)n+=e.segments[s].duration;return n},Ta=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,n=i+2*e.targetDuration;t--&&!(n<=(i+=e.segments[t].duration)););return Math.max(0,t)},Sa=function(e,t,i){if(!e||!e.segments)return null;if(e.endList)return _a(e);if(null===t)return null;t=t||0;var n=i?Ta(e):e.segments.length;return va(e,e.mediaSequence+n,t)},Ca=function(e){return e-Math.floor(e)==0},wa=function(e,t){if(Ca(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,n=1;n<=i;n++){var r=Math.pow(10,n),o=t*r;if(Ca(o)||n===i)return(o+e)/r}},ka=wa.bind(null,1),Ea=wa.bind(null,-1),xa=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Aa=function(e){return e.excludeUntil&&e.excludeUntil===1/0},La=function(e){var t=xa(e);return!e.disabled&&!t},Pa=function(e,t){return t.attributes&&t.attributes[e]},Ia=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!La(e)&&(e.attributes.BANDWIDTH||0)<i}).length},Oa={duration:_a,seekable:function(e,t){var i=t||0,n=Sa(e,t,!0);return null===n?ya():ya(i,n)},safeLiveIndex:Ta,getMediaInfoForTime:function(e,t,i,n){var r=void 0,o=void 0,s=e.segments.length,a=t-n;if(a<0){if(0<i)for(r=i-1;0<=r;r--)if(o=e.segments[r],0<(a+=Ea(o.duration)))return{mediaIndex:r,startTime:n-ba(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((a-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<s;r++)if(o=e.segments[r],(a-=ka(o.duration))<0)return{mediaIndex:r,startTime:n+ba(e,i,r)};return{mediaIndex:s-1,startTime:t}},isEnabled:La,isDisabled:function(e){return e.disabled},isBlacklisted:xa,isIncompatible:Aa,playlistEnd:Sa,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Pa,estimateSegmentRequestTime:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Pa("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:Ia},Da=yo.xhr,Ma=yo.mergeOptions,Ra=function(){return function e(t,n){t=Ma({timeout:45e3},t);var i=e.beforeRequest||yo.Hls.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(t);r&&(t=r)}var o=Da(t,function(e,t){var i=o.response;!e&&i&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=i.byteLength||i.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),t.headers&&(o.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(o.timedout=!0),e||o.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(o&&(i||o.responseText)))),n(e,o)}),s=o.abort;return o.abort=function(){return o.aborted=!0,s.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o}},Na=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},ja=function(e){return 32<=e&&e<126?String.fromCharCode(e):"."},Ba=function(i){var n={};return Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n},Ua=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Fa=function(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(Na).join("")+" "+t.slice(16*n,16*n+16).map(ja).join("")+"\n";return i},Ha=Object.freeze({createTransferableMessage:Ba,initSegmentId:Ua,hexDump:Fa,tagDump:function(e){var t=e.bytes;return Fa(t)},textRanges:function(e){var t,i,n="",r=void 0;for(r=0;r<e.length;r++)n+=(i=r,(t=e).start(i)+"-"+t.end(i)+" ");return n}}),qa=1/30,za=function(e,t){var i=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return yo.createTimeRanges(i)},Wa=function(e,i){return za(e,function(e,t){return e-qa<=i&&i<=t+qa})},Va=function(e,t){return za(e,function(e){return t<=e-qa})},Ga=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},Xa=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},Ya=function(e,t,i){var n=void 0,r=void 0;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime<=t&&r.endTime>=e&&i.removeCue(r)},$a=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},Ka="undefined"!=typeof window?window:{},Qa="undefined"==typeof Symbol?"__target":Symbol(),Ja="application/javascript",Za=Ka.BlobBuilder||Ka.WebKitBlobBuilder||Ka.MozBlobBuilder||Ka.MSBlobBuilder,el=Ka.URL||Ka.webkitURL||el&&el.msURL,tl=Ka.Worker;function il(r,o){return function(e){var t=this;if(!o)return new tl(r);if(tl&&!e){var i=sl(o.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Qa]=new tl(i),function(e,t){if(e&&t){var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&el.revokeObjectURL(e.objURL),i.call(e)}}}(this[Qa],i),this[Qa]}var n={postMessage:function(e){t.onmessage&&setTimeout(function(){t.onmessage({data:e,target:n})})}};o.call(n),this.postMessage=function(e){setTimeout(function(){n.onmessage({data:e,target:t})})},this.isThisThread=!0}}if(tl){var nl,rl=sl("self.onmessage = function () {}"),ol=new Uint8Array(1);try{(nl=new tl(rl)).postMessage(ol,[ol.buffer])}catch(e){tl=null}finally{el.revokeObjectURL(rl),nl&&nl.terminate()}}function sl(t){try{return el.createObjectURL(new Blob([t],{type:Ja}))}catch(e){var i=new Za;return i.append(t),el.createObjectURL(i.getBlob(type))}}var al=new il("./transmuxer-worker.worker.js",function(et,e){var tt=this;!function(){var a,t,i,r,o,n,e,s,l,u,c,d,h,p,f,g,m,y,v,_,b,T,S,C,w,k,E,x,A,L,P,I,O,D,M,R,N,j,B,U,F=void 0!==et?et:"undefined"!=typeof global?global:void 0!==tt?tt:{},H=void 0!==et?et:void 0!==F?F:void 0!==tt?tt:{},q=Math.pow(2,32)-1;!function(){var e;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),w=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:k,audio:E},P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),I=new Uint8Array([0,0,0,0,0,0,0,0]),O=I,D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M=I,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),a=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},t=function(){return a(T.dinf,a(T.dref,P))},i=function(e){return a(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},f=function(e){return a(T.hdlr,x[e])},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),a(T.mdhd,t)},h=function(e){return a(T.mdia,p(e),f(e.type),n(e))},o=function(e){return a(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},n=function(e){return a(T.minf,"video"===e.type?a(T.vmhd,A):a(T.smhd,L),t(),m(e))},e=function(e,t){for(var i=[],n=t.length;n--;)i[n]=v(t[n]);return a.apply(null,[T.moof,o(e)].concat(i))},s=function(e){for(var t=e.length,i=[];t--;)i[t]=c(e[t]);return a.apply(null,[T.moov,u(4294967295)].concat(i).concat(l(e)))},l=function(e){for(var t=e.length,i=[];t--;)i[t]=_(e[t]);return a.apply(null,[T.mvex].concat(i))},u=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(T.mvhd,t)},g=function(e){var t,i,n=e.samples||[],r=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)t=n[i].flags,r[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return a(T.sdtp,r)},m=function(e){return a(T.stbl,y(e),a(T.stts,M),a(T.stsc,O),a(T.stsz,D),a(T.stco,I))},y=function(e){return a(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?R(e):N(e))},R=function(e){var t,i=e.sps||[],n=e.pps||[],r=[],o=[];for(t=0;t<i.length;t++)r.push((65280&i[t].byteLength)>>>8),r.push(255&i[t].byteLength),r=r.concat(Array.prototype.slice.call(i[t]));for(t=0;t<n.length;t++)o.push((65280&n[t].byteLength)>>>8),o.push(255&n[t].byteLength),o=o.concat(Array.prototype.slice.call(n[t]));return a(T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length]).concat(r).concat([n.length]).concat(o))),a(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},N=function(e){return a(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},d=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return a(T.tkhd,t)},v=function(e){var t,i,n,r,o,s;return t=a(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/(q+1)),s=Math.floor(e.baseMediaDecodeTime%(q+1)),i=a(T.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(n=b(e,92),a(T.traf,t,i,n)):(r=g(e),n=b(e,r.length+92),a(T.traf,t,i,n,r))},c=function(e){return e.duration=e.duration||4294967295,a(T.trak,d(e),h(e))},_=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),a(T.trex,t)},U=function(e,t){var i=0,n=0,r=0,o=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,i|n|r|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,t){var i,n,r,o;for(t+=20+16*(n=e.samples||[]).length,i=U(n,t),o=0;o<n.length;o++)r=n[o],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return a(T.trun,new Uint8Array(i))},j=function(e,t){var i,n,r,o;for(t+=20+8*(n=e.samples||[]).length,i=U(n,t),o=0;o<n.length;o++)r=n[o],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return a(T.trun,new Uint8Array(i))},b=function(e,t){return"audio"===e.type?j(e,t):B(e,t)};var z={ftyp:r=function(){return a(T.ftyp,S,C,S,w)},mdat:function(e){return a(T.mdat,e)},moof:e,moov:s,initSegment:function(e){var t,i=r(),n=s(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t}},W=function(){this.init=function(){var o={};this.on=function(e,t){o[e]||(o[e]=[]),o[e]=o[e].concat(t)},this.off=function(e,t){var i;return!!o[e]&&(i=o[e].indexOf(t),o[e]=o[e].slice(),o[e].splice(i,1),-1<i)},this.trigger=function(e){var t,i,n,r;if(t=o[e])if(2===arguments.length)for(n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=t.length,i=0;i<n;++i)t[i].apply(this,r)}},this.dispose=function(){o={}}}};W.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},W.prototype.push=function(e){this.trigger("data",e)},W.prototype.flush=function(e){this.trigger("done",e)};var V=W,G=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Q(0,0),new Q(0,1),new Q(1,0),new Q(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(G.prototype=new V).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,r=n=0}return i}(e.escapedRBSP)).payloadType&&(i=181!==(n=t).payload[0]?null:49!=(n.payload[1]<<8|n.payload[2])?null:"GA94"!==String.fromCharCode(n.payload[3],n.payload[4],n.payload[5],n.payload[6])?null:3!==n.payload[7]?null:n.payload.subarray(8,n.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));this.captionPackets_=this.captionPackets_.concat(function(e,t){var i,n,r,o,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)o={type:3&t[2+(r=3*i)],pts:e},4&t[r+2]&&(o.ccData=t[r+3]<<8|t[r+4],s.push(o));return s}(e.pts,i)),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},G.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},G.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},G.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},G.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},G.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var X={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Y=function(e){return null===e?"":(e=X[e]||e,String.fromCharCode(e))},$=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],K=function(){for(var e=[],t=15;t--;)e.push("");return e},Q=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(t===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(t===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=K();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=K();else if(t===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(n,r))o=Y((n=(3&n)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),o=Y((n=(3&n)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=$.indexOf(7968&t);s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),o=Y(n),o+=Y(r),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};Q.prototype=new V,Q.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Q.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=K(),this.nonDisplayed_=K(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},Q.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Q.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Q.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Q.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Q.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Q.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Q.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Q.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Q.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},Q.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Q.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},Q.prototype.rollUp=function(e,t){var i=this.displayed_[14];i+=t,this.displayed_[14]=i},Q.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<14;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[14]=""},Q.prototype.paintOn=function(){};var J={CaptionStream:G,Cea608Stream:Q},Z={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ee=function(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e},te=function e(t){var i,n;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=ee(e.dts,n),e.pts=ee(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.discontinuity=function(){i=n=void 0}};te.prototype=new V;var ie,ne=te,re=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},oe=function(e,t,i){return decodeURIComponent(re(e,t,i))},se=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},ae={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=oe(e.data,1,t),e.value=oe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=oe(e.data,1,t),e.url=oe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(re(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(ie=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(ie.prototype.init.call(this),this.dispatchType=Z.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,n,r,o;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug;else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=se(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},o=0;o<u;)t.data.set(c[0].data.subarray(0,u-o),o),o+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();i=10,64&t.data[5]&&(i+=4,i+=se(t.data.subarray(10,14)),u-=se(t.data.subarray(16,20)));do{if((n=se(t.data.subarray(i+4,i+8)))<1)return;if((r={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+n+10)}).key=r.id,ae[r.id]&&(ae[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var s=r.data,a=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;a*=4,a+=3&s[7],r.timeStamp=a,void 0===t.pts&&void 0===t.dts&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),i+=10,i+=n}while(i<u);this.trigger("data",t)}}}).prototype=new V;var le,ue,ce,de=ie,he=ne;(le=function(){var r=new Uint8Array(188),o=0;le.prototype.init.call(this),this.push=function(e){var t,i=0,n=188;for(o?((t=new Uint8Array(e.byteLength+o)).set(r.subarray(0,o)),t.set(e,o),o=0):t=e;n<t.byteLength;)71!==t[i]||71!==t[n]?(i++,n++):(this.trigger("data",t.subarray(i,n)),i+=188,n+=188);i<t.byteLength&&(r.set(t.subarray(i),0),o=t.byteLength-i)},this.flush=function(){188===o&&71===r[0]&&(this.trigger("data",r),o=0),this.trigger("done")}}).prototype=new V,(ue=function(){var n,r,o,s;ue.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===t.type?r(e.subarray(i),t):o(e.subarray(i),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},o=function(e,t){var i,n;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var r=e[n],o=(31&e[n+1])<<8|e[n+2];r===Z.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=o:r===Z.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=o:r===Z.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][o]=r),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},i=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(i+=e[i]+1),0===t.pid)t.type="pat",n(e.subarray(i),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",n(e.subarray(i),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,t]):this.processPes_(e,i,t)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Z.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Z.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new V,ue.STREAM_TYPES={h264:27,adts:15},(ce=function(){var h=this,n={data:[],size:0},r={data:[],size:0},o={data:[],size:0},s=function(e,t,i){var n,r,o=new Uint8Array(e.size),s={type:t},a=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,a=0;a<e.data.length;a++)r=e.data[a],o.set(r.data,l),l+=r.data.byteLength;var u,c,d;u=o,(c=s).packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!=(4&u[6]),192&(d=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&d&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8]),n="video"===t||s.packetLength<=e.size,(i||n)&&(e.size=0,e.data.length=0),n&&h.trigger("data",s)}};ce.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,t;switch(i.streamType){case Z.H264_STREAM_TYPE:case Z.H264_STREAM_TYPE:e=n,t="video";break;case Z.ADTS_STREAM_TYPE:e=r,t="audio";break;case Z.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=i.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),h.trigger("data",e)}})[i.type]()},this.flush=function(){s(n,"video"),s(r,"audio"),s(o,"timed-metadata"),this.trigger("done")}}).prototype=new V;var pe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:le,TransportParseStream:ue,ElementaryStream:ce,TimestampRolloverStream:he,CaptionStream:J.CaptionStream,Cea608Stream:J.Cea608Stream,MetadataStream:de};for(var fe in Z)Z.hasOwnProperty(fe)&&(pe[fe]=Z[fe]);var ge,me=pe,ye=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ge=function(){var u;ge.prototype.init.call(this),this.push=function(e){var t,i,n,r,o,s,a=0,l=0;if("audio"===e.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),u.set(e.data,r.byteLength)):u=e.data;a+5<u.length;)if(255===u[a]&&240==(246&u[a+1])){if(i=2*(1&~u[a+1]),t=(3&u[a+3])<<11|u[a+4]<<3|(224&u[a+5])>>5,s=9e4*(o=1024*(1+(3&u[a+6])))/ye[(60&u[a+2])>>>2],n=a+t,u.byteLength<n)return;if(this.trigger("data",{pts:e.pts+l*s,dts:e.dts+l*s,sampleCount:o,audioobjecttype:1+(u[a+2]>>>6&3),channelcount:(1&u[a+2])<<2|(192&u[a+3])>>>6,samplerate:ye[(60&u[a+2])>>>2],samplingfrequencyindex:(60&u[a+2])>>>2,samplesize:16,data:u.subarray(a+7+i,n)}),u.byteLength===n)return void(u=void 0);l++,u=u.subarray(n)}else a++},this.flush=function(){this.trigger("done")}}).prototype=new V;var ve,_e,be,Te=ge,Se=function(n){var r=n.byteLength,o=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=n.byteLength-r,t=new Uint8Array(4),i=Math.min(4,r);if(0===i)throw new Error("no bytes available");t.set(n.subarray(e,e+i)),o=new DataView(t.buffer).getUint32(0),s=8*i,r-=i},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),o<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),i=o>>>32-t;return 0<(s-=t)?o<<=t:0<r&&this.loadWord(),0<(t=e-t)?i<<t|this.readBits(t):i},this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e)if(0!=(o&2147483648>>>e))return o<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(_e=function(){var i,n,r=0;_e.prototype.init.call(this),this.push=function(e){var t;for(n?((t=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),t.set(e.data,n.byteLength),n=t):n=e.data;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&this.trigger("data",n.subarray(r+3,i-2));1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}this.trigger("data",n.subarray(r+3,i-2)),r=i-2,i+=3;break;default:i+=3}n=n.subarray(r),i-=r,r=0},this.flush=function(){n&&3<n.byteLength&&this.trigger("data",n.subarray(r+3)),n=null,r=0,this.trigger("done")}}).prototype=new V,be={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ve=function(){var i,n,r,o,s,a,_,t=new _e;ve.prototype.init.call(this),(i=this).push=function(e){"video"===e.type&&(n=e.trackId,r=e.pts,o=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:n,pts:r,dts:o,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=a(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",t)}),t.on("done",function(){i.trigger("done")}),this.flush=function(){t.flush()},_=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},s=function(e){for(var t,i,n=e.byteLength,r=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(o=0;o<t;s++,o++)s===r[0]&&(s++,r.shift()),i[o]=e[s];return i},a=function(e){var t,i,n,r,o,s,a,l,u,c,d,h,p,f=0,g=0,m=0,y=0,v=1;if(i=(t=new Se(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),be[i]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==o?8:12,p=0;p<d;p++)t.readBoolean()&&_(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),a=t.readUnsignedExpGolomb(),p=0;p<a;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(v=h[0]/h[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*f-2*g)*v),height:(2-c)*(u+1)*16-2*m-2*y}}}).prototype=new V;var Ce,we={H264Stream:ve,NalByteStream:_e};(Ce=function(){var a=new Uint8Array,l=0;Ce.prototype.init.call(this),this.setTimestamp=function(e){l=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},this.push=function(e){var t,i,n,r,o=0,s=0;for(a.length?(r=a.length,(a=new Uint8Array(e.byteLength+r)).set(a.subarray(0,r)),a.set(e,r)):a=e;3<=a.length-s;)if(a[s]!=="I".charCodeAt(0)||a[s+1]!=="D".charCodeAt(0)||a[s+2]!=="3".charCodeAt(0))if(!0&a[s]&&240==(240&a[s+1])){if(a.length-s<7)break;if((o=this.parseAdtsSize(a,s))>a.length)break;n={type:"audio",data:a.subarray(s,s+o),pts:l,dts:l},this.trigger("data",n),s+=o}else s++;else{if(a.length-s<10)break;if((o=this.parseId3TagSize(a,s))>a.length)break;i={type:"timed-metadata",data:a.subarray(s,s+o)},this.trigger("data",i),s+=o}t=a.length-s,a=0<t?a.subarray(s):new Uint8Array}}).prototype=new V;var ke,Ee,xe,Ae,Le,Pe,Ie,Oe,De,Me,Re,Ne,je,Be,Ue,Fe=Ce,He=[33,16,5,32,164,27],qe=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ze=function(e){for(var t=[];e--;)t.push(0);return t},We={96e3:[He,[227,64],ze(154),[56]],88200:[He,[231],ze(170),[56]],64e3:[He,[248,192],ze(240),[56]],48e3:[He,[255,192],ze(268),[55,148,128],ze(54),[112]],44100:[He,[255,192],ze(268),[55,163,128],ze(84),[112]],32e3:[He,[255,192],ze(268),[55,234],ze(226),[112]],24e3:[He,[255,192],ze(268),[55,255,128],ze(268),[111,112],ze(126),[224]],16e3:[He,[255,192],ze(268),[55,255,128],ze(268),[111,255],ze(269),[223,108],ze(195),[1,192]],12e3:[qe,ze(268),[3,127,248],ze(268),[6,255,240],ze(268),[13,255,224],ze(268),[27,253,128],ze(259),[56]],11025:[qe,ze(268),[3,127,248],ze(268),[6,255,240],ze(268),[13,255,224],ze(268),[27,255,192],ze(268),[55,175,128],ze(108),[112]],8e3:[qe,ze(268),[3,121,16],ze(47),[7]]},Ve=(ke=We,Object.keys(ke).reduce(function(e,t){return e[t]=new Uint8Array(ke[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),Ge=(Ee=function(e){return 9e4*e},xe=function(e,t){return e*t},Ae=function(e){return e/9e4},Le=function(e,t){return e/t},function(e,t){return Ee(Le(e,t))}),Xe=we.H264Stream,Ye=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],$e=["width","height","profileIdc","levelIdc","profileCompatibility"];Me=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Be=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Ue=function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i},(Ie=function(r,o){var s=[],a=0,t=0,d=0,h=1/0;o=o||{},Ie.prototype.init.call(this),this.push=function(t){Re(r,t),r&&Ye.forEach(function(e){r[e]=t[e]}),s.push(t)},this.setEarliestDts=function(e){t=e-r.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){h=e},this.setAudioAppendStart=function(e){d=e},this.flush=function(){var e,t,i,n;0!==s.length&&(e=this.trimAdtsFramesByEarliestDts_(s),r.baseMediaDecodeTime=je(r,o.keepOriginalTimestamps),this.prefixWithSilence_(r,e),r.samples=this.generateSampleTable_(e),i=z.mdat(this.concatenateFrameData_(e)),s=[],t=z.moof(a,[r]),n=new Uint8Array(t.byteLength+i.byteLength),a++,n.set(t),n.set(i,t.byteLength),Ne(r),this.trigger("data",{track:r,boxes:n})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,n,r,o,s,a,l=0,u=0,c=0;if(t.length&&(i=Ge(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),d&&h&&(l=i-Math.max(d,h),c=(u=Math.floor(l/n))*n),!(u<1||45e3<c))){for((r=Ve[e.samplerate])||(r=t[0].data),o=0;o<u;o++)t.splice(o,0,{data:r});e.baseMediaDecodeTime-=Math.floor((s=c,a=e.samplerate,xe(Ae(s),a)))}},this.trimAdtsFramesByEarliestDts_=function(e){return r.minSegmentDts>=t?e:(r.minSegmentDts=1/0,e.filter(function(e){return e.dts>=t&&(r.minSegmentDts=Math.min(r.minSegmentDts,e.dts),r.minSegmentPts=r.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(e){var t,i,n=0,r=new Uint8Array(Ue(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r}}).prototype=new V,(Pe=function(a,l){var t,i,u=0,c=[],d=[];l=l||{},Pe.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(e){Re(a,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,a.sps=[e.data],$e.forEach(function(e){a[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,a.pps=[e.data]),c.push(e)},this.flush=function(){for(var e,t,i,n,r,o;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=this.groupNalsIntoFrames_(c),(i=this.groupFramesIntoGops_(e))[0][0].keyFrame||((t=this.getGopForFusion_(c[0],a))?(i.unshift(t),i.byteLength+=t.byteLength,i.nalCount+=t.nalCount,i.pts=t.pts,i.dts=t.dts,i.duration+=t.duration):i=this.extendFirstKeyFrame_(i)),d.length){var s;if(!(s=l.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i)))return this.gopCache_.unshift({gop:i.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ne(a),i=s}Re(a,i),a.samples=this.generateSampleTable_(i),r=z.mdat(this.concatenateNalData_(i)),a.baseMediaDecodeTime=je(a,l.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:i.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),n=z.moof(u,[a]),o=new Uint8Array(n.byteLength+r.byteLength),u++,o.set(n),o.set(r,n.byteLength),this.trigger("data",{track:a,boxes:o}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){Ne(a),i=t=void 0},this.getGopForFusion_=function(e){var t,i,n,r,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)n=(r=this.gopCache_[o]).gop,a.pps&&Be(a.pps[0],r.pps[0])&&a.sps&&Be(a.sps[0],r.sps[0])&&(n.dts<a.timelineStartInfo.dts||-1e4<=(t=e.dts-n.dts-n.duration)&&t<=45e3&&(!i||t<s)&&(i=r,s=t));return i?i.gop:null},this.extendFirstKeyFrame_=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,i,n=[],r=[];for(t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.push(n),r},this.groupFramesIntoGops_=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},this.generateSampleTable_=function(e,t){var i,n,r,o,s,a=t||0,l=[];for(i=0;i<e.length;i++)for(o=e[i],n=0;n<o.length;n++)s=o[n],(r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=a,r.compositionTimeOffset=s.pts-s.dts,r.duration=s.duration,r.size=4*s.length,r.size+=s.byteLength,s.keyFrame&&(r.flags.dependsOn=2),a+=r.size,l.push(r);return l},this.concatenateNalData_=function(e){var t,i,n,r,o,s,a=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(o=r[i],n=0;n<o.length;n++)s=o[n],d.setUint32(a,s.data.byteLength),a+=4,c.set(s.data,a),a+=s.data.byteLength;return c},this.alignGopsAtStart_=function(e){var t,i,n,r,o,s,a,l;for(o=e.byteLength,s=e.nalCount,a=e.duration,t=i=0;t<d.length&&i<e.length&&(n=d[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,o-=r.byteLength,s-=r.nalCount,a-=r.duration);return 0===i?e:i===e.length?null:((l=e.slice(i)).byteLength=o,l.duration=a,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,i,n,r,o,s,a;for(t=d.length-1,i=e.length-1,o=null,s=!1;0<=t&&0<=i;){if(n=d[t],r=e[i],n.pts===r.pts){s=!0;break}n.pts>r.pts?t--:(t===d.length-1&&(o=i),i--)}if(!s&&null===o)return null;if(0===(a=s?i:o))return e;var l=e.slice(a),u=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){d=e}}).prototype=new V,Re=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ne=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},je=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},(De=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,De.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new V,De.prototype.flush=function(e){var t,i,n,r,o=0,s={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,$e.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Ye.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=z.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=t.startPts-a,t.startTime/=9e4,t.endTime=t.endPts-a,t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=i.pts-a,i.cueTime/=9e4,s.metadata.push(i);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(Oe=function(n){var r,o,s=this,i=!0;Oe.prototype.init.call(this),n=n||{},this.baseMediaDecodeTime=n.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new me.MetadataStream,t.aacStream=new Fe,t.audioTimestampRolloverStream=new me.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new me.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Te,t.coalesceStream=new De(n,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(o=o||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new Ie(o,n),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new me.MetadataStream,i.packetStream=new me.TransportPacketStream,i.parseStream=new me.TransportParseStream,i.elementaryStream=new me.ElementaryStream,i.videoTimestampRolloverStream=new me.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new me.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new me.TimestampRolloverStream("timed-metadata"),i.adtsStream=new Te,i.h264Stream=new Xe,i.captionStream=new me.CaptionStream,i.coalesceStream=new De(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?o||"audio"!==e.tracks[t].type||((o=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new Pe(r,n),i.videoSegmentStream.on("timelineStartInfo",function(e){o&&(o.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))}),i.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){o&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),o&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Ie(o,n),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,o&&(o.timelineStartInfo.dts=void 0,o.timelineStartInfo.pts=void 0,Ne(o),o.timelineStartInfo.baseMediaDecodeTime=e,t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Ne(r),t.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=e),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){o&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=Me(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new V;var Ke={Transmuxer:Oe,VideoSegmentStream:Pe,AudioSegmentStream:Ie,AUDIO_PROPERTIES:Ye,VIDEO_PROPERTIES:$e},Qe={generator:z,Transmuxer:Ke.Transmuxer,AudioSegmentStream:Ke.AudioSegmentStream,VideoSegmentStream:Ke.VideoSegmentStream},Je=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),Ze=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=e||{},this.init()}return Je(t,[{key:"init",value:function(){var e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Qe.Transmuxer(this.options),(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var i=e.data;e.data=i.buffer,H.postMessage({action:"data",segment:e,byteOffset:i.byteOffset,byteLength:i.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){H.postMessage({action:"caption",data:e})}),e.on("done",function(e){H.postMessage({action:"done"})}),e.on("gopInfo",function(e){H.postMessage({action:"gopInfo",gopInfo:e})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),t}();new function(e){tt.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Ze(e.data.options):(this.messageHandlers||(this.messageHandlers=new Ze),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(0)}()}),ll=function(e){return/mp4a\.\d+.\d+/i.test(e)},ul=function(e){return/avc1\.[\da-f]+/i.test(e)},cl=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})},dl=function(r){function o(e,t){y(this,o);var i=_(this,r.call(this,yo.EventTarget));i.timestampOffset_=0,i.pendingBuffers_=[],i.bufferUpdating_=!1,i.mediaSource_=e,i.codecs_=t,i.audioCodec_=null,i.videoCodec_=null,i.audioDisabled_=!1,i.appendAudioInitSegment_=!0,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=yo.browser.IE_VERSION;var n={remux:!1,alignGopsAtEnd:i.safeAppend_};return i.codecs_.forEach(function(e){ll(e)?i.audioCodec_=e:ul(e)&&(i.videoCodec_=e)}),i.transmuxer_=new al,i.transmuxer_.postMessage({action:"init",options:n}),i.transmuxer_.onmessage=function(e){return"data"===e.data.action?i.data_(e):"done"===e.data.action?i.done_(e):"gopInfo"===e.data.action?i.appendGopInfo_(e):void 0},Object.defineProperty(i,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(i,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(i,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(i,"buffered",{get:function(){var e=null,t=null,i=0,n=[],r=[];if(!this.videoBuffer_&&!this.audioBuffer_)return yo.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return yo.createTimeRange();for(var o=this.videoBuffer_.buffered,s=this.audioBuffer_.buffered,a=o.length;a--;)n.push({time:o.start(a),type:"start"}),n.push({time:o.end(a),type:"end"});for(a=s.length;a--;)n.push({time:s.start(a),type:"start"}),n.push({time:s.end(a),type:"end"});for(n.sort(function(e,t){return e.time-t.time}),a=0;a<n.length;a++)"start"===n[a].type?2==++i&&(e=n[a].time):"end"===n[a].type&&1==--i&&(t=n[a].time),null!==e&&null!==t&&(r.push([e,t]),t=e=null);return yo.createTimeRanges(r)}}),i}return v(o,r),o.prototype.data_=function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,i){var n=t.player_;if(i.captions&&i.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)if(!e.inbandTextTracks_[r]){n.tech_.trigger({type:"usage",name:"hls-608"});var o=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=o||n.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)},o.prototype.done_=function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0},o.prototype.createRealSourceBuffers_=function(){var n=this,r=["audio","video"];r.forEach(function(t){if(n[t+"Codec_"]&&!n[t+"Buffer_"]){var i=null;if(n.mediaSource_[t+"Buffer_"])(i=n.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+n[t+"Codec_"]+'"';i=function(e,t){var i=e.addSourceBuffer(t),n=Object.create(null);n.updating=!1,n.realBuffer_=i;var r=function(t){"function"==typeof i[t]?n[t]=function(){return i[t].apply(i,arguments)}:void 0===n[t]&&Object.defineProperty(n,t,{get:function(){return i[t]},set:function(e){return i[t]=e}})};for(var o in i)r(o);return n}(n.mediaSource_.nativeMediaSource_,e),n.mediaSource_[t+"Buffer_"]=i}n[t+"Buffer_"]=i,["update","updatestart","updateend"].forEach(function(e){i.addEventListener(e,function(){if("audio"!==t||!n.audioDisabled_)return"updateend"===e&&(n[t+"Buffer_"].updating=!1),r.every(function(e){return!("audio"!==e||!n.audioDisabled_)||t===e||!n[e+"Buffer_"]||!n[e+"Buffer_"].updating})?n.trigger(e):void 0})})}})},o.prototype.appendBuffer=function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,i){if(!t||!e.length)return[];var n=Math.ceil(9e4*(t.currentTime()-i+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)}(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})},o.prototype.appendGopInfo_=function(e){this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)},o.prototype.remove=function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil(9e4*(t-n)),o=Math.ceil(9e4*(i-n)),s=e.slice(),a=e.length;a--&&!(e[a].pts<=o););if(-1===a)return s;for(var l=a+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,a-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Ya(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)Ya(e,t,this.inbandTextTracks_[i])},o.prototype.processPendingSegments_=function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,n=t.data,r=t.initSegment;return e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[i].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),function(e,t,i){var r=m.WebKitDataCue||m.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),i){var o=$a(e.mediaSource_.duration);if(i.forEach(function(e){var n=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var t,i=new r(n,n,e.value||e.url||e.data||"");i.frame=e,i.value=e,t=i,Object.defineProperties(t.frame,{id:{get:function(){return yo.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return yo.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return yo.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),this.metadataTrack_.addCue(i)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var n=e.metadataTrack_.cues,s=[],a=0;a<n.length;a++)n[a]&&s.push(n[a]);var l=s.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),u=Object.keys(l).sort(function(e,t){return Number(e)-Number(t)});u.forEach(function(e,t){var i=l[e],n=Number(u[t+1])||o;i.forEach(function(e){e.endTime=n})})}}}(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1},o.prototype.concatAndAppendSegments_=function(e,t){var i=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach(function(e){n.set(e,i),i+=e.byteLength});try{t.updating=!0,t.appendBuffer(n)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}},o.prototype.abort=function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1},o}(yo.EventTarget),hl=function(t){function i(){y(this,i);var o=_(this,t.call(this)),e=void 0;for(e in o.nativeMediaSource_=new m.MediaSource,o.nativeMediaSource_)e in i.prototype||"function"!=typeof o.nativeMediaSource_[e]||(o[e]=o.nativeMediaSource_[e].bind(o.nativeMediaSource_));return o.duration_=NaN,Object.defineProperty(o,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(o,"seekable",{get:function(){return this.duration_===1/0?yo.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(o,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(o,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),o.sourceBuffers=[],o.activeSourceBuffers_=[],o.updateActiveSourceBuffers_=function(){if(o.activeSourceBuffers_.length=0,1===o.sourceBuffers.length){var e=o.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void o.activeSourceBuffers_.push(e)}for(var i=!1,n=!0,t=0;t<o.player_.audioTracks().length;t++){var r=o.player_.audioTracks()[t];if(r.enabled&&"main"!==r.kind){n=!(i=!0);break}}o.sourceBuffers.forEach(function(e,t){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=i;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=t?n:!n,e.audioDisabled_))return;o.activeSourceBuffers_.push(e)})},o.onPlayerMediachange_=function(){o.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},o.onHlsReset_=function(){o.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},o.onHlsSegmentTimeMapping_=function(t){o.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},o),o.on("sourceopen",function(e){var t=h.querySelector('[src="'+o.url_+'"]');t&&(o.player_=yo(t.parentNode),o.player_.tech_.on("hls-reset",o.onHlsReset_),o.player_.tech_.on("hls-segment-time-mapping",o.onHlsSegmentTimeMapping_),o.player_.audioTracks&&o.player_.audioTracks()&&(o.player_.audioTracks().on("change",o.updateActiveSourceBuffers_),o.player_.audioTracks().on("addtrack",o.updateActiveSourceBuffers_),o.player_.audioTracks().on("removetrack",o.updateActiveSourceBuffers_)),o.player_.on("mediachange",o.onPlayerMediachange_))}),o.on("sourceended",function(e){for(var t=$a(o.duration),i=0;i<o.sourceBuffers.length;i++){var n=o.sourceBuffers[i],r=n.metadataTrack_&&n.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),o.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),o}return v(i,t),i.prototype.addSeekableRange_=function(e,t){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)},i.prototype.addSourceBuffer=function(e){var r,t,i=void 0,n=(r={type:"",parameters:{}},t=e.trim().split(";"),r.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var i=t[0].replace(/"/g,"").trim(),n=t[1].replace(/"/g,"").trim();r.parameters[i]=n}}),r);if(/^(video|audio)\/mp2t$/i.test(n.type)){var o=[];n.parameters&&n.parameters.codecs&&(o=n.parameters.codecs.split(","),o=(o=cl(o)).filter(function(e){return ll(e)||ul(e)})),0===o.length&&(o=["avc1.4d400d","mp4a.40.2"]),i=new dl(this,o),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else i=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(i),i},i}(yo.EventTarget),pl=0;yo.mediaSources={};var fl=function(e,t){var i=yo.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})},gl=function(){return!!m.MediaSource&&!!m.MediaSource.isTypeSupported&&m.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},ml=function(){if(this.MediaSource={open:fl,supportsNativeMediaSources:gl},gl())return new hl;throw new Error("Cannot use create a virtual MediaSource for this video")};ml.open=fl,ml.supportsNativeMediaSources=gl;var yl={createObjectURL:function(e){var t=void 0;return e instanceof hl?(t=m.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof hl?(t="blob:vjs-media-source/"+pl,pl++,yo.mediaSources[t]=e,t):(t=m.URL.createObjectURL(e),e.url_=t)}};yo.MediaSource=ml,yo.URL=yl;var vl=yo.mergeOptions,_l=function(e,t){for(var s=vl(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),i=0;i<t.playlists.length;i++){var n=ha(s,t.playlists[i]);n&&(s=n)}return da(t,function(e,t,i,n){if(e.playlists&&e.playlists.length){var r=e.playlists[0].uri,o=ha(s,e.playlists[0]);o&&((s=o).mediaGroups[t][i][n].playlists[0]=s.playlists[r])}}),s},bl=function(o){function s(e,t,i,n){y(this,s);var r=_(this,o.call(this));if(r.hls_=t,r.withCredentials=i,!e)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_()}),"string"==typeof e?(r.srcUrl=e,r.state="HAVE_NOTHING",_(r)):(r.masterPlaylistLoader_=n,r.state="HAVE_METADATA",r.started=!0,r.media(e),m.setTimeout(function(){r.trigger("loadedmetadata")},0),r)}return v(s,o),s.prototype.dispose=function(){this.stopRequest(),m.clearTimeout(this.mediaUpdateTimeout)},s.prototype.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},s.prototype.media=function(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var t=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var i=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",i&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==t&&this.trigger("mediachange"))},s.prototype.pause=function(){this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1)},s.prototype.load=function(){this.started?this.trigger("loadedplaylist"):this.start()},s.prototype.parseMasterXml=function(){var o=rs(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});o.uri=this.srcUrl;for(var e=0;e<o.playlists.length;e++){var t="placeholder-uri-"+e;o.playlists[e].uri=t,o.playlists[t]=o.playlists[e]}return da(o,function(e,t,i,n){if(e.playlists&&e.playlists.length){var r="placeholder-uri-"+t+"-"+i+"-"+n;e.playlists[0].uri=r,o.playlists[r]=e.playlists[0]}}),pa(o),fa(o),o},s.prototype.start=function(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?i.masterLoaded_=Date.parse(t.responseHeaders.date):i.masterLoaded_=Date.now(),i.syncClientServerClock_(i.onClientServerClockSync_.bind(i))}})},s.prototype.syncClientServerClock_=function(n){var e,r=this,o=(e=this.masterXml_,function(e){var t=Yo(e,"UTCTiming")[0];if(!t)return null;var i=Jo(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(ns(e)));return null===o?(this.clientOffset_=this.masterLoaded_-Date.now(),n()):"DIRECT"===o.method?(this.clientOffset_=o.value-Date.now(),n()):void(this.request=this.hls_.xhr({uri:la(this.srcUrl,o.value),method:o.method,withCredentials:this.withCredentials},function(e,t){if(r.request){if(e)return r.clientOffset_=r.masterLoaded_-Date.now(),n();var i;i="HEAD"===o.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):r.masterLoaded_:Date.parse(t.responseText),r.clientOffset_=i-Date.now(),n()}}))},s.prototype.onClientServerClockSync_=function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),m.setTimeout(function(){e.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&m.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)},s.prototype.refreshXml_=function(){var n=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=t.responseText;var i=n.parseMasterXml();n.master=_l(n.master,i),m.setTimeout(function(){n.trigger("minimumUpdatePeriod")},n.master.minimumUpdatePeriod)}})},s.prototype.refreshMedia_=function(){var e=this,t=void 0,i=void 0;this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,i=this.masterPlaylistLoader_.parseMasterXml()):(t=this.master,i=this.parseMasterXml());var n=_l(t,i);n?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=n:this.master=n,this.media_=n.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=m.setTimeout(function(){e.trigger("mediaupdatetimeout")},ga(this.media(),!!n))),this.trigger("loadedplaylist")},s}(yo.EventTarget),Tl=function(e){return yo.log.debug?yo.log.debug.bind(yo,"VHS:",e+" >"):function(){}};function Sl(){}var Cl=function(){function r(e,t,i,n){y(this,r),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=i,this.mimeType_=t,this.logger_=Tl("SourceUpdater["+i+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,n)):this.createSourceBuffer_(t,n)}return r.prototype.createSourceBuffer_=function(e,t){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){i.start_()}):this.start_()},r.prototype.start_=function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.logger_("buffered ["+Ga(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()},r.prototype.abort=function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)},r.prototype.appendBuffer=function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){i.sourceBuffer_.appendBuffer(e)},t)},r.prototype.buffered=function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:yo.createTimeRanges()},r.prototype.remove=function(e,t){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.remove(e,t)},Sl)},r.prototype.updating=function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_},r.prototype.timestampOffset=function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_},r.prototype.queueCallback_=function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()},r.prototype.runCallback_=function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())},r.prototype.dispose=function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()},r}(),wl={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},kl=function(e){var t,i,n={};return e.byterange&&(n.Range=(i=(t=e.byterange).offset+t.length-1,"bytes="+t.offset+"-"+i)),n},El=function(e){e.forEach(function(e){e.abort()})},xl=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:null},Al=function(e,t,i,n,r,o){var s,a,l,u,c,d,h,p,f,g=[],m=(c=g,d=i,h=o,p=[],f=0,function(e,t){if(e&&(El(c),p.push(e)),(f+=1)===c.length){if(t.endOfAllRequests=Date.now(),0<p.length){var i=p.reduce(function(e,t){return t.code>e.code?t:e});return h(i,t)}return t.encryptedBytes?(r=t,o=h,(n=d).addEventListener("message",function e(t){if(t.data.source===r.requestId){n.removeEventListener("message",e);var i=t.data.decrypted;return r.bytes=new Uint8Array(i.bytes,i.byteOffset,i.byteLength),o(null,r)}}),void n.postMessage(Ba({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])):h(null,t)}var n,r,o});if(n.key){var y=e(yo.mergeOptions(t,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),(s=n,a=m,function(e,t){var i=t.response,n=xl(e,t);if(n)return a(n,s);if(16!==i.byteLength)return a({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:2,xhr:t},s);var r=new DataView(i);return s.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),a(null,s)}));g.push(y)}if(n.map&&!n.map.bytes){var v=e(yo.mergeOptions(t,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:kl(n.map)}),(l=n,u=m,function(e,t){var i=t.response,n=xl(e,t);return n?u(n,l):0===i.byteLength?u({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:2,xhr:t},l):(l.map.bytes=new Uint8Array(t.response),u(null,l))}));g.push(v)}var _,b,T,S,C=e(yo.mergeOptions(t,{uri:n.resolvedUri,responseType:"arraybuffer",headers:kl(n)}),(_=n,b=m,function(e,t){var i,n=t.response,r=xl(e,t);return r?b(r,_):0===n.byteLength?b({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:2,xhr:t},_):(_.stats={bandwidth:(i=t).bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0},_.key?_.encryptedBytes=new Uint8Array(t.response):_.bytes=new Uint8Array(t.response),b(null,_))}));return C.addEventListener("progress",(T=n,S=r,function(e){var t,i,n;return T.stats=yo.mergeOptions(T.stats,(i=(t=e).target,(n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n)),!T.stats.firstBytesReceivedAt&&T.stats.bytesReceived&&(T.stats.firstBytesReceivedAt=Date.now()),S(e,T)})),g.push(C),function(){return El(g)}},Ll={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Pl=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i={codecCount:0};return i.codecCount=t.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),i.audioProfile=i.audioProfile&&i.audioProfile[2],i},Il=function(e,t,i){return e+"/"+t+'; codecs="'+i.filter(function(e){return!!e}).join(", ")+'"'},Ol=function(e,t){var i;return e&&(i=m.getComputedStyle(e))?i[t]:""},Dl=function(e,n){var r=e.slice();e.sort(function(e,t){var i=n(e,t);return 0===i?r.indexOf(e)-r.indexOf(t):i})},Ml=function(e,t){var i=void 0,n=void 0;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||m.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),i-(n||m.Number.MAX_VALUE)},Rl=function(e,t,i){if(!e||!t)return!1;var n=i===e.segments.length;return e.endList&&"open"===t.readyState&&n},Nl=function(e){return"number"==typeof e&&isFinite(e)},jl=function(i){function n(e){y(this,n);var t=_(this,i.call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Tl("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return v(n,i),n.prototype.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},n.prototype.dispose=function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()},n.prototype.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.prototype.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null},n.prototype.error=function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_},n.prototype.endOfStream=function(){this.ended_=!0,this.pause(),this.trigger("ended")},n.prototype.buffered_=function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():yo.createTimeRanges()},n.prototype.initSegment=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Ua(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes}),n||e},n.prototype.couldBeginLoading_=function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()},n.prototype.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},n.prototype.init_=function(){return this.state="READY",this.sourceUpdater_=new Cl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()},n.prototype.playlist=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=i?i.id:null;if(this.logger_("playlist update ["+r+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var o=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex&&(this.mediaIndex-=o),n&&(n.mediaIndex-=o,0<=n.mediaIndex&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}},n.prototype.pause=function(){this.checkBufferTimeout_&&(m.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.prototype.paused=function(){return null===this.checkBufferTimeout_},n.prototype.mimeType=function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())},n.prototype.resetEverything=function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")},n.prototype.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.prototype.resyncLoader=function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()},n.prototype.remove=function(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t),Ya(e,t,this.segmentMetadataTrack_)},n.prototype.monitorBuffer_=function(){this.checkBufferTimeout_&&m.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=m.setTimeout(this.monitorBufferTick_.bind(this),1)},n.prototype.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&m.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=m.setTimeout(this.monitorBufferTick_.bind(this),500)},n.prototype.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(Rl(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.loadSegment_(e)))}},n.prototype.checkBuffer_=function(e,t,i,n,r,o){var s=0,a=void 0;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&1<=l)return null;if(null===o)return i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0);if(null!==i){var u=t.segments[i];return a=u&&u.end?u.end:s,this.generateSegmentInfo_(t,i+1,a,!1)}if(this.fetchAtBuffer_){var c=Oa.getMediaInfoForTime(t,s,o.segmentIndex,o.time);i=c.mediaIndex,a=c.startTime}else{var d=Oa.getMediaInfoForTime(t,r,o.segmentIndex,o.time);i=d.mediaIndex,a=d.startTime}return this.generateSegmentInfo_(t,i,a,!1)},n.prototype.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},n.prototype.generateSegmentInfo_=function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}},n.prototype.abortRequestEarly_=function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=Oa.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),o=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=o)return!1;var s=function(e){var i=e.currentTime,n=e.bandwidth,r=e.duration,o=e.segmentDuration,s=e.timeUntilRebuffer,a=e.currentTimeline,l=e.syncController,t=e.master.playlists.filter(function(e){return!Oa.isIncompatible(e)}),u=t.filter(Oa.isEnabled);u.length||(u=t.filter(function(e){return!Oa.isDisabled(e)}));var c=u.filter(Oa.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,a,i)?1:2;return{playlist:e,rebufferingImpact:Oa.estimateSegmentRequestTime(o,n,e)*t-s}}),d=c.filter(function(e){return e.rebufferingImpact<=0});return Dl(d,function(e,t){return Ml(t.playlist,e.playlist)}),d.length?d[0]:(Dl(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var a=r-o-s.rebufferingImpact,l=.5;return o<=qa&&(l=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||a<l)&&(this.bandwidth=s.playlist.attributes.BANDWIDTH*wl.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}},n.prototype.handleProgress_=function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")},n.prototype.loadSegment_=function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Al(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))},n.prototype.trimBackBuffer_=function(e){var t,i,n,r,o=(t=this.seekable_(),i=this.currentTime_(),n=this.playlist_.targetDuration||10,void 0,r=t.length&&0<t.start(0)&&t.start(0)<i?t.start(0):i-30,Math.min(r,i-n));0<o&&this.remove(0,o)},n.prototype.createSimplifiedSegmentObj_=function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key={resolvedUri:t.key.resolvedUri,iv:n}}return t.map&&(i.map=this.initSegment(t.map)),i},n.prototype.segmentRequestFinished_=function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",-102===e.code?void(this.mediaRequestsAborted+=1):(this.pause(),-101===e.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1},n.prototype.processSegmentResponse_=function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,this.handleSegment_()},n.prototype.handleSegment_=function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,n=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var r,o,s,a=(r=this.loaderType_,o=this.startingMedia_,s=n,"main"===r&&o&&s?s.containsAudio||s.containsVideo?o.containsVideo&&!s.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!o.containsVideo&&s.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(a)return this.error({message:a,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var l,u,c,d,h,p,f,g,m,y,v,_=this.syncController_.mappingForTimeline(t.timeline);if(null!==_&&this.trigger({type:"segmenttimemapping",mapping:_}),this.state="APPENDING",i.map){var b=Ua(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==b){var T=this.initSegment(i.map);this.sourceUpdater_.appendBuffer(T.bytes,function(){e.activeInitSegmentId_=b})}}t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_((c=(u=(l=t).segment).start,d=u.end,p=(h=l.playlist).mediaSequence,f=h.id,m=void 0===(g=h.segments)?[]:g,y=l.mediaIndex,v=l.timeline,["appending ["+y+"] of ["+p+", "+(p+m.length)+"] from playlist ["+f+"]","["+c+" => "+d+"] in timeline ["+v+"]"].join(" "))),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"},n.prototype.handleUpdateEnd_=function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),Rl(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())},n.prototype.recordThroughput_=function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count},n.prototype.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,n=t.end;if(Nl(i)&&Nl(n)){Ya(i,n,this.segmentMetadataTrack_);var r=m.WebKitDataCue||m.VTTCue,o={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:i,end:n},s=new r(i,n,JSON.stringify(o));s.value=o,this.segmentMetadataTrack_.addCue(s)}}},n}(yo.EventTarget),Bl=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Ul=function(e){return String.fromCharCode.apply(null,e)},Fl=function(n){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};y(this,r);var i=_(this,n.call(this,e,t));return i.mediaSource_=null,i.subtitlesTrack_=null,i}return v(r,n),r.prototype.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return yo.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return yo.createTimeRanges([[t,i]])},r.prototype.initSegment=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Ua(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=Bl.byteLength+e.bytes.byteLength,o=new Uint8Array(r);o.set(e.bytes),o.set(Bl,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return n||e},r.prototype.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.prototype.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.prototype.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},r.prototype.remove=function(e,t){Ya(e,t,this.subtitlesTrack_)},r.prototype.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},r.prototype.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},r.prototype.handleSegment_=function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,i=e.segment;if("function"!=typeof m.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=function(){t.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",n),void this.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",n),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")})}i.requested=!0;try{this.parseVTTCues_(e)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"},r.prototype.parseVTTCues_=function(t){var e=void 0,i=!1;"function"==typeof m.TextDecoder?e=new m.TextDecoder("utf8"):(e=m.WebVTT.StringDecoder(),i=!0);var n=new m.WebVTT.Parser(m,m.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=function(e){return t.timestampmap=e},n.onparsingerror=function(e){yo.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;i&&(r=Ul(r)),n.parse(r)}var o=t.bytes;i&&(o=Ul(o)),n.parse(o),n.flush()},r.prototype.updateTimeMapping_=function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,o=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=o,e.endTime+=o}),!i.syncInfo){var s=e.cues[0].startTime,a=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(s,a-n.duration)}}}else n.empty=!0},r}(jl),Hl=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},ql=function(e,t){var i,n;return(n=(i=e)[0]==="I".charCodeAt(0)&&i[1]==="D".charCodeAt(0)&&i[2]==="3".charCodeAt(0)?function(e){for(var t,i=!1,n=0,r=null,o=null,s=0,a=0;3<=e.length-a;){switch($s.aac.parseType(e,a)){case"timed-metadata":if(e.length-a<10){i=!0;break}if((s=$s.aac.parseId3TagSize(e,a))>e.length){i=!0;break}null===o&&(t=e.subarray(a,a+s),o=$s.aac.parseAacTimestamp(t)),a+=s;break;case"audio":if(e.length-a<7){i=!0;break}if((s=$s.aac.parseAdtsSize(e,a))>e.length){i=!0;break}null===r&&(t=e.subarray(a,a+s),r=$s.aac.parseSampleRate(t)),n++,a+=s;break;default:a++}if(i)return null}if(null===r||null===o)return null;var l=9e4/r;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*n*l,pts:o+1024*n*l}]}}(e):function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=Ks;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(i=e.subarray(n,r),$s.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=$s.ts.parsePat(i));break;case"pmt":t.table||(t.table=$s.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=Ks,r+=Ks}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case Cs.H264_STREAM_TYPE:i.video=[],Js(e,t,i),0===i.video.length&&delete i.video;break;case Cs.ADTS_STREAM_TYPE:i.audio=[],Qs(e,t,i),0===i.audio.length&&delete i.audio}return i}(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Ys(e.dts,i),e.pts=Ys(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=Ys(e.dts,n),e.pts=Ys(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Ys(r.dts,n),r.pts=Ys(r.pts,n),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(n,t),n):null},zl=[{name:"VOD",run:function(e,t,i,n,r){return i!==1/0?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var o=t.segments||[],s=null,a=null;r=r||0;for(var l=0;l<o.length;l++){var u=o[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==a&&a<d)break;a=d,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,i,n,r){var o=t.segments||[],s=null,a=null;r=r||0;for(var l=0;l<o.length;l++){var u=o[l];if(u.timeline===n&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==a&&a<c)break;(!s||null===a||c<=a)&&(a=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,i,n,r){var o=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,a=0;a<t.discontinuityStarts.length;a++){var l=t.discontinuityStarts[a],u=t.discontinuitySequence+a+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!o||null===s||d<=s)&&(s=d,o={time:c.time,segmentIndex:l})}}return o}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],Wl=function(t){function i(){y(this,i);var e=_(this,t.call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Tl("SyncController"),e}return v(i,t),i.prototype.getSyncPoint=function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.prototype.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+ba(e,n.segmentIndex,0))},i.prototype.runStrategies_=function(e,t,i,n){for(var r=[],o=0;o<zl.length;o++){var s=zl[o],a=s.run(this,e,t,i,n);a&&(a.strategy=s.name,r.push({strategy:s.name,syncPoint:a}))}return r},i.prototype.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,o=1;o<e.length;o++){var s=Math.abs(e[o].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[o].syncPoint,r=e[o].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},i.prototype.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;0<=i;i--){var n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.prototype.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},i.prototype.reset=function(){this.inspectCache_=void 0},i.prototype.probeSegmentInfo=function(e){var t,i=e.segment,n=e.playlist;return(t=i.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,t)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:i.start})),t},i.prototype.probeMp4Segment_=function(e){var r,t,i,n,o,s,a=e.segment,l=(s=a.map.bytes,bo(s,["moov","trak"]).reduce(function(e,t){var i,n,r,o,s;return(i=bo(t,["tkhd"])[0])?(n=i[0],o=ls(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(s=bo(t,["mdia","mdhd"])[0])?(r=0===(n=s[0])?12:20,e[o]=ls(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),e):null):null},{})),u=(r=l,t=e.bytes,i=bo(t,["moof","traf"]),n=[].concat.apply([],i.map(function(n){return bo(n,["tfhd"]).map(function(e){var t,i;return t=ls(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),i=r[t]||9e4,(bo(n,["tfdt"]).map(function(e){var t,i;return t=e[0],i=ls(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=ls(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/i})})),o=Math.min.apply(null,n),isFinite(o)?o:0);return null!==e.timestampOffset&&(e.timestampOffset-=u),{start:u,end:u+a.duration}},i.prototype.probeTsSegment_=function(e){var t=ql(e.bytes,this.inspectCache_),i=void 0,n=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,n=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,n=t.audio[1].dtsTime),{start:i,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null},i.prototype.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},i.prototype.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},i.prototype.calculateSegmentTimeMapping_=function(e,t){var i=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),i.start=e.startOfSegment,i.end=t.end+n.mapping;else{if(!n)return!1;i.start=t.start+n.mapping,i.end=t.end+n.mapping}return!0},i.prototype.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],o=t.discontinuitySequence+n+1,s=r-e.mediaIndex,a=Math.abs(s);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>a){var l;l=s<0?i.start-ba(t,e.mediaIndex,r):i.end+ba(t,e.mediaIndex+1,r),this.discontinuities[o]={time:l,accuracy:a}}}},i}(yo.EventTarget),Vl=new il("./decrypter-worker.worker.js",function(e,t){var i,o,d,n,r,h,p,m,s,u,y,a,l=this;i=void 0!==e?e:"undefined"!=typeof global?global:void 0!==this?this:{},o=void 0!==e?e:void 0!==i?i:void 0!==this?this:{},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":g(t))&&"function"!=typeof t?e:t},h=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],o=void 0,s=void 0,a=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(o=0;o<256;o++)u[(l[o]=o<<1^283*(o>>7))^o]=o;for(s=a=0;!n[s];s^=c||1,a=u[a]||1)for(h=(h=a^a<<1^a<<2^a<<3^a<<4)>>8^255&h^99,f=16843009*l[d=l[c=l[r[n[s]=h]=s]]]^65537*d^257*c^16843008*s,p=257*l[h]^16843008*h,o=0;o<4;o++)t[o][s]=p=p<<24^p>>>8,i[o][h]=f=f<<24^f>>>8;for(o=0;o<5;o++)t[o]=t[o].slice(0),i[o]=i[o].slice(0);return e},p=null,m=function(){function c(e){d(this,c),p||(p=h()),this._tables=[[p[0][0].slice(),p[0][1].slice(),p[0][2].slice(),p[0][3].slice(),p[0][4].slice()],[p[1][0].slice(),p[1][1].slice(),p[1][2].slice(),p[1][3].slice(),p[1][4].slice()]];var t=void 0,i=void 0,n=void 0,r=void 0,o=void 0,s=this._tables[0][4],a=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),o=[],this._key=[r,o],t=l;t<4*l+28;t++)n=r[t-1],(t%l==0||8===l&&t%l==4)&&(n=s[n>>>24]<<24^s[n>>16&255]<<16^s[n>>8&255]<<8^s[255&n],t%l==0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^n;for(i=0;t;i++,t--)n=r[3&i?t:t-4],o[i]=t<=4||i<4?n:a[0][s[n>>>24]]^a[1][s[n>>16&255]]^a[2][s[n>>8&255]]^a[3][s[255&n]]}return c.prototype.decrypt=function(e,t,i,n,r,o){var s=this._key[1],a=e^s[0],l=n^s[1],u=i^s[2],c=t^s[3],d=void 0,h=void 0,p=void 0,f=s.length/4-2,g=void 0,m=4,y=this._tables[1],v=y[0],_=y[1],b=y[2],T=y[3],S=y[4];for(g=0;g<f;g++)d=v[a>>>24]^_[l>>16&255]^b[u>>8&255]^T[255&c]^s[m],h=v[l>>>24]^_[u>>16&255]^b[c>>8&255]^T[255&a]^s[m+1],p=v[u>>>24]^_[c>>16&255]^b[a>>8&255]^T[255&l]^s[m+2],c=v[c>>>24]^_[a>>16&255]^b[l>>8&255]^T[255&u]^s[m+3],m+=4,a=d,l=h,u=p;for(g=0;g<4;g++)r[(3&-g)+o]=S[a>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^s[m++],d=a,a=l,l=u,u=c,c=d},c}(),s=function(){function e(){d(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),u=function(t){function i(){d(this,i);var e=r(this,t.call(this,s));return e.jobs=[],e.delay=1,e.timeout_=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(s),y=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},a=function(){function l(e,t,i,n){d(this,l);var r=l.STEP,o=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),a=0;for(this.asyncStream_=new u,this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),t,i,s)),a=r;a<o.length;a+=r)i=new Uint32Array([y(o[a-4]),y(o[a-3]),y(o[a-2]),y(o[a-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),t,i,s));this.asyncStream_.push(function(){var e;n(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}return l.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new m(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),s=new Int32Array(o.buffer),a=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0;for(a=i[0],l=i[1],u=i[2],c=i[3],g=0;g<n.length;g+=4)d=y(n[g]),h=y(n[g+1]),p=y(n[g+2]),f=y(n[g+3]),r.decrypt(d,h,p,f,s,g),s[g]=y(s[g]^a),s[g+1]=y(s[g+1]^l),s[g+2]=y(s[g+2]^u),s[g+3]=y(s[g+3]^c),a=d,l=h,u=p,c=f;return o}(t,i,n);r.set(e,t.byteOffset)}},n(l,null,[{key:"STEP",get:function(){return 32e3}}]),l}(),new function(e){l.onmessage=function(e){var r=e.data,t=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),i=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),n=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new a(t,i,n,function(e,t){var i,n;o.postMessage((i={source:r.source,decrypted:t},n={},Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n),[t.buffer])})}}(0)}),Gl=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Xl=function(e,t){(t.activePlaylistLoader=e).load()},Yl={AUDIO:function(l,u){return function(){var e=u.segmentLoaders[l],t=u.mediaTypes[l],i=u.blacklistCurrentPlaylist;Gl(e,t);var n=t.activeTrack(),r=t.activeGroup(),o=(r.filter(function(e){return e.default})[0]||r[0]).id,s=t.tracks[o];if(n!==s){for(var a in yo.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[a].enabled=t.tracks[a]===s;t.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(n,r){return function(){var e=r.segmentLoaders[n],t=r.mediaTypes[n];yo.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Gl(e,t);var i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}}},$l={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,o=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();o.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),r),n.paused()||o.load()}),t.on("error",Yl[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,o=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();o.playlist(e,r),o.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),r),n.paused()||o.load()}),t.on("error",Yl[e](e,i))}},Kl=function(t,i){return function(e){return e.attributes[t]===i}},Ql=function(t){return function(e){return e.resolvedUri===t}},Jl={AUDIO:function(e,t){var i,n,r=t.hls,o=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions.withCredentials,l=t.master,u=l.mediaGroups,c=l.playlists,d=t.mediaTypes[e],h=d.groups,p=d.tracks,f=t.masterPlaylistLoader;for(var g in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}}),u[e]){h[g]||(h[g]=[]);var m=c.filter(Kl(e,g));for(var y in u[e][g]){var v=u[e][g][y];m.filter(Ql(v.resolvedUri)).length&&delete v.resolvedUri;var _;if(_=v.resolvedUri?new ma(v.resolvedUri,r,a):v.playlists&&"dash"===o?new bl(v.playlists[0],r,a,f):null,v=yo.mergeOptions({id:y,playlistLoader:_},v),$l[e](e,v.playlistLoader,t),h[g].push(v),void 0===p[y]){var b=new yo.AudioTrack({id:y,kind:(i=v,n=void 0,n=i.default?"main":"alternative",i.characteristics&&0<=i.characteristics.indexOf("public.accessibility.describes-video")&&(n="main-desc"),n),enabled:!1,language:v.language,default:v.default,label:y});p[y]=b}}}s.on("error",Yl[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.hls,r=t.sourceType,o=t.segmentLoaders[e],s=t.requestOptions.withCredentials,a=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in a[e])for(var p in u[h]||(u[h]=[]),a[e][h])if(!a[e][h][p].forced){var f=a[e][h][p],g=void 0;if("hls"===r?g=new ma(f.resolvedUri,n,s):"dash"===r&&(g=new bl(f.playlists[0],n,s,d)),f=yo.mergeOptions({id:p,playlistLoader:g},f),$l[e](e,f.playlistLoader,t),u[h].push(f),void 0===c[p]){var m=i.addRemoteTextTrack({id:p,kind:"subtitles",enabled:!1,language:f.language,label:p},!1).track;c[p]=m}}o.on("error",Yl[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],o=r.groups,s=r.tracks;for(var a in n[e])for(var l in o[a]||(o[a]=[]),n[e][a]){var u=n[e][a][l];if(u.instreamId.match(/CC\d/)&&(o[a].push(yo.mergeOptions({id:l},u)),void 0===s[l])){var c=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",enabled:!1,language:u.language,label:l},!1).track;s[l]=c}}}},Zl={AUDIO:function(i,n){return function(){var e=n.mediaTypes[i].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function(i,n){return function(){var e=n.mediaTypes[i].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}},eu=void 0,tu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],iu=function(p){function f(e){y(this,f);var t,i=_(this,p.call(this)),n=e.url,r=e.withCredentials,o=e.tech,s=e.bandwidth,a=e.externHls,l=e.useCueTags,u=e.blacklistDuration,c=e.enableLowInitialPlaylist,d=e.sourceType;if(!n)throw new Error("A non-empty playlist URL is required");eu=a,i.withCredentials=r,i.tech_=o,i.hls_=o.hls,i.sourceType_=d,i.useCueTags_=l,i.blacklistDuration=u,i.enableLowInitialPlaylist=c,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:i.withCredentials,timeout:null},i.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Sl,activeTrack:Sl,onGroupChanged:Sl,onTrackChanged:Sl}}),t),i.mediaSource=new yo.MediaSource,i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i)),i.seekable_=yo.createTimeRanges(),i.hasPlayed_=function(){return!1},i.syncController_=new Wl(e),i.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Vl;var h={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_()},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:s,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_};return i.masterPlaylistLoader_="dash"===i.sourceType_?new bl(n,i.hls_,i.withCredentials):new ma(n,i.hls_,i.withCredentials),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new jl(yo.mergeOptions(h,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new jl(yo.mergeOptions(h,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new Fl(yo.mergeOptions(h,{loaderType:"vtt"}),e),i.setupSegmentLoaderListeners_(),tu.forEach(function(e){i[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(i,e)}),i.logger_=Tl("MPC"),i.masterPlaylistLoader_.load(),i}return v(f,p),f.prototype.setupMasterPlaylistLoaderListeners_=function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=n.masterPlaylistLoader_.media(),t=1.5*n.masterPlaylistLoader_.targetDuration*1e3;Ia(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=t,e.endList&&"none"!==n.tech_.preload()&&(n.mainSegmentLoader_.playlist(e,n.requestOptions_),n.mainSegmentLoader_.load()),function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){Jl[e](e,t)});var i=t.mediaTypes,e=t.masterPlaylistLoader,n=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){var o,s,a,l,u,c;i[e].activeGroup=(o=e,s=t,function(t){var e=s.masterPlaylistLoader,i=s.mediaTypes[o].groups,n=e.media();if(!n)return null;var r=null;return n.attributes[o]&&(r=i[n.attributes[o]]),r=r||i.main,void 0===t?r:null===t?null:r.filter(function(e){return e.id===t.id})[0]||null}),i[e].activeTrack=Zl[e](e,t),i[e].onGroupChanged=(a=e,l=t,function(){var e=l.segmentLoaders,t=e[a],i=e.main,n=l.mediaTypes[a],r=n.activeTrack(),o=n.activeGroup(r),s=n.activePlaylistLoader;Gl(t,n),o&&(o.playlistLoader?(t.resyncLoader(),Xl(o.playlistLoader,n)):s&&i.resetEverything())}),i[e].onTrackChanged=(u=e,c=t,function(){var e=c.segmentLoaders,t=e[u],i=e.main,n=c.mediaTypes[u],r=n.activeTrack(),o=n.activeGroup(r),s=n.activePlaylistLoader;Gl(t,n),o&&(o.playlistLoader?(s!==o.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),Xl(o.playlistLoader,n)):i.resetEverything())})});var o=i.AUDIO.activeGroup(),s=(o.filter(function(e){return e.default})[0]||o[0]).id;i.AUDIO.tracks[s].enabled=!0,i.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanged()})});var a=function(){i.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})};for(var l in n.audioTracks().addEventListener("change",a),n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",a),n.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),i.AUDIO.tracks)n.audioTracks().addTrack(i.AUDIO.tracks[l])}({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,hls:n.hls_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)}),n.triggerPresenceUsage_(n.master(),e);try{n.setupSourceBuffers_()}catch(e){return yo.log.warn("Failed to create SourceBuffers",e),n.mediaSource.endOfStream("decode")}n.setupFirstPlay(),n.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=n.masterPlaylistLoader_.media();if(!e){n.excludeUnsupportedVariants_();var t=void 0;return n.enableLowInitialPlaylist&&(t=n.selectInitialPlaylist()),t||(t=n.selectPlaylist()),n.initialMedia_=t,void n.masterPlaylistLoader_.media(n.initialMedia_)}if(n.useCueTags_&&n.updateAdCues_(e),n.mainSegmentLoader_.playlist(e,n.requestOptions_),n.updateDuration(),n.tech_.paused()||n.mainSegmentLoader_.load(),!e.endList){var i=function(){var e=n.seekable();0!==e.length&&n.mediaSource.addSeekableRange_(e.start(0),e.end(0))};n.duration()!==1/0?n.tech_.one("durationchange",function e(){n.duration()===1/0?i():n.tech_.one("durationchange",e)}):i()}}),this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=n.masterPlaylistLoader_.media(),t=1.5*n.masterPlaylistLoader_.targetDuration*1e3;Ia(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=t,n.mainSegmentLoader_.playlist(e,n.requestOptions_),n.mainSegmentLoader_.load(),n.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=n.masterPlaylistLoader_.media();n.stuckAtPlaylistEnd_(e)&&(n.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),n.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},f.prototype.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var o in i.AUDIO)for(var s in i.AUDIO[o])i.AUDIO[o][s].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),eu.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),eu.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(i.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})},f.prototype.setupSegmentLoaderListeners_=function(){var o=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=o.selectPlaylist(),t=o.masterPlaylistLoader_.media(),i=o.tech_.buffered(),n=i.length?i.end(i.length-1)-o.tech_.currentTime():0,r=o.bufferLowWaterLine();(!t.endList||o.duration()<wl.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r<=n)&&o.masterPlaylistLoader_.media(e),o.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){o.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){o.blacklistCurrentPlaylist(o.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){o.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){o.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){o.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){o.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){o.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){o.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){o.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){o.onEndOfStream()})},f.prototype.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},f.prototype.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},f.prototype.fastQualityChange_=function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},f.prototype.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},f.prototype.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(yo.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0},f.prototype.handleSourceOpen_=function(){try{this.setupSourceBuffers_()}catch(e){return yo.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")},f.prototype.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()},f.prototype.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=eu.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var o=r.end(r.length-1);return o-n<=.1&&i-o<=.1},f.prototype.blacklistCurrentPlaylist=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=void 0;if(n=t.playlist||this.masterPlaylistLoader_.media(),i=i||t.blacklistDuration||this.blacklistDuration,!n){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(La).length;return r?(yo.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(n.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),e=this.selectPlaylist(),yo.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(e))},f.prototype.pauseLoading=function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()},f.prototype.setCurrentTime=function(e){var t=Wa(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},f.prototype.duration=function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:eu.Playlist.duration(this.masterPlaylistLoader_.media()):0},f.prototype.seekable=function(){return this.seekable_},f.prototype.onSyncInfoUpdate_=function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==n&&0!==(e=eu.Playlist.seekable(i,n)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(t=eu.Playlist.seekable(i,n)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=yo.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+Ga(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}},f.prototype.updateDuration=function(){var t=this,e=this.mediaSource.duration,i=eu.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),r=function e(){t.mediaSource.duration=i,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)};0<n.length&&(i=Math.max(i,n.end(n.length-1))),e!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())},f.prototype.dispose=function(){var n=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=n.mediaTypes_[e].groups;for(var i in t)t[i].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()},f.prototype.master=function(){return this.masterPlaylistLoader_.master},f.prototype.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},f.prototype.setupSourceBuffers_=function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=function(e,t){var i,n,r=(i=t).segments&&i.segments.length&&i.segments[0].map?"mp4":"mp2t",o=(n=t.attributes||{}).CODECS?Pl(n.CODECS):Ll,s=t.attributes||{},a=!0,l=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&s.AUDIO){var u=e.mediaGroups.AUDIO[s.AUDIO];if(u)for(var c in a=!(l=!0),u)if(!u[c].uri&&!u[c].playlists){a=!0;break}}l&&!o.audioProfile&&(a||(o.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return Pl(r.playlists[0].attributes.CODECS).audioProfile}return null}(e,s.AUDIO)),o.audioProfile||(yo.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),o.audioProfile=Ll.audioProfile));var d={};o.videoCodec&&(d.video=""+o.videoCodec+o.videoObjectTypeIndicator),o.audioProfile&&(d.audio="mp4a.40."+o.audioProfile);var h=Il("audio",r,[d.audio]),p=Il("video",r,[d.video]),f=Il("video",r,[d.video,d.audio]);return l?!a&&d.video?[p,h]:a||d.video?[f,h]:[h,h]:d.video?[f]:[h]}(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}},f.prototype.configureLoaderMimeTypes_=function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new yo.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)},f.prototype.excludeUnsupportedVariants_=function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&m.MediaSource&&m.MediaSource.isTypeSupported&&!m.MediaSource.isTypeSupported('video/mp4; codecs="'+e.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return cl([e])[0]})+'"')&&(e.excludeUntil=1/0)})},f.prototype.excludeIncompatibleVariants_=function(e){var i=2,n=null,t=void 0;e.attributes.CODECS&&(t=Pl(e.attributes.CODECS),n=t.videoCodec,i=t.codecCount),this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};e.attributes.CODECS&&(t=Pl(e.attributes.CODECS)),t.codecCount!==i&&(e.excludeUntil=1/0),t.videoCodec!==n&&(e.excludeUntil=1/0)})},f.prototype.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var n=i,r=void 0,o=0;o<e.segments.length;o++){var s=e.segments[o];if(r||(r=Hl(t,n+s.duration/2)),r){if("cueIn"in s){r.endTime=n,r.adEndTime=n,n+=s.duration,r=null;continue}if(n<r.endTime){n+=s.duration;continue}r.endTime+=s.duration}else if("cueOut"in s&&((r=new m.VTTCue(n,n+s.duration,s.cueOut)).adStartTime=n,r.adEndTime=n+parseFloat(s.cueOut),t.addCue(r)),"cueOutCont"in s){var a,l,u=s.cueOutCont.split("/").map(parseFloat);a=u[0],l=u[1],(r=new m.VTTCue(n,n+s.duration,"")).adStartTime=n-a,r.adEndTime=r.adStartTime+l,t.addCue(r)}n+=s.duration}}(e,this.cueTagsTrack_,t)},f.prototype.goalBufferLength=function(){var e=this.tech_.currentTime(),t=wl.GOAL_BUFFER_LENGTH,i=wl.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,wl.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},f.prototype.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=wl.BUFFER_LOW_WATER_LINE,i=wl.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,wl.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,n)},f}(yo.EventTarget),nu=function e(t,i,n){y(this,e);var r,o,s,a=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=n,this.enabled=(r=t.playlists,o=i.uri,s=a,function(e){var t=r.master.playlists[o],i=Aa(t),n=La(t);return void 0===e?n:(e?delete t.disabled:t.disabled=!0,e===n||i||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},ru=["seeking","seeked","pause","playing","error"],ou=function(){function s(e){var t=this;y(this,s),this.tech_=e.tech,this.seekable=e.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Tl("PlaybackWatcher"),this.logger_("initialize");var i=function(){return t.monitorCurrentTime_()},n=function(){return t.techWaiting_()},r=function(){return t.cancelTimer_()},o=function(){return t.fixesBadSeeks_()};this.tech_.on("seekablechanged",o),this.tech_.on("waiting",n),this.tech_.on(ru,r),this.tech_.on("canplay",i),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",o),t.tech_.off("waiting",n),t.tech_.off(ru,r),t.tech_.off("canplay",i),t.checkCurrentTimeTimeout_&&m.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}return s.prototype.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&m.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=m.setTimeout(this.monitorCurrentTime_.bind(this),250)},s.prototype.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},s.prototype.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},s.prototype.fixesBadSeeks_=function(){var e=this.tech_.seeking(),t=this.seekable(),i=this.tech_.currentTime(),n=void 0;return e&&this.afterSeekableWindow_(t,i)&&(n=t.end(t.length-1)),e&&this.beforeSeekableWindow_(t,i)&&(n=t.start(0)+.1),void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+Ga(t)+". Seeking to "+n+"."),this.tech_.setCurrentTime(n),!0)},s.prototype.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Wa(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},s.prototype.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),r=Va(n,t);if(this.videoUnderflow_(r,n,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var o=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+o+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,t),!0}return!1},s.prototype.afterSeekableWindow_=function(e,t){return!!e.length&&t>e.end(e.length-1)+.1},s.prototype.beforeSeekableWindow_=function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)},s.prototype.videoUnderflow_=function(e,t,i){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,i);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+i),!0}return!1},s.prototype.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Va(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+qa),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},s.prototype.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return yo.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return yo.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),o=i.end(n);if(t-r<4&&2<t-r)return{start:r,end:o}}return null},s}(),su={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},au=function(e){!function t(i,e){var n=0,r=0,o=yo.mergeOptions(su,e);i.ready(function(){i.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){r&&i.currentTime(r)},a=function(e){null!=e&&(r=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",s),i.src(e),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},l=function(){if(Date.now()-n<1e3*o.errorInterval)i.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(o.getSource&&"function"==typeof o.getSource)return n=Date.now(),o.getSource.call(i,a);yo.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){i.off("loadedmetadata",s),i.off("error",l),i.off("dispose",e)};i.on("error",l),i.on("dispose",u),i.reloadSourceOnError=function(e){u(),t(i,e)}}(this,e)},lu={PlaylistLoader:ma,Playlist:Oa,Decrypter:aa,AsyncStream:ra,decrypt:sa,utils:Ha,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,i,n){var r=e.playlists.map(function(e){var t,i;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||m.Number.MAX_VALUE,width:t,height:i,playlist:e}});Dl(r,function(e,t){return e.bandwidth-t.bandwidth});var o=(r=r.filter(function(e){return!Oa.isIncompatible(e.playlist)})).filter(function(e){return Oa.isEnabled(e.playlist)});o.length||(o=r.filter(function(e){return!Oa.isDisabled(e.playlist)}));var s=o.filter(function(e){return e.bandwidth*wl.BANDWIDTH_VARIANCE<t}),a=s[s.length-1],l=s.filter(function(e){return e.bandwidth===a.bandwidth})[0],u=s.filter(function(e){return e.width&&e.height});Dl(u,function(e,t){return e.width-t.width});var c=u.filter(function(e){return e.width===i&&e.height===n});a=c[c.length-1];var d=c.filter(function(e){return e.bandwidth===a.bandwidth})[0],h=void 0,p=void 0,f=void 0;d||(p=(h=u.filter(function(e){return e.width>i||e.height>n})).filter(function(e){return e.width===h[0].width&&e.height===h[0].height}),a=p[p.length-1],f=p.filter(function(e){return e.bandwidth===a.bandwidth})[0]);var g=f||d||l||o[0]||r[0];return g?g.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Ol(this.tech_.el(),"width"),10),parseInt(Ol(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Oa.isEnabled);return Dl(e,function(e,t){return Ml(e,t)}),e.filter(function(e){return Pl(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Ml,comparePlaylistResolution:function(e,t){var i=void 0,n=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||m.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),i===(n=n||m.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:Ra()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(lu,t,{get:function(){return yo.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),wl[t]},set:function(e){yo.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?yo.log.warn("value of Hls."+t+" must be greater than or equal to 0"):wl[t]=e}})});var uu=function(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null},cu=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.uri){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};lu.canPlaySource=function(){return yo.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var du;lu.supportsNativeHls=(du=h.createElement("video"),!!yo.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(du.canPlayType(e))})),lu.supportsNativeDash=!!yo.getTech("Html5").isSupported()&&/maybe|probably/i.test(h.createElement("video").canPlayType("application/dash+xml")),lu.supportsTypeNatively=function(e){return"hls"===e?lu.supportsNativeHls:"dash"===e&&lu.supportsNativeDash},lu.isSupported=function(){return yo.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var hu=function(o){function s(e,t,i){y(this,s);var n=_(this,o.call(this,t,i.hls));if(t.options_&&t.options_.playerId){var r=yo(t.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return yo.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),n}}),r.vhs=n,r.dash=n}if(n.tech_=t,n.source_=e,n.stats={},n.ignoreNextSeekingEvent_=!1,n.setOptions_(),n.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return n.on(h,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;t&&t.contains(n.tech_.el())&&n.masterPlaylistController_.fastQualityChange_()}),n.on(n.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),n.on(n.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),n.on(n.tech_,"play",n.play),n}return v(s,o),s.prototype.setOptions_=function(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth,["withCredentials","bandwidth"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.bandwidth=this.options_.bandwidth},s.prototype.src=function(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=lu,this.options_.sourceType=uu(t),this.masterPlaylistController_=new iu(this.options_),this.playbackWatcher_=new ou(yo.mergeOptions(this.options_,{seekable:function(){return n.seekable()}})),this.masterPlaylistController_.on("error",function(){yo.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):lu.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=lu.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=0<this.throughput?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){yo.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Xa(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Xa(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){var i,e;e=(i=n).playlists,i.representations=function(){return e.master.playlists.filter(function(e){return!Aa(e)}).map(function(e,t){return new nu(i,e,e.uri)})},function(e){if("dash"===e.options_.sourceType){var t=yo.players[e.tech_.options_.playerId];if(t.eme){var i=function(e,t,i){if(!e)return e;var n={};for(var r in e)n[r]={audioContentType:'audio/mp4; codecs="'+i.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(n[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(n[r].url=e[r]);return yo.mergeOptions(e,n)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());i&&(t.currentSource().keySystems=i)}}}(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(yo.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))},s.prototype.setupQualityLevels_=function(){var i=this,e=yo.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;t=i.qualityLevels_,(e=i).representations().forEach(function(e){t.addQualityLevel(e)}),cu(t,e.playlists)}),this.playlists.on("mediachange",function(){cu(i.qualityLevels_,i.playlists)}))},s.prototype.play=function(){this.masterPlaylistController_.play()},s.prototype.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},s.prototype.duration=function(){return this.masterPlaylistController_.duration()},s.prototype.seekable=function(){return this.masterPlaylistController_.seekable()},s.prototype.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),o.prototype.dispose.call(this)},s}(yo.getComponent("Component")),pu={name:"videojs-http-streaming",VERSION:"1.0.0",canHandleSource:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=yo.mergeOptions(yo.options,t);return pu.canPlayType(e.type,i)},handleSource:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=yo.mergeOptions(yo.options,i);return t.hls=new hu(e,t,n),t.hls.xhr=Ra(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=yo.mergeOptions(yo.options,t).hls.overrideNative,n=uu(e);return!n||lu.supportsTypeNatively(n)&&!i?"":"maybe"}};return void 0!==yo.MediaSource&&void 0!==yo.URL||(yo.MediaSource=ml,yo.URL=yl),ml.supportsNativeMediaSources()&&yo.getTech("Html5").registerSourceHandler(pu,0),yo.HlsHandler=hu,yo.HlsSourceHandler=pu,yo.Hls=lu,yo.use||yo.registerComponent("Hls",lu),yo.options.hls=yo.options.hls||{},yo.registerPlugin?yo.registerPlugin("reloadSourceOnError",au):yo.plugin("reloadSourceOnError",au),yo});